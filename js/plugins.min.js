$=jQuery.noConflict(); jQuery(function(b){function a(a){this.length=a.length;this.each=function(c){b.each(a,c)};this.size=function(){return a.length}}b.browser.msie&&(Array.prototype.indexOf||(Array.prototype.indexOf=function(b,a){for(var c=a||0,g=this.length;c<g;c++)if(this[c]==b)return c;return-1}));var c=[];if(void 0==b.prop||"1.6">b().jquery)b.fn.prop=function(a,c){return b(this).attr(a,c)};projekktor=$p=function(){function d(a,d,e){this.config=new projekktorConfig("1.1.02");this._persCfg=["playbackQuality","enableNativePlayback", "enableFlashFallback","volume"];this.env={muted:!1,inFullscreen:!1,playerDom:null,mediaContainer:null,agent:"standard",mouseIsOver:!1,loading:!1,autoSize:!1,className:"",onReady:e};this.media=[];this._plugins=[];this._queue=[];this._cuePoints={};this.listeners=[];this.playerModel={};this._isReady=!1;this._currentItem=null;this._id=this._playlistServer="";this._reelUpdate=function(a){this.env.loading=!0;var c=this,a=a||[{}];this.media=[];try{for(var d in a.config)-1<typeof a.config[d].indexOf("objectfunction")|| (this.config[d]=eval(a.config[d]));null!=a.config&&($p.utils.log("Updated config var: "+d+" to "+this.config[d]),this._promote("configModified"),delete a.config)}catch(e){}d=a.playlist||a;for(var f in d)if(!("function"==typeof d[f]||null==typeof d[f])){if(d[f])var g=this._addItem(this._prepareMedia({file:d[f],config:d[f].config||{},errorCode:d[f].errorCode}));b.each(d[f].cuepoints||[],function(){this.item=g;c.setCuePoint(this)})}null==g&&this._addItem(this._prepareMedia({file:"",config:{},errorCode:97})); this.env.loading=!1;this._promote("scheduled",this.getItemCount());this._syncPlugins(function(){c.setActiveItem(0)})};this._addItem=function(b,a,c){var d=0;1===this.media.length&&"NA"==this.media[0].mediaModel&&(this._detachplayerModel(),this.media=[]);void 0===a||0>a||a>this.media.length-1?(this.media.push(b),d=this.media.length-1):(this.media.splice(a,!0===c?1:0,b),d=a);!1===this.env.loading&&this._promote("scheduleModified",this.getItemCount());return d};this._removeItem=function(b){var a=0;if(1=== this.media.length)return"NA"!=this.media[0].mediaModel&&(this.media[0]=this._prepareMedia({file:""})),0;void 0===b||0>b||b>this.media.length-1?(this.media.pop(),a=this.media.length):(this.media.splice(b,1),a=b);!1===this.env.loading&&this._promote("scheduleModified",this.getItemCount());return a};this._prepareMedia=function(a){var c=this,d=[],e=[],f={},g={},j=[];result={};extRegEx=[];for(var h in $p.mmap)platforms="object"==typeof $p.mmap[h].platform?$p.mmap[h].platform:[$p.mmap[h].platform],b.each(platforms, function(b,d){if(!c._canPlay($p.mmap[h].type,d,a.config.streamType||"http"))return!0;$p.mmap[h].level=c.config._platforms.indexOf(d);$p.mmap[h].level=0>$p.mmap[h].level?100:$p.mmap[h].level;extRegEx.push("."+$p.mmap[h].ext);f[$p.mmap[h].ext]||(f[$p.mmap[h].ext]=[]);f[$p.mmap[h].ext].push($p.mmap[h]);g[$p.mmap[h].type]||(g[$p.mmap[h].type]=[]);g[$p.mmap[h].type].push($p.mmap[h])});extRegEx="^.*.("+extRegEx.join("|")+")$";"string"==typeof a.file&&(a.file=[{src:a.file}],"string"==typeof a.type&&(a.file= [{src:a.file,type:a.type}]));if(b.isEmptyObject(a)||!1===a.file||null===a.file)a.file=[{src:null}];for(var k in a.file)if("config"!=k&&("string"==typeof a.file[k]&&(a.file[k]={src:a.file[k]}),null!=a.file[k].src)){if(null!=a.file[k].type&&""!==a.file[k].type)try{var n=a.file[k].type.split(" ").join("").split(/[\;]codecs=.([a-zA-Z0-9\,]*)[\'|\"]/i);void 0!==n[1]&&(a.file[k].codec=n[1],a.file[k].type=n[0])}catch(p){}else a.file[k].type=this._getTypeFromFileExtension(a.file[k].src);g[a.file[k].type]&& (g[a.file[k].type].sort(function(a,b){return a.level-b.level}),j.push(g[a.file[k].type][0]))}if(0==j.length)j=g["none/none"];else{j.sort(function(a,b){return a.level-b.level});var u=j[0].level,j=b.grep(j,function(a){return a.level==u})}var l=[];b.each(j||[],function(){l.push(this.type)});j=j&&0<j.length?j[0]:{type:"none/none",model:"NA",errorCode:11};l=$p.utils.unique(l);for(k in a.file)if(!(0>b.inArray(a.file[k].type,l)&&"none/none"!=j.type)){a.file[k].src=!b.isEmptyObject(a.config)&&"http"==a.config.streamType? $p.utils.toAbsoluteURL(a.file[k].src):a.file[k].src;if(null==(a.file[k].quality||null))a.file[k].quality="default";e.push(a.file[k].quality);d.push(a.file[k])}var r=[];b.each(this.getConfig("playbackQualities"),function(){r.push(this.key||"default")});return result={ID:a.config.id||$p.utils.randomId(8),file:d,qualities:$p.utils.intersect($p.utils.unique(r),$p.utils.unique(e)),mediaModel:j.model||"NA",errorCode:j.errorCode||a.errorCode||7,config:a.config||{}}};this._modelUpdateListener=function(a, b){var c=this;if(this.playerModel.init)switch("time"!=a&&"progress"!=a&&$p.utils.log("Update: '"+a,this.playerModel.getSrc(),this.playerModel.getModelName(),b),a){case "state":this._promote("state",b);switch(b){case "AWAKENING":var d=this.playerModel;this._syncPlugins(function(){d.getState("AWAKENING")&&d.displayItem(!0)});break;case "ERROR":this._addGUIListeners();this._promote("error",{});break;case "STOPPED":this._promote("stopped",{});break;case "PAUSED":!0===this.getConfig("disablePause")&&this.playerModel.applyCommand("play", 0);break;case "COMPLETED":this._currentItem+1>=this.media.length&&!this.getConfig("loop")&&(this.setFullscreen(!1),this._promote("done",{})),this.setActiveItem("next")}break;case "buffer":this._promote("buffer",b);break;case "modelReady":this._promote("item",c._currentItem);break;case "displayReady":this._promote("displayReady",!0);d=this.playerModel;this._syncPlugins(function(){c._promote("ready");c._addGUIListeners();d.getState("IDLE")||d.start()});break;case "qualityChange":this.setConfig({playbackQuality:b}); this._promote("qualityChange",b);break;case "FFreinit":break;case "seek":this._promote("seek",b);break;case "volume":this.setConfig({volume:b});this._promote("volume",b);0>=b?(this.env.muted=!0,this._promote("mute",b)):!0==this.env.muted&&(this.env.muted=!1,this._promote("unmute",b));break;case "playlist":this.setFile(b.file,b.type);break;case "config":this.setConfig(b);break;case "scaled":if(!0===this.env.autoSize){this.env.playerDom.css({height:b.realHeight+"px",width:b.realWidth+"px"});this._promote("resize", b);this.env.autoSize=!1;break}this._promote("scaled",b);break;default:this._promote(a,b)}};this._syncPlugins=function(a){var b=this;this.env.loading=!0;(function(){try{if(0<b._plugins.length)for(var c=0;c<b._plugins.length;c++)if(!b._plugins[c].isReady()){setTimeout(arguments.callee,50);return}b.env.loading=!1;b._promote("pluginsReady",{});try{a()}catch(d){}}catch(e){}})()};this._MD=function(b){projekktor("#"+b.currentTarget.id.replace("_media",""))._displayMousedownListener(b)};this._addGUIListeners= function(){var a=this;this._removeGUIListeners();this.getDC().get(0).addEventListener?this.getDC().get(0).addEventListener("mousedown",this._MD,!0):this.getDC().mousedown(function(b){a._displayMousedownListener(b)});this.getDC().mousemove(function(b){a._displayMousemoveListener(b)}).mouseenter(function(b){a._displayMouseEnterListener(b)}).mouseleave(function(b){a._displayMouseLeaveListener(b)});b(window).bind("resize.projekktor"+this.getId(),function(){a.playerModel.applyCommand("resize")}).bind("touchstart", function(){a._windowTouchListener(event)});!0===this.config.enableKeyboard&&(b(document.documentElement).unbind("keydown.pp"+this._id),b(document.documentElement).bind("keydown.pp"+this._id,function(b){a._keyListener(b)}))};this._removeGUIListeners=function(){b("#"+this.getId()).unbind();this.getDC().unbind();this.getDC().get(0).removeEventListener?this.getDC().get(0).removeEventListener("mousedown",this._MD,!0):this.getDC().get(0).detachEvent("onmousedown",this._MD);b(window).unbind("resize.projekktor"+ this.getId())};this._registerPlugins=function(){var a=b.merge(b.merge([],this.config._plugins),this.config._addplugins);if(!(0<this._plugins.length)&&0!=a.length)for(var c=0;c<a.length;c++){var d="projekktor"+a[c].charAt(0).toUpperCase()+a[c].slice(1);try{typeof eval(d)}catch(e){continue}d=b.extend(!0,{},new projekktorPluginInterface,eval(d).prototype);d.name=a[c].toLowerCase();d.pp=this;d.playerDom=this.env.playerDom;d._init(this.config["plugin_"+a[c].toLowerCase()]||{});this._plugins.push(d)}}; this.removePlugin=function(a){if(0!=this._plugins.length)for(var a=a||b.merge(b.merge([],this.config._plugins),this.config._addplugins),c=this._plugins.length,d=0;d<a.length;d++)for(var e=0;e<c;e++)void 0!=this._plugins[e]&&this._plugins[e].name==a[d].toLowerCase()&&(this._plugins[e].deconstruct(),this._plugins.splice(e,1))};this._promote=function(a,b){var c=a;if("object"==typeof c){if(!c._plugin)return;b.PLUGIN=c._plugin+"";b.EVENT=c._event+"";c="pluginevent"}"time"!=c&&("progress"!=c&&"mousemove"!= c)&&$p.utils.log("Event: ["+c+"]",b);if(0<this._plugins.length)for(var d=0;d<this._plugins.length;d++){try{this._plugins[d][c+"Handler"](b,this)}catch(e){}try{this._plugins[d].eventHandler(c,b,this)}catch(f){}}if(0<this.listeners.length)for(d=0;d<this.listeners.length;d++)try{(this.listeners[d].event==c||"*"==this.listeners[d].event)&&this.listeners[d].callback(b,this)}catch(g){}};this._detachplayerModel=function(){this._removeGUIListeners();try{this.playerModel.destroy(),this._promote("detach",{})}catch(a){}}; this._displayMousedownListener=function(a){if(!this.env.mouseIsOver||-1<"TEXTAREA|INPUT".indexOf(a.target.tagName.toUpperCase()))return!1;switch(a.which){case 1:return this._promote("leftclick",a),!0;case 2:return this._promote("middleclick",a),!1;case 3:if(b(a.target).hasClass("context"))break;a.stopPropagation();a.preventDefault();b(document).bind("contextmenu",function(){b(document).unbind("contextmenu");return!1});this._promote("rightclick",a);return!1}};this._displayMousemoveListener=function(a){-1< "|TEXTAREA|INPUT".indexOf("|"+a.target.tagName.toUpperCase())?this.env.mouseIsOver=!1:(this.env.mouseX!=a.clientX&&this.env.mouseY!=a.clientY&&(this.env.mouseIsOver=!0,this._promote("mousemove",a),this.env.mouseX=a.clientX,this.env.mouseY=a.clientY),a.stopPropagation())};this._windowTouchListener=function(a){a.touches&&0<a.touches.length&&(0==(b(document.elementFromPoint(a.touches[0].clientX,a.touches[0].clientY)).attr("id")||"").indexOf(this.getDC().attr("id"))?(!1==this.env.mouseIsOver&&this._promote("mouseenter", {}),this.env.mouseIsOver=!0,this._promote("mousemove",{}),a.stopPropagation()):this.env.mouseIsOver&&(this._promote("mouseleave",{}),this.env.mouseIsOver=!1))};this._displayMouseEnterListener=function(a){this._promote("mouseenter",{});this.env.mouseIsOver=!0;a.stopPropagation()};this._displayMouseLeaveListener=function(a){this._promote("mouseleave",{});this.env.mouseIsOver=!1;a.stopPropagation()};this._keyListener=function(a){if(this.env.mouseIsOver){var c=this,d=0<this.getConfig("keys").length?this.getConfig("keys"): [{32:function(a){a.setPlayPause()},27:function(a){a.setFullscreen(!1)},13:function(a){a.setFullscreen(!0)},39:function(a){a.setPlayhead("+5")},37:function(a){a.setPlayhead("-5")},38:function(a){a.setVolume("+5")},40:function(a){a.setVolume("-5")},68:function(a){a.setDebug()},67:function(){$p.utils.log("Config Dump",this.config)},80:function(){$p.utils.log("Schedule Dump",this.media)}}];a.stopPropagation();a.preventDefault();$p.utils.log("Keypress: "+a.keyCode);this._promote("key",a);b.each(d||[], function(){try{this[a.keyCode](c)}catch(b){}try{this["*"](c)}catch(d){}})}};this._enterFullViewport=function(a,c){var d=this.getIframeWindow()||b(window),e=this.getIframe()||this.getDC();a&&(d=b(window),e=this.getDC());e.data("fsdata",{scrollTop:d.scrollTop(),scrollLeft:d.scrollLeft(),targetStyle:e.attr("style"),bodyOverflow:b(d[0].document.body).css("overflow"),iframeWidth:e.attr("width")||0,iframeHeight:e.attr("height")||0});d.scrollTop(0).scrollLeft(0);b(d[0].document.body).css("overflow","hidden"); e.css({position:"absolute",display:"block",top:0,left:0,width:"100%",height:"100%",zIndex:9999,margin:0,padding:0});!1!==c&&this.getDC().addClass("fullscreen");return e};this._exitFullViewport=function(a){var c=this.getIframeWindow()||b(window),d=this.getIframe()||this.getDC();a&&(c=b(window),d=this.getDC());var e=d.data("fsdata")||{};c.scrollTop(e.scrollTop).scrollLeft(e.scrollLef);b(c[0].document.body).css("overflow",e.bodyOverflow);0<e.iframeWidth&&!a&&(d.attr("width",e.iframeWidth+"px"),d.attr("height", e.iframeHeight+"px"));d.attr("style",null==e.targetStyle?"":e.targetStyle);this.getDC().removeClass("fullscreen");return this.getIframe()?parent.window.document:document};this.getPlayerVer=function(){return this.config._version};this.getItemConfig=function(a,b){return this.getConfig(a,b)};this.getConfig=function(a,c){var d=c||this._currentItem,e=this.config["_"+a]||this.config[a]||null;-1<b.inArray(a,this._persCfg)&&null!==this._cookie(a)&&(e=this._cookie(a));if(void 0==this.config["_"+a])try{void 0!== this.media[d].config[a]&&(e=this.media[d].config[a])}catch(f){}if(-1<a.indexOf("plugin_"))try{this.media[d].config[a]&&(e=b.extend(!0,{},this.config[a],this.media[d].config[a]))}catch(g){}if(null==e)return null;"object"==typeof e&&null===e.length?e=b.extend(!0,{},e||{}):"object"==typeof e&&(e=b.extend(!0,[],e||[]));if("string"==typeof e)switch(e){case "true":e=!0;break;case "false":e=!1;break;case "NaN":case "undefined":case "null":e=null}return e};this.getDC=function(){return this.env.playerDom}; this.getState=function(a){var b=null;try{b=this.playerModel.getState()}catch(c){b="IDLE"}return null!=a?b==a.toUpperCase():b};this.getLoadProgress=function(){try{return this.playerModel.getLoadProgress()}catch(a){return 0}};this.getKbPerSec=function(){try{return this.playerModel.getKbPerSec()}catch(a){return 0}};this.getItemCount=function(){return 1==this.media.length&&"na"==this.media[0].mediaModel?0:this.media.length};this.getItemId=function(a){return this.media[a||this._currentItem].ID||null}; this.getItemIdx=function(){return this._currentItem};this.getPlaylist=function(){return this.getItem("*")};this.getItem=function(a){if(1==this.media.length&&"na"==this.media[0].mediaModel)return[];switch(a||"current"){case "next":return b.extend(!0,[],this.media[this._currentItem+1]);case "prev":return b.extend(!0,[],this.media[this._currentItem-1]);case "current":return b.extend(!0,[],this.media[this._currentItem]);case "*":return b.extend(!0,[],this.media);default:return b.extend(!0,[],this.media[a|| this._currentItem])}};this.getVolume=function(){return!0===this.getConfig("fixedVolume")?this.config.volume:this.getConfig("volume")};this.getTrackId=function(){return this.getConfig("trackId")?this.config.trackId:null!=this._playlistServer?"pl"+this._currentItem:null};this.getLoadPlaybackProgress=function(){try{return this.playerModel.getLoadPlaybackProgress()}catch(a){return 0}};this.getDuration=function(){try{return this.playerModel.getDuration()}catch(a){return 0}};this.getPosition=function(){try{return this.playerModel.getPosition()|| 0}catch(a){return 0}};this.getMaxPosition=function(){try{return this.playerModel.getMaxPosition()||0}catch(a){return 0}};this.getTimeLeft=function(){try{return this.playerModel.getDuration()-this.playerModel.getPosition()}catch(a){return this.media[this._currentItem].duration}};this.getInFullscreen=function(){return this.getNativeFullscreenSupport().isFullScreen()};this.getMediaContainer=function(){null==this.env.mediaContainer&&(this.env.mediaContainer=b("#"+this.getMediaId()));0==this.env.mediaContainer.length&& (this.env.mediaContainer=0<this.env.playerDom.find("."+this.getNS()+"display").length?b(document.createElement("div")).attr({id:this.getId()+"_media"}).css({overflow:"hidden",height:"100%",width:"100%",top:0,left:0,padding:0,margin:0,display:"block"}).appendTo(this.env.playerDom.find("."+this.getNS()+"display")):b(document.createElement("div")).attr({id:this.getMediaId()}).css({width:"1px",height:"1px"}).appendTo(b(document.body)));return this.env.mediaContainer};this.getMediaId=function(){return this.getId()+ "_media"};this.getMediaType=function(){try{return this._getTypeFromFileExtension(this.playerModel.getSrc())||"na/na"}catch(a){return"na/na"}};this.getUsesFlash=function(){return!1!=this.playerModel.flashVersion};this.getModel=function(){try{return this.media[this._currentItem].mediaModel.toUpperCase()}catch(a){return"NA"}};this.getIframeWindow=function(){try{return!1===(parent.location.host||!1)?!1:b(parent.window)}catch(a){return!1}};this.getIframe=function(){try{var a=window.$(frameElement)||[]; return 0==a.length?!1:a}catch(b){return!1}};this.getPlaybackQuality=function(){var a="default";try{a=this.playerModel.getPlaybackQuality()}catch(c){}"default"==a&&(a=this.getConfig("playbackQuality"));"default"==a&&(a=this.getAppropriateQuality());-1==b.inArray(a,this.getPlaybackQualities())&&(a="default");return a};this.getPlaybackQualities=function(){try{return b.extend(!0,[],this.media[this._currentItem].qualities||[])}catch(a){return[]}};this.getFlashVersion=function(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"); try{a.AllowScriptAccess="always"}catch(b){return"6,0,0"}}catch(c){}return(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(d){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(e){}}return 0};this.getAndroidVersion=function(){var a= navigator.userAgent.toLowerCase();try{return parseInt(a.match(/android\s+(([\d\.]+))?/)[1])}catch(b){return 0}};this.getIosVersion=function(){var a=navigator.userAgent.toLowerCase(),b=a.indexOf("os ");return(-1<a.indexOf("iphone")||-1<a.indexOf("ipad"))&&-1<b?parseInt(a.substr(b+3,3).replace("_",".")):0};this.getNativeVersion=function(a){if("*"==a)return this.getCanPlayNatively()?1:0;try{var c=document.createElement(-1<a.indexOf("video")?"video":"audio");if(!1!=c.canPlayType)switch(c.canPlayType(a)){case "no":case "":break; case "maybe":if(b.browser.opera&&11>b.browser.version.slice(0,2))break;default:return 1}}catch(d){return 0}};this.getBrowserVersion=function(){return 1};this.getIsMobileClient=function(a){for(var b=navigator.userAgent.toLowerCase(),c=["android","windows ce","blackberry","palm","mobile"],d=0;d<c.length;d++)if(-1<b.indexOf(c[d]))return a?c[d].toUpperCase()==a.toUpperCase():!0;return!1};this.getCanPlay=function(a,b,c){return this._canPlay(a,b,c)};this.getCanPlayNatively=function(a){return this._canPlay(a, "NATIVE")};this._canPlay=function(a,c,d){var e=[],f=[],g=d||"http",c="object"==typeof c?c:[c];null==$p._compTableCache&&($p._compTableCache=this._testMediaSupport());b.each(c,function(a,c){null!=c&&(c=c.toUpperCase());b.each($p._compTableCache[g]||[],function(a){if(null!=c&&a!=c)return!0;e=b.merge(e,this)})});if(0==e.length)return!1;switch(typeof a){case "undefined":if(0<e.length)return!0;case "string":if("*"==a)return e;f.push(a);break;case "array":f=a}for(var j in f)if(-1<b.inArray(f[j],e))return!0; return!1};this.getPlatforms=function(){for(var a=[],b=this.getConfig("platforms"),c=0;c<b.length;c++){var d=$p.utils.capitalise(b[c].toUpperCase());try{0<this["get"+d+"Version"]("*")&&!1!==this.getConfig("enable"+d+"Platform")&&a.push(d)}catch(e){}}return a};this.getNativeFullscreenSupport=function(){var a=this,c={supportsFullScreen:"semi",isFullScreen:function(){try{return a.getDC().hasClass("fullscreen")}catch(b){return!1}},requestFullScreen:function(){a._enterFullViewport();a.playerModel.applyCommand("fullscreen", !0)},cancelFullScreen:function(){a._exitFullViewport();a.playerModel.applyCommand("fullscreen",!1)},prefix:"",ref:this},d=["webkit","moz","o","ms","khtml"];if("undefined"!=typeof document.cancelFullScreen)c.supportsFullScreen=!0;else for(var e=0,f=d.length;e<f&&!(c.prefix=d[e],"undefined"!=typeof document.createElement("video")[c.prefix+"EnterFullscreen"]&&(c.supportsFullScreen="media"),"undefined"!=typeof document[c.prefix+"CancelFullScreen"]&&(c.supportsFullScreen="dom","moz"==c.prefix&&"undefined"== typeof document[c.prefix+"FullScreenEnabled"]&&(c.supportsFullScreen=!1)),!1!==c.supportsFullScreen&&"semi"!==c.supportsFullScreen);e++);if("semi"==c.supportsFullScreen)return c;c.isFullScreen=function(){var b=a.getIframe()?parent.window.document:document;switch(this.prefix){case "":return b.fullScreen;case "webkit":return b.webkitIsFullScreen;default:return b[this.prefix+"FullScreen"]}};if("dom"==c.supportsFullScreen)return c.requestFullScreen=function(){if(!this.isFullScreen()){var c=a._enterFullViewport(), d=this,e=a.getIframe()?parent.window.document:document;b(e).unbind(this.prefix+"fullscreenchange.projekktor");b(e).bind(this.prefix+"fullscreenchange.projekktor",function(){d.isFullScreen()?d.ref.playerModel.applyCommand("fullscreen",!0):(d.ref._exitFullViewport(),d.ref.playerModel.applyCommand("fullscreen",!1))});if(""===this.prefix)c.get(0).requestFullScreen();else c.get(0)[this.prefix+"RequestFullScreen"]()}},c.cancelFullScreen=function(){b(a.getIframe()?parent.window.document:document).unbind(this.prefix+ "fullscreenchange.projekktor");var c=a._exitFullViewport();if(""===this.prefix)c.cancelFullScreen();else c[this.prefix+"CancelFullScreen"]();a.playerModel.applyCommand("fullscreen",!1)},c;c.requestFullScreen=function(){a.playerModel.getMediaElement().get(0)[this.prefix+"EnterFullscreen"]()};c.dest={};c.cancelFullScreen=function(){};return c};this.getId=function(){return this._id};this.getHasGUI=function(){try{return this.playerModel.getHasGUI()}catch(a){return!1}};this.getCssPrefix=this.getNS=function(){return this.config._cssClassPrefix|| this.config._ns||"pp"};this.getPlayerDimensions=function(){return{width:this.config._width,height:this.config._height}};this.getMediaDimensions=function(){return{width:this.config._width,height:this.config._height}};this.getAppropriateQuality=function(){if(0==this.media.length)return[];var a=this.env.playerDom.width(),c=this.env.playerDom.height(),d=$p.utils.roundNumber(a/c,2),e=this.media[this._currentItem].qualities||[],f={};b.each(this.getConfig("playbackQualities")||[],function(){if(0>b.inArray(this.key, e)||(this.minHeight||0)>c&&f.minHeight<=c||(f.minHeight||0)>this.minHeight)return!0;if("number"==typeof this.minWidth){if(0===this.minWidth&&this.minHeight>c||this.minWidth>a)return!0;f=this}else if("object"==typeof this.minWidth){var g=this;b.each(this.minWidth,function(){if((this.ratio||100)>d||this.minWidth>a)return!0;f=g;return!0})}return!0});return f.key||"default"};this.getFromUrl=function(a,c,d,e,f){var g=null;c==this&&"_reelUpdate"==d&&this._promote("scheduleLoading",1+this.getItemCount()); "_"!=d.substr(0,1)?window[d]=function(a){try{delete window[d]}catch(b){}c[d](a)}:-1<f.indexOf("jsonp")&&(this["_jsonp"+d]=function(a){c[d](a)});if(f){if(void 0==b.parseJSON&&-1<f.indexOf("json"))return this._raiseError("Projekktor requires at least jQuery 1.4.2 in order to handle JSON playlists."),this;f=-1<f.indexOf("/")?f.split("/")[1]:f}b.ajax({url:a,complete:function(a,b){if(void 0==f)try{-1<a.getResponseHeader("Content-Type").indexOf("xml")&&(f="xml"),-1<a.getResponseHeader("Content-Type").indexOf("json")&& (f="json"),-1<a.getResponseHeader("Content-Type").indexOf("html")&&(f="html")}catch(t){}g=$p.utils.cleanResponse(a.responseText,f);try{g=e(g,a.responseText)}catch(j){}if("error"!=b&&"jsonp"!=f)try{c[d](g)}catch(h){}},error:function(){if(c[d]&&"jsonp"!=f)c[d](!1)},cache:!0,async:!this.getIsMobileClient(),dataType:f,jsonpCallback:"_"!=d.substr(0,1)?!1:"projekktor('"+this.getId()+"')._jsonp"+d,jsonp:"_"!=d.substr(0,1)?!1:"callback"});return this};this.setActiveItem=function(a){var c=0,d=this._currentItem, e=this;if("string"==typeof a)switch(a){case "previous":c=this._currentItem-1;break;case "next":c=this._currentItem+1;break;default:case "poster":result=0}else c="number"==typeof a?parseInt(a):0;if(c!=this._currentItem&&!0==this.getConfig("disallowSkip")&&!this.getState("COMPLETED"))return this;this._detachplayerModel();a=this.env.loading=!1;0===c&&(null==d||d==c)&&(!0===this.config._autoplay||-1<"DESTROYING|AWAKENING".indexOf(this.getState()))?a=!0:1<this.getItemCount()&&(c!=d&&null!=d&&!0===this.config._continuous&& c<this.getItemCount())&&(a=!0);if(c>=this.getItemCount()||0>c)a=this.config._loop,c=0;this._currentItem=c;c=this.getInFullscreen();this.getDC().attr("class",this.env.className);c&&this.getDC().addClass("fullscreen");c=this.media[this._currentItem].mediaModel.toUpperCase();$p.models[c]?(null!=this.getConfig("className")&&this.getDC().addClass(this.getNS()+this.getConfig("className")),this.getDC().addClass(this.getNS()+(this.getConfig("streamType")||"http"))):(c="NA",this.media[this._currentItem].mediaModel= c,this.media[this._currentItem].errorCode=8);this.playerModel=new playerModel;b.extend(this.playerModel,$p.models[c].prototype);this._promote("syncing","display");this._enqueue(function(){try{e._applyCuePoints()}catch(a){}});this.playerModel._init({media:b.extend(!0,{},this.media[this._currentItem]),model:c,pp:this,environment:b.extend(!0,{},this.env),autoplay:a,quality:this.getPlaybackQuality()});return this};this.getIsLastItem=function(){return this._currentItem==this.media.length-1&&!0!==this.config._loop}; this.getIsFirstItem=function(){return 0==this._currentItem&&!0!==this.config._loop};this.setPlay=function(){this._enqueue("play",!1);return this};this.setPause=function(){this._enqueue("pause",!1);return this};this.setStop=function(a){var b=this;if(this.getState("IDLE"))return this;a?this._enqueue(function(){b._currentItem=0;b.setActiveItem(0)}):this._enqueue("stop",!1);return this};this.setPlayPause=function(){this.getState("PLAYING")?this.setPause():this.setPlay();return this};this.setVolume=function(a, b){if(!0==this.getConfig("fixedVolume"))return this;var c=this.getVolume();if("string"==typeof a)var d=a.substr(0,1),a=parseFloat(a.substr(1)),a=1<a?a/100:a,a="+"==d?this.getVolume()+a:"-"==d?this.getVolume()-a:this.getVolume();if("number"==typeof a)a=1<a?1:a,a=0>a?0:a;else return this;if(a>c&&b){if(0.03<a-c){for(;c<=a;c+=0.03)this._enqueue("volume",c,b);this._enqueue("volume",a,b);return this}}else if(a<c&&b&&0.03<c-a){for(;c>=a;c-=0.03)this._enqueue("volume",c,b);this._enqueue("volume",a,b);return this}this._enqueue("volume", a);return this};this.setPlayhead=function(a){if(!0==this.getConfig("disallowSkip"))return this;if("string"==typeof a)var b=a.substr(0,1),a=parseFloat(a.substr(1)),a="+"==b?this.getPosition()+a:"-"==b?this.getPosition()-a:this.getPosition();"number"==typeof a&&this._enqueue("seek",a);return this};this.setPlayerPoster=function(a){var b=this;this._enqueue(function(){b.setConfig({poster:a},0)});this._enqueue(function(){b.playerModel.setPosterLive()});return this};this.setItemConfig=function(){return this.setConfig(arguments)}; this.setConfig=function(){var a=this,b=arguments;this._enqueue(function(){a._setConfig(b[0]||null,b[1]||null)});return this};this._setConfig=function(){if(!arguments.length)return result;var a=arguments[0],c="*",d=!1;if("object"!=typeof a)return this;var c="string"==arguments[1]||"number"==arguments[1]?arguments[1]:this._currentItem,e;for(e in a)if(-1<b.inArray(e,this._persCfg)&&this._cookie(e,"string"==typeof a[e]?a[e]:eval(a[e])),null==this.config["_"+e]){try{d=eval(a[e])}catch(f){d=a[e]}if("*"== c)b.each(this.media,function(){null==this.config&&(this.config={});this.config[e]=d});else{if(void 0==this.media[c])break;null==this.media[c].config&&(this.media[c].config={});this.media[c].config[e]=d}}return this};this.setFullscreen=function(a){if(this.getConfig("isCrossDomain"))return this;var b=this.getNativeFullscreenSupport(),a=null==a?!b.isFullScreen():a;if(a==b.isFullScreen())return this;!0===a?b.requestFullScreen():b.cancelFullScreen();return this};this.setResize=function(){this._modelUpdateListener("resize"); return this};this.setSize=function(a){var b=a.width||this.config._width,c=a.height||this.config._height;-1==b.indexOf("px")&&-1==b.indexOf("%")&&(a.width+="px");-1==c.indexOf("px")&&-1==c.indexOf("%")&&(a.height+="px");this.getDC().css({width:a.width,height:a.height});this.config._width=this.getDC().width();this.config._height=this.getDC().height();this._modelUpdateListener("resize")};this.setLoop=function(a){this.config._loop=a||!this.config._loop};this.setDebug=function(a){$p.utils.logging=a||!$p.utils.logging; $p.utils.logging&&$p.utils.log("DEBUG MODE for player #"+this.getId())};this.addListener=function(a,b){var c=this;this._enqueue(function(){c._addListener(a,b)});return this};this._addListener=function(a,b){this.listeners.push({event:a,callback:b});return this};this.removeListener=function(a,b){for(var c=this.listeners.length,d=0;d<c;d++)void 0!=this.listeners[d]&&(this.listeners[d].event!=a&&"*"!==a||this.listeners[d].callback!=b&&null!=b||this.listeners.splice(d,1));return this};this.setItem=function(a, b,c){var d=0;this._clearqueue();null==a?(d=this._removeItem(b),d===this._currentItem&&this.setActiveItem("previous")):(d=this._addItem(this._prepareMedia({file:a,config:a.config||{}}),b,c),d===this._currentItem&&this.setActiveItem(this._currentItem));return this};this.setFile=function(a,b){var c=a||"",d=b||this._getTypeFromFileExtension(c),e=[];if(!0===this.env.loading)return this;this._clearqueue();this.env.loading=!0;this._detachplayerModel();if("object"==typeof c)return $p.utils.log("Applying incoming JS Object", c),this._reelUpdate(c),this;e[0]={};e[0].file={};e[0].file.src=c||"";e[0].file.type=d||this._getTypeFromFileExtension(splt[0]);if(-1<e[0].file.type.indexOf("/xml")||-1<e[0].file.type.indexOf("/json"))return $p.utils.log("Loading external data from "+e[0].file.src+" supposed to be "+e[0].file.type),this._playlistServer=e[0].file.src,this.getFromUrl(e[0].file.src,this,"_reelUpdate",this.getConfig("reelParser"),e[0].file.type),this;$p.utils.log("Applying incoming single file:"+e[0].file.src,e);this._reelUpdate(e); return this};this.setPlaybackQuality=function(a){a=a||this.getAppropriateQuality();if(-1<b.inArray(a,this.media[this._currentItem].qualities||[]))this.playerModel.applyCommand("quality",a),this.setConfig({playbackQuality:a});return this};this.openUrl=function(a){a=a||{url:"",target:"",pause:!1};if(""!=a.url)return!0===a.pause&&this.setPause(),window.open(a.url,a.target).focus(),this};this.selfDestruct=this.destroy=function(){var a=this;this._enqueue(function(){a._destroy()});return this};this._destroy= function(){var a=this;b(this).unbind();this.removePlugin();this.playerModel.destroy();this._removeGUIListeners();this.env.playerDom.replaceWith(b(this.env.srcNode).clone());b.each(c,function(b){try{(this.getId()==a.getId()||this.getId()==a.getId()||this.getParent()==a.getId())&&c.splice(b,1)}catch(d){}});this._promote("destroyed");this.removeListener("*");return this};this.reset=function(){var a=this;this._clearqueue();this._enqueue(function(){a._reset()});return this};this._reset=function(){var a= {};b(this).unbind();this.setFullscreen(!1);this.removePlugin();this._removeGUIListeners();this.env.mediaContainer=null;for(var c in this.config)a["_"==c.substr(0,1)?c.substr(1):c]=this.config[c];"function"===typeof this.env.onReady&&this._enqueue(this.env.onReady(this));this._init(this.env.playerDom,a);return this};this.setCuePoint=function(a){var c=void 0!==a.item?a.item:this.getItemIdx(),d={id:a.id||$p.utils.randomId(8),group:a.group||$p.utils.randomId(8),item:c,on:$p.utils.toSeconds(a.on)||0,off:$p.utils.toSeconds(a.off)|| $p.utils.toSeconds(a.on)||0,value:a.value||null,callback:a.callback||function(){},precision:null==a.precision?0:a.precision,title:null==a.title?"":a.title,_listeners:[],_unlocked:!1,_active:!1,_lastTime:0,isAvailable:function(){return this._unlocked},_stateListener:function(a,b){if(-1<"STOPPED|COMPLETED|DESTROYING".indexOf(a)){if(this._active)try{this.callback(!1,this,b)}catch(c){}this._active=!1;this._lastTime=-1}},_timeListener:function(a,c){if(!(c.getItemIdx()!==this.item&&"*"!=this.item)){var d= 0==this.precision?Math.round(a):$p.utils.roundNumber(a,this.precision),e=this;if(!1===this._unlocked){var f=c.getDuration()*c.getLoadProgress()/100;if(this.on<=f||this.on<=d)b.each(this._listeners.unlock||[],function(){this(e,c)}),this._unlocked=!0;else return}if(this._lastTime!=d){f=1>=d-this._lastTime&&0<d-this._lastTime;if((d>=this.on&&d<=this.off||d>=this.on&&this.on==this.off&&d<=this.on+1)&&!0!==this._active){this._active=!0;$p.utils.log("Cue Point: [ON "+this.on+"] at "+d,this);try{this.callback({enabled:!0, value:this.value,seeked:!f,player:c})}catch(g){}}else if((d<this.on||d>this.off)&&this.off!=this.on&&!0==this._active){this._active=!1;$p.utils.log("Cue Point: [OFF] at "+this.off,this);try{this.callback({enabled:!1,value:this.value,seeked:!f,player:c})}catch(y){}}else this.off==this.on&&(this._active&&1<(new Number(d-this.on)).toPrecision(this.precision))&&(this._active=!1);this._lastTime=d}}},addListener:function(a,b){null==this._listeners[a]&&(this._listeners[a]=[]);this._listeners[a].push(b|| function(){})}};null!=a.unlockCallback&&d.addListener("unlock",a.unlockCallback);null==this._cuePoints[c]&&(this._cuePoints[c]=[]);this._cuePoints[c].push(d);this.getState("IDLE")||this._promote("cuepointAdded");return this};this.getCuePoints=function(a){return this._cuePoints[a||this.getItemIdx()]||this._cuePoints||{}};this.getCuePointById=function(a,b){for(var c=!1,d=this.getCuePoints(b),e=0;e<d.length;e++)if(d.id==a){c=this;break}return c};this.removeCuePoints=function(a,b){var c=this.getCuePoints(a)|| {},d;for(d in c)for(var e=0;e<c[d].length;e++)if(c[d][e].group===b||void 0===b)this.removeListener("time",c[d][e].timeEventHandler),this.removeListener("state",c[d][e].stateEventHandler),c[d].splice(e,1)};this._applyCuePoints=function(){var a=this;null==this._cuePoints[this._currentItem]&&null==this._cuePoints["*"]||b.each(b.merge(this._cuePoints[this._currentItem]||[],this._cuePoints["*"]||[]),function(b,c){c.timeEventHandler=function(a,b){try{c._timeListener(a,b)}catch(d){}};c.stateEventHandler= function(a,b){try{c._stateListener(a,b)}catch(d){}};a.addListener("time",c.timeEventHandler);a.addListener("state",c.stateEventHandler);a.addListener("item",function(){a.removeListener("time",c.timeEventHandler);a.removeListener("state",c.stateEventHandler)})})};this._enqueue=function(a,b,c){null!=a&&(this._queue.push({command:a,params:b,delay:c}),this._processQueue())};this._clearqueue=function(){!0===this._isReady&&(this._queue=[])};this._processQueue=function(){var a=this,b=!1;!0!==this._processing&& !0!==this.env.loading&&(this._processing=!0,function(){try{b=a.playerModel.getIsReady()}catch(c){}if(!0!==a.env.loading&&b){try{var d=a._queue.shift();null!=d&&("string"==typeof d.command?0<d.delay?setTimeout(function(){a.playerModel.applyCommand(d.command,d.params)},d.delay):a.playerModel.applyCommand(d.command,d.params):d.command(a))}catch(e){}0==a._queue.length?(!1===a._isReady&&(a._isReady=!0),a._processing=!1):arguments.callee()}else setTimeout(arguments.callee,100)}())};this._cookie=function(a, b){if(void 0===document.cookie||!1===document.cookie||null==a)return null;if(1<arguments.length&&null!=b){var c=new Date;c.setDate(c.getDate()+this.config._cookieExpiry);return document.cookie=encodeURIComponent(this.config._cookieName+"_"+a)+"="+encodeURIComponent(b)+"; expires="+c.toUTCString()+"; path=/"}var d=(c=RegExp("(?:^|; )"+encodeURIComponent(this.config._cookieName+"_"+a)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(c[1]):null;return"true"==d||"false"==d?eval(d):d};this._getTypeFromFileExtension= function(a){var b="",c=[],d={},c=[],e;for(e in $p.mmap)c.push("."+$p.mmap[e].ext),d[$p.mmap[e].ext]=$p.mmap[e];c="^.*.("+c.join("|")+")";try{b=a.match(RegExp(c))[1],b=!b?"NaN":b.replace(".","")}catch(f){b="NaN"}return d[b].type};this._testMediaSupport=function(){for(var a={},c="",d=this,e=0;e<$p.mmap.length;e++)platforms="object"==typeof $p.mmap[e].platform?$p.mmap[e].platform:[$p.mmap[e].platform],b.each(platforms,function(f,g){if(null==g)return!0;g=g.toUpperCase();c=$p.mmap[e].streamType||["http"]; b.each(c,function(c,f){null==a[f]&&(a[f]={});null==a[f][g]&&(a[f][g]=[]);if(-1<b.inArray($p.mmap[e].type,a[f][g]))return!0;var j=$p.utils.capitalise(g),h=$p.models[$p.mmap[e].model.toUpperCase()].prototype[g.toLowerCase()+"Version"]||1;try{if(d["get"+j+"Version"]($p.mmap[e].type)>=h)return!1!=d.config["_enable"+j+"Platform"]&&(a[f][g].push($p.mmap[e].type),!0==$p.mmap[e].fixed)?!1:!0}catch(k){$p.utils.log("ERROR","get"+j+"Version not found")}})});return a};this._raiseError=function(a){this.env.playerDom.html(a).css({color:"#fdfdfd", backgroundColor:"#333",lineHeight:this.config.height+"px",textAlign:"center",display:"block"});this._promote("error")};this._readMediaTag=function(c){var d={},e="",f=[],g=this;if("VIDEO"!=c[0].tagName.toUpperCase()&&"AUDIO"!=c[0].tagName.toUpperCase())return!1;this.getConfig("ignoreAttributes")||(d={autoplay:(void 0!==c.attr("autoplay")||void 0!==c.prop("autoplay"))&&!1!==c.prop("autoplay")?!0:!1,controls:(void 0!==c.attr("controls")||void 0!==c.prop("controls"))&&!1!==c.prop("controls")?!0:!1,loop:(void 0!== c.attr("autoplay")||void 0!==c.prop("loop"))&&!1!==c.prop("loop")?!0:!1,title:void 0!==c.attr("title")&&!1!==c.attr("title")?c.attr("title"):"",poster:void 0!==c.attr("poster")&&!1!==c.attr("poster")?c.attr("poster"):"",width:void 0!==c.attr("width")&&!1!==c.attr("width")?c.attr("width"):!1,height:void 0!==c.attr("height")&&!1!==c.attr("height")?c.attr("height"):!1});if(b.browser.msie)for(var e=b(b("<div></div>").html(b(c).clone())).html(),f=["autoplay","controls","loop"],j=0;j<f.length;j++)-1!=e.indexOf(f[j])&& (d[f[j]]=!0);c.prop("autoplay",!1);d.playlist=[];d.playlist[0]=[];a.attr("src")&&d.playlist[0].push({src:a.attr("src"),type:a.attr("type")||this._getTypeFromFileExtension(a.attr("src"))});if(b.browser.msie&&9>b.browser.version){e=a;do e=e.next("source"),e.attr("src")&&d.playlist[0].push({src:e.attr("src"),type:e.attr("type")||this._getTypeFromFileExtension(e.attr("src"))});while(e.attr("src"))}else a.children("source").each(function(){b(this).attr("src")&&d.playlist[0].push({src:b(this).attr("src"), type:b(this).attr("type")||g._getTypeFromFileExtension(b(this).attr("src"))})});try{c[0].pause(),c.find("source").remove(),c.prop("src",""),c[0].load()}catch(h){}return d};this._applyDimensions=function(){!1!==this.config._height&&!1!==this.config._width&&(this.config._width<=this.config._minWidth&&!0!=this.config._iframe&&(this.config._width=this.config._minWidth,this.env.autoSize=!0),this.config._height<=this.config._minHeight&&!0!=this.config._iframe&&(this.config._height=this.config._minHeight, this.env.autoSize=!0));this.env.playerDom.css({"max-width":"100%"});!1!==this.config._height&&this.env.playerDom.css("height",this.config._height+"px");!1!==this.config._width&&this.env.playerDom.css("width",this.config._width+"px")};this._init=function(c,e){var f=c||a,g=e||d,j=this._readMediaTag(f);this.env.srcNode=b.extend(!0,{},f);this.env.className=f.attr("class");!1!==j?(this.env.playerDom=b("<div/>").attr({"class":f[0].className,style:f.attr("style")}),f.replaceWith(this.env.playerDom)):(j= {width:f.attr("width")||f.css("width")||f.width(),height:f.attr("height")||f.css("height")||f.height()},this.env.playerDom=f);var g=b.extend(!0,{},j,g),h;for(h in g)null!=this.config["_"+h]?this.config["_"+h]=g[h]:this.config[h]=-1<h.indexOf("plugin_")?b.extend(this.config[h],g[h]):g[h];$p.utils.logging=this.config._debug;this.getIsMobileClient()&&(this.config._autoplay=!1,this.config.fixedVolume=!0);this._id=f[0].id||$p.utils.randomId(8);this.env.playerDom.attr("id",this._id);if(this.config._theme)switch(typeof this.config._theme){case "object":this._applyTheme(this.config._theme)}else this._start(!1); return this};this._start=function(){var a=this;this._applyDimensions();this._registerPlugins();!0===this.config._iframe&&(this.getIframeWindow()?this.getIframeWindow().ready(function(){a._enterFullViewport(!0,!1)}):a._enterFullViewport(!0,!1));!1===this.getIframeWindow()&&(this.config._isCrossDomain=!0);"function"===typeof e&&this._enqueue(function(){e(a)});for(var b in this.config._playlist[0])if(this.config._playlist[0][b].type&&(-1<this.config._playlist[0][b].type.indexOf("/json")||-1<this.config._playlist[0][b].type.indexOf("/xml")))return this.setFile(this.config._playlist[0][b].src, this.config._playlist[0][b].type),this;this.setFile(this.config._playlist);return this};this._applyTheme=function(a){if(!1===a)return this._raiseError("The Projekktor theme-set specified could not be loaded."),!1;"string"==typeof a.css&&b("head").append('<style type="text/css">'+$p.utils.parseTemplate(a.css,{rp:a.baseURL})+"</style>");"string"==typeof a.html&&this.env.playerDom.html($p.utils.parseTemplate(a.html,{p:this.getNS()}));this.env.playerDom.addClass(a.id).addClass(a.variation);if("object"== typeof a.config){for(var c in a.config)null!=this.config["_"+c]?this.config["_"+c]=a.config[c]:this.config[c]=-1<c.indexOf("plugin_")?b.extend(!0,{},this.config[c],a.config[c]):a.config[c];if("object"==typeof a.config.plugins)for(c=0;c<a.config.plugins.length;c++)try{typeof eval("projekktor"+a.config.plugins[c])}catch(d){return this._raiseError("The applied theme requires the following Projekktor plugin(s): <b>"+a.config.plugins.join(", ")+"</b>"),!1}}a.onReady&&this._enqueue(function(){eval(a.onReady)}); return this._start()};return this._init()}var e=arguments[0],f=[];if(!arguments.length)return c[0]||null;if("number"==typeof e)return c[e];if("string"==typeof e){if("*"==e)return new a(c);for(var g=0;g<c.length;g++){try{if(c[g].getId()==e.id){f.push(c[g]);continue}}catch(h){}try{for(var j=0;j<b(e).length;j++)c[g].env.playerDom.get(0)==b(e).get(j)&&f.push(c[g])}catch(k){}try{if(c[g].getParent()==e){f.push(c[g]);continue}}catch(n){}try{c[g].getId()==e&&f.push(c[g])}catch(x){}}if(0<f.length)return 1== f.length?f[0]:new a(f)}if(0==f.length){var u=arguments[1]||{},p=arguments[2]||{};if("string"==typeof e){var l=0,r;b.each(b(e),function(){r=new d(b(this),u,p);c.push(r);l++});return 1<l?new a(c):r}if(e)return c.push(new d(e,u,p)),new a(c)}return null};$p.mmap=[];$p.models={};$p.newModel=function(a,c){var f=$p.models[c]&&void 0!=c?$p.models[c].prototype:{};if("object"!=typeof a||!a.modelId||$p.models[a.modelId])return!1;$p.models[a.modelId]=function(){};$p.models[a.modelId].prototype=b.extend({},f, a);for(f=0;f<a.iLove.length;f++)a.iLove[f].model=a.modelId.toLowerCase(),$p.mmap.push(a.iLove[f]);return!0}});var projekktorConfig=function(b){this._version=b}; jQuery(function(b){$p.utils={imageDummy:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi/v//PwNAgAEACQsDAUdpTjcAAAAASUVORK5CYII="},capitalise:function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},blockSelection:function(a){if(!a)return!1;b.browser.mozilla?a.css("MozUserSelect","none"):b.browser.msie?a.bind("selectstart",function(){return!1}):a.mousedown(function(){return!1});return a}, unique:function(a){for(var c=[],d=a.length;d--;){var e=a[d];-1===b.inArray(e,c)&&c.unshift(e)}return c},intersect:function(a,c){var d=[];b.each(a,function(e){try{-1<b.inArray(c,a[e])&&d.push(a[e])}catch(f){}try{-1<b.inArray(a[e],c)&&d.push(a[e])}catch(g){}});return d},roundNumber:function(a,b){return 0>=a||isNaN(a)?0:Math.round(a*Math.pow(10,b))/Math.pow(10,b)},randomId:function(a){for(var b="",d=0;d<a;d++)var e=Math.floor(25*Math.random()),b=b+"abcdefghiklmnopqrstuvwxyz".substring(e,e+1);return b}, toAbsoluteURL:function(a){var b=location,d,e;if(null==a||""==a)return"";if(/^\w+:/.test(a))return a;d=b.protocol+"//"+b.host;if(0==a.indexOf("/"))return d+a;b=b.pathname.replace(/\/[^\/]*$/,"");if(e=a.match(/\.\.\//g)){a=a.substring(3*e.length);for(e=e.length;e--;)b=b.substring(0,b.lastIndexOf("/"))}return d+b+"/"+a},strip:function(a){return a.replace(/^\s+|\s+$/g,"")},toSeconds:function(a){var b=0;if("string"!=typeof a)return a;if(a){a=a.split(":");for(i=0;i<a.length;i++)b=60*b+parseFloat(a[i].replace(",", "."))}return parseFloat(b)},toTimeString:function(a,b){var d=Math.floor(a/3600),e=a%3600,f=Math.floor(e/60),e=Math.floor(e%60);10>d&&(d="0"+d);10>f&&(f="0"+f);10>e&&(e="0"+e);return!0===b?d+":"+f:d+":"+f+":"+e},embeddFlash:function(a,c,d){var e=c.FlashVars||{},f="",g=f="",g="";c.src=-1==c.src.indexOf("?")?c.src+"?":c.src+"&";for(var h in e)"function"!=typeof e[h]&&(g=e[h],c.src+=h+"="+encodeURIComponent(g)+"&");c.src.replace(/&$/,"");f='<object id="'+c.id+'" codebase="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" name="'+ c.name+'" width="'+c.width+'" height="'+c.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+c.src+'"></param><param name="allowScriptAccess" value="'+c.allowScriptAccess+'"></param><param name="allowFullScreen" value="'+c.allowFullScreen+'"></param><param name="wmode" value="'+c.wmode+'"></param>';g="<embed ";for(h in c)"FLASHVARS"!==h.toUpperCase()&&"function"!=typeof c[h]&&(g+=h+'="'+c[h]+'" ');g+=' pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash"></embed>'; f=f+g+"</object>";if(b.browser.mozilla||b.browser.webkit||b.browser.opera)f=g;if(null===a)return f;a.get(0).innerHTML=f;!1!==d&&a.append(b("<div/>").attr("id",c.id+"_cc").css({width:"100%",height:"100%",backgroundColor:b.browser.msie&&9>jQuery.browser.version?"#000":"transparent",filter:"alpha(opacity = 0.1)",position:"absolute",top:0,left:0}));return b("#"+c.id)[0]},parseTemplate:function(a,b,d){if(void 0===b||0==b.length||"object"!=typeof b)return a;for(var e in b)a=a.replace(RegExp("%{"+e+"}", "gi"),!0===d?window.encodeURIComponent(b[e]):b[e]);return a=a.replace(/%{(.*?)}/gi,"")},stretch:function(a,c,d,e,f,g){if(null==c)return!1;!1==c instanceof b&&(c=b(c));null==c.data("od")&&c.data("od",{width:c.width(),height:c.height()});var f=void 0!==f?f:c.data("od").width,g=void 0!==g?g:c.data("od").height,h=d/f,j=e/g,k=d,n=e;switch(a){case "none":k=f;n=g;break;case "fill":h>j?(k=f*h,n=g*h):h<j&&(k=f*j,n=g*j);break;default:h>j?(k=f*j,n=g*j):h<j&&(k=f*h,n=g*h)}d=$p.utils.roundNumber(100*(k/d),0); e=$p.utils.roundNumber(100*(n/e),0);if(0==d||0==e)return!1;c.css({margin:0,padding:0,width:d+"%",height:e+"%",left:(100-d)/2+"%",top:(100-e)/2+"%"});return c.data("od").width!=c.width()||c.data("od").height!=c.height()?!0:!1},parseUri:function(a){for(var b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a), d={},e=14;e--;)d[b[e]]=a[e]||"";d.queryKey={};d[b[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,c){b&&(d.queryKey[b]=c)});return d},log:function(){!1!=this.logging&&(this.history=this.history||[],this.history.push(arguments),window.console&&console.log(Array.prototype.slice.call(arguments)))},cleanResponse:function(a,c){var d=!1;switch(c){case "html":case "xml":window.DOMParser?(d=new DOMParser,d=d.parseFromString(a,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a)); break;case "json":d=a;"string"==typeof d&&(d=b.parseJSON(d));break;case "jsonp":break;default:d=a}return d},logging:!1}});var projekktorPluginInterface=function(){}; jQuery(function(b){projekktorPluginInterface.prototype={pluginReady:!1,name:"",pp:{},config:{},playerDom:null,canvas:{media:null,projekktor:null},_appliedDOMObj:[],_init:function(a){this.config=b.extend(!0,this.config,a);this.initialize()},getConfig:function(a,c){var d=null,e=c||null;null!=this.pp.getConfig("plugin_"+this.name)&&(d=this.pp.getConfig("plugin_"+this.name)[a]);null==d&&(d=this.pp.getConfig(a));null==d&&(d=this.config[a]);"object"==typeof d&&null===d.length?d=b.extend(!0,{},d,this.config[a]): "object"==typeof d&&(d=b.extend(!0,[],d||[],this.config[a]||[]));return null==d?e:d},getDA:function(a){return"data-"+this.pp.getNS()+"-"+this.name+"-"+a},getCN:function(a){return this.pp.getNS()+a},sendEvent:function(a,b){this.pp._promote({_plugin:this.name,_event:a},b)},deconstruct:function(){this.pluginReady=!1;b.each(this._appliedDOMObj,function(){b(this).remove()})},applyToPlayer:function(a,b){var d=this.pp.getNS();if(!a)return null;if(0==this.playerDom.find("."+d+a.attr("class")).length){var e= a.attr("class");a.removeClass(e);a.addClass(d+e);!0===b?a.prependTo(this.playerDom):a.appendTo(this.playerDom);this._appliedDOMObj.push(a);return a}e=a.attr("class");a=this.playerDom.find("."+d+a.attr("class"));a.removeClass(e);a.addClass(d+e);return a},getElement:function(a){return this.pp.env.playerDom.find("."+this.pp.getNS()+a)},setActive:function(a,b){var d="object"==typeof a?a:this.getElement(a);!1!=b?d.addClass("active").removeClass("inactive"):d.addClass("inactive").removeClass("active"); d.css("display","");return d},initialize:function(){},isReady:function(){return this.pluginReady}}}); projekktorConfig.prototype={_cookieName:"qwprojaaekktor",_cookieExpiry:356,_plugins:["Display","Controlbar"],_addplugins:[],_reelParser:null,_ns:"pp",_platforms:["browser","android","ios","native","flash"],_iframe:!1,_ignoreAttributes:!1,_loop:!1,_autoplay:!1,_continuous:!0,_playlist:[],_theme:{id:"projekktor",baseURL:"./"},_themeRepo:!1,_messages:{"0":"An error occurred.",1:"You aborted the media playback. ",2:"A network error caused the media download to fail part-way. ",3:"The media playback was aborted due to a corruption problem. ", 4:"The media (%{title}) could not be loaded because the server or network failed.",5:"Sorry, your browser does not support the media format of the requested file.",6:"Your client is in lack of the Flash Plugin V%{flashver} or higher.",7:"No media scheduled.",8:"! Invalid media model configured !",9:"File (%{file}) not found.",10:"Invalid or missing quality settings for %{title}.",11:"Invalid streamType and/or streamServer settings for %{title}.",12:"Invalid or inconsistent quality setup for %{title}.", 80:"The requested file does not exist.",97:"No media scheduled.",98:"Invalid or malformed playlist data!",99:"Click display to proceed. ",100:"PLACEHOLDER",500:"This Youtube video has been removed or set to private",501:"The Youtube user owning this video disabled embedding.",502:"Invalid Youtube Video-Id specified."},_debug:!1,_width:0,_height:0,_minHeight:40,_minWidth:40,_keys:[],_enableNativePlatform:!0,_enableFlashPlatform:!0,_enableIosPlatform:!0,_enableBrowserPlatform:!0,_isCrossDomain:!1,ID:0, title:null,poster:!1,controls:!1,start:!1,stop:!1,volume:0.5,cover:"",disablePause:!1,disallowSkip:!1,fixedVolume:!1,imageScaling:"aspectratio",videoScaling:"aspectratio",playerFlashMP4:"jarisplayer.swf",playerFlashMP3:"jarisplayer.swf",streamType:"http",streamServer:"",useYTIframeAPI:!0,enableKeyboard:!0,enableFullscreen:!0,playbackQuality:"default",_playbackQualities:[{key:"small",minHeight:240,minWidth:240},{key:"medium",minHeight:360,minWidth:[{ratio:1.77,minWidth:640},{ratio:1.33,minWidth:480}]}, {key:"large",minHeight:480,minWidth:[{ratio:1.77,minWidth:853},{ratio:1.33,minWidth:640}]},{key:"hd1080",minHeight:1080,minWidth:[{ratio:1.77,minWidth:1920},{ratio:1.33,minWidth:1440}]},{key:"hd720",minHeight:720,minWidth:[{ratio:1.77,minWidth:1280},{ratio:1.33,minWidth:960}]},{key:"highres",minHeight:1081,minWidth:0}],enableTestcard:!0,skipTestcard:!1,duration:0,className:""}; jQuery(function(b){$p.newModel({modelId:"VIDEOFLASH",flashVersion:9,iLove:[{ext:"flv",type:"video/x-flv",platform:"flash",streamType:["http","pseudo","rtmp"],fixed:!0},{ext:"flv",type:"video/flv",platform:"flash",streamType:["http","pseudo","rtmp"],fixed:!0},{ext:"mp4",type:"video/mp4",platform:"flash",streamType:["http","pseudo","rtmp"],fixed:"maybe"},{ext:"mov",type:"video/quicktime",streamType:["http","pseudo","rtmp"],platform:"flash"},{ext:"m4v",type:"video/mp4",platform:"flash",streamType:["http", "pseudo","rtmp"],fixed:"maybe"},{ext:"f4m",type:"video/abst",platform:"flash",streamType:["httpVideoLive"]}],_eventMap:{onprogress:"progressListener",ontimeupdate:"timeListener",ondatainitialized:"metaDataListener",onconnectionsuccess:"startListener",onplaypause:"_playpauseListener",onplaybackfinished:"endedListener",onmute:"volumeListener",onvolumechange:"volumeListener",onbuffering:"waitingListener",onnotbuffering:"canplayListener",onconnectionfailed:"errorListener"},isPseudoStream:!1,allowRandomSeek:!1, flashVerifyMethod:"api_get",_jarisVolume:0,applyMedia:function(a){var c={id:this.pp.getMediaId()+"_flash",name:this.pp.getMediaId()+"_flash",src:this.pp.getConfig("playerFlashMP4"),width:"100%",height:"100%",allowScriptAccess:"always",allowFullScreen:"false",allowNetworking:"all",wmode:b.browser.msie?"transparent":"opaque",bgcolor:"#000000",FlashVars:{type:"video",streamtype:"rtmp"!=this.pp.getConfig("streamType")?"file":"rtmp",server:"rtmp"==this.pp.getConfig("streamType")?this.pp.getConfig("streamServer"): "",autostart:"false",hardwarescaling:"true",controls:"false",jsapi:"true",aspectratio:this.pp.getConfig("videoScaling")}};switch(this.pp.getConfig("streamType")){case "rtmp":this.allowRandomSeek=!0;this.media.loadProgress=100;break;case "pseudo":this.allowRandomSeek=this.isPseudoStream=!0,this.media.loadProgress=100}this.createFlash(c,a)},applySrc:function(){var a=this.getSource();this.mediaElement.api_source(a[0].src);this.seekedListener();this.getState("PLAYING")&&(this.setPlay(),!0!==this.isPseudoStream&& this.setSeek(this.media.position||0))},addListeners:function(){if(null!=this.mediaElement){var a=this;b.each(this._eventMap,function(b,d){a.mediaElement.api_addlistener(b,"projekktor('"+a.pp.getId()+"').playerModel."+d)})}},removeListeners:function(){try{this.mediaElement.api_removelistener("*")}catch(a){}},flashReadyListener:function(){this.applySrc();this.displayReady()},errorListener:function(){this.setTestcard(4)},volumeListener:function(a){this._jarisVolume!=a.volume&&(this._jarisVolume=a.volume, this.sendUpdate("volume",a.volume))},_playpauseListener:function(a){a.isplaying?(-1<this.getModelName().indexOf("AUDIO")&&this.setSeek(this.media.position),this.playingListener()):this.pauseListener()},metaDataListener:function(a){this.applyCommand("volume",this.pp.getConfig("volume"));try{this.mediaElement.api_seek(this.media.position||0)}catch(b){}this._setState("playing");if(-1<this.modelId.indexOf("AUDIO"))this.mediaElement.api_removelistener("ondatainitialized");else try{this.videoWidth=a.width, this.videoHeight=a.height,this.sendUpdate("scaled",{width:this.videoWidth,height:this.videoHeight})}catch(d){}},startListener:function(){this.applyCommand("volume",this.pp.getConfig("volume"));try{this.mediaElement.api_seek(this.media.position||0)}catch(a){}this._setState("playing")},setSeek:function(a){if(this.isPseudoStream)this.media.offset=a,this.timeListener({position:0}),this.applySrc();else{try{this.mediaElement.api_seek(a)}catch(b){}this.seekedListener();this.timeListener({position:a})}}, setVolume:function(a){this._volume=a;try{this.mediaElement.api_volume(a)}catch(b){return!1}return a},setPause:function(){try{this.mediaElement.api_pause()}catch(a){}},setPlay:function(){try{this.mediaElement.api_play()}catch(a){}},getVolume:function(){return this._jarisVolume},detachMedia:function(){try{b(this.mediaElement).remove()}catch(a){}}});$p.newModel({modelId:"AUDIOFLASH",iLove:[{ext:"mp3",type:"audio/mp3",platform:"flash",streamType:["http"]},{ext:"mp3",type:"audio/mpeg",platform:"flash", streamType:["http"]},{ext:"m4a",type:"audio/mp4",platform:"flash",streamType:["http"]}],applyMedia:function(a){$p.utils.blockSelection(a);this.imageElement=this.applyImage(this.pp.getConfig("cover")||this.pp.getConfig("poster"),a);a=b("#"+this.pp.getMediaId()+"_flash_container");0==a.length&&(a=b(document.createElement("div")).css({width:"1px",height:"1px"}).attr("id",this.pp.getMediaId()+"_flash_container").prependTo(this.pp.getDC()));var c={id:this.pp.getMediaId()+"_flash",name:this.pp.getMediaId()+ "_flash",src:this.pp.getConfig("playerFlashMP3"),width:"1px",height:"1px",allowScriptAccess:"always",allowFullScreen:"false",allowNetworking:"all",wmode:"transparent",bgcolor:"#000000",FlashVars:{type:"audio",streamtype:"file",server:"",autostart:"false",hardwarescaling:"false",controls:"false",jsapi:"true"}};this.createFlash(c,a,!1)}},"VIDEOFLASH")}); jQuery(function(b){$p.newModel({modelId:"VIDEO",androidVersion:2,iosVersion:3,nativeVersion:0,iLove:[{ext:"mp4",type:"video/mp4",platform:["ios","android","native"],streamType:["http","pseudo","httpVideo"],fixed:"maybe"},{ext:"ogv",type:"video/ogg",platform:"native",streamType:["http","httpVideo"]},{ext:"webm",type:"video/webm",platform:"native",streamType:["http","httpVideo"]},{ext:"ogg",type:"video/ogg",platform:"native",streamType:["http","httpVideo"]},{ext:"anx",type:"video/ogg",platform:"native", streamType:["http","httpVideo"]}],_eventMap:{pause:"pauseListener",play:"playingListener",volumechange:"volumeListener",progress:"progressListener",timeupdate:"timeListener",ended:"_ended",waiting:"waitingListener",canplaythrough:"canplayListener",canplay:"canplayListener",error:"errorListener",suspend:"suspendListener",seeked:"seekedListener",loadstart:null},allowRandomSeek:!1,videoWidth:0,videoHeight:0,wasPersistent:!0,isPseudoStream:!1,applyMedia:function(a){0==b("#"+this.pp.getMediaId()+"_html").length&& (this.wasPersistent=!1,a.html("").append(b("<video/>").attr({id:this.pp.getMediaId()+"_html",poster:this.pp.getIsMobileClient("ANDROID")?this.getPoster():$p.utils.imageDummy(),loop:!1,autoplay:!1,"x-webkit-airplay":"allow"}).prop({controls:this.hasGUI||this.pp.getIsMobileClient()&&0<this.pp.getItemIdx(),volume:this.getVolume()}).css({width:"100%",height:"100%",position:"absolute",top:0,left:0})));this.mediaElement=b("#"+this.pp.getMediaId()+"_html");this.applySrc()},applySrc:function(){var a=this; a.getState("PLAYING");var c=a.getState("AWAKENING");this.removeListener("error");this.removeListener("play");this.removeListener("loadstart");this.removeListener("canplay");this.mediaElement.find("source").remove();b.each(this.getSource(),function(){b("<source/>").appendTo(a.mediaElement).attr({src:this.src,type:this.type})});var d=function(){a.removeListener("canplay","qs");a.removeListener("loadstart","qs");a.addListeners("error");a.addListeners("play");a.addListeners("loadstart");a.addListeners("canplay"); a.mediaElement=b("#"+a.pp.getMediaId()+"_html");c?a.displayReady():a.getState("SEEKING")?(a._isPlaying&&a.setPlay(),a.seekedListener()):(a.isPseudoStream||a.setSeek(a.media.position||0),a._isPlaying&&a.setPlay())};b.browser.msie?this.mediaElement.bind("canplay.projekktorqs"+this.pp.getId(),d):this.mediaElement.bind("loadstart.projekktorqs"+this.pp.getId(),d);this.mediaElement[0].load()},detachMedia:function(){try{this.mediaElement[0].pause()}catch(a){}},addListeners:function(a,c){if(null!=this.mediaElement){var d= null!=c?".projekktor"+c+this.pp.getId():".projekktor"+this.pp.getId(),e=this,f=null==a?"*":a;b.each(this._eventMap,function(a,b){(a==f||"*"==f)&&null!=b&&e.mediaElement.bind(a+d,function(a){e[b](this,a)})})}},removeListener:function(a,c){if(null!=this.mediaElement){var d=null!=c?".projekktor"+c+this.pp.getId():".projekktor"+this.pp.getId(),e=this;b.each(this._eventMap,function(b){b==a&&e.mediaElement.unbind(b+d)})}},_ended:function(){var a=this.mediaElement[0].duration,b=Math.round(this.media.position)=== Math.round(a),a=2>a-this.media.maxpos&&0===this.media.position||!1;b||a||this.isPseudoStream?this.endedListener(this):this.pauseListener(this)},playingListener:function(){var a=this;(function(){try{if(""!=a.mediaElement[0].currentSrc&&a.mediaElement[0].networkState==a.mediaElement[0].NETWORK_NO_SOURCE&&0==a.getDuration())a.setTestcard(80);else if(0==a.getDuration())setTimeout(arguments.callee,500);else if(-1<a.media.type.indexOf("/ogg")||-1<a.media.type.indexOf("/webm"))a.allowRandomSeek=!0}catch(b){}})(); this._setState("playing")},errorListener:function(){try{switch(event.target.error.code){case event.target.error.MEDIA_ERR_ABORTED:this.setTestcard(1);break;case event.target.error.MEDIA_ERR_NETWORK:this.setTestcard(2);break;case event.target.error.MEDIA_ERR_DECODE:this.setTestcard(3);break;case event.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.setTestcard(4);break;default:this.setTestcard(5)}}catch(a){}},canplayListener:function(){var a=this;"pseudo"==this.pp.getConfig("streamType")&&b.each(this.media.file, function(){if(-1<this.src.indexOf(a.mediaElement[0].currentSrc)&&"video/mp4"==this.type)return a.isPseudoStream=!0,a.allowRandomSeek=!0,a.media.loadProgress=100,!1});this._setBufferState("full")},setPlay:function(){try{this.mediaElement[0].play()}catch(a){}},setPause:function(){try{this.mediaElement[0].pause()}catch(a){}},setVolume:function(a){this._volume=a;try{this.mediaElement.prop("volume",a)}catch(b){return!1}return a},setSeek:function(a){if(this.isPseudoStream)this.media.position=0,this.media.offset= a,this.timeListener(),this.applySrc();else{var b=this;(function(){try{b.mediaElement[0].currentTime=a,b.timeListener({position:a})}catch(d){null!=b.mediaElement&&setTimeout(arguments.callee,100)}})()}},setFullscreen:function(){"audio"!=this.element&&this._scaleVideo()},setResize:function(){"audio"!=this.element&&this._scaleVideo(!1)}});$p.newModel({modelId:"AUDIO",iLove:[{ext:"ogg",type:"audio/ogg",platform:"native",streamType:["http"]},{ext:"oga",type:"audio/ogg",platform:"native",streamType:["http"]}, {ext:"mp3",type:"audio/mp3",platform:["ios","android","native"],streamType:["http"]},{ext:"mp3",type:"audio/mpeg",platform:["ios","android","native"],streamType:["http"]}],imageElement:{},applyMedia:function(a){$p.utils.blockSelection(a);this.imageElement=this.applyImage(this.pp.getConfig("cover")||this.pp.getConfig("poster"),a);this.imageElement.css({border:"0px"});a=b("#"+this.pp.getMediaId()+"_audio_container");0==a.length&&(a=b(document.createElement("div")).css({width:"1px",height:"1px"}).attr("id", this.pp.getMediaId()+"_audio_container").prependTo(this.pp.getDC()));a.html("").append(b("<audio/>").attr({id:this.pp.getMediaId()+"_html",poster:$p.utils.imageDummy(),loop:!1,autoplay:!1,"x-webkit-airplay":"allow"}).prop({controls:!1,volume:this.getVolume()}).css({width:"1px",height:"1px",position:"absolute",top:0,left:0}));this.mediaElement=b("#"+this.pp.getMediaId()+"_html");this.applySrc()},setPosterLive:function(){if(this.imageElement.parent){var a=this.imageElement.parent(),c=this;this.imageElement.attr("src")!= c.pp.getConfig("poster")&&this.imageElement.fadeOut("fast",function(){b(this).remove();c.imageElement=c.applyImage(c.pp.getConfig("poster"),a)})}}},"VIDEO");$p.newModel({modelId:"VIDEOHLS",androidVersion:3,iosVersion:4,iLove:[{ext:"m3u8",type:"application/x-mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]},{ext:"m3u",type:"application/x-mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]},{ext:"ts",type:"video/MP2T",platforms:["ios", "android"],streamType:["http","httpVideo","httpVideoLive"]}]},"VIDEO")}); jQuery(function(b){$p.newModel({modelId:"IMAGE",iLove:[{ext:"jpg",type:"image/jpeg",platform:"browser",streamType:["http"]},{ext:"gif",type:"image/gif",platform:"browser",streamType:["http"]},{ext:"png",type:"image/png",platform:"browser",streamType:["http"]}],allowRandomSeek:!0,_position:0,_duration:0,applyMedia:function(a){this.mediaElement=this.applyImage(this.media.file[0].src,a.html(""));this._duration=this.pp.getConfig("duration");this._position=-1;this.displayReady();this._position=-0.5},setPlay:function(){var a= this;this._setBufferState("full");this.progressListener(100);this.playingListener();0==this._duration?a._setState("completed"):function(){a._position>=a._duration?a._setState("completed"):a.getState("PLAYING")&&(a.timeListener({duration:a._duration,position:a._position}),setTimeout(arguments.callee,500),a._position+=0.5)}()},detachMedia:function(){this.mediaElement.remove()},setPause:function(){this.pauseListener()},setSeek:function(a){a<this._duration&&(this._position=a)}});$p.newModel({modelId:"HTML", iLove:[{ext:"html",type:"text/html",platform:"browser",streamType:["http"]}],applyMedia:function(a){var c=this;this.mediaElement=b(document.createElement("iframe")).attr({id:this.pp.getMediaId()+"_iframe",name:this.pp.getMediaId()+"_iframe",src:this.media.file[0].src,scrolling:"no",frameborder:"0",width:"100%",height:"100%"}).css({overflow:"hidden",border:"0px",width:"100%",height:"100%"}).appendTo(a.html(""));this.mediaElement.load(function(){c.success()});this.mediaElement.error(function(){c.remove()}); this._duration=this.pp.getConfig("duration")},success:function(){this.displayReady()},remove:function(){this.mediaElement.remove()}},"IMAGE")}); jQuery(function(b){$p.newModel({modelId:"YTVIDEO",iLove:[{ext:"youtube.com",type:"video/youtube",platform:"flash",fixed:"maybe"}],allowRandomSeek:!0,useIframeAPI:!0,flashVerifyMethod:"cueVideoById",_ffFix:!1,_updateTimer:null,init:function(){var a=this;this.useIframeAPI=this.pp.getConfig("useYTIframeAPI")||this.pp.getIsMobileClient();this.hasGUI=this.pp.getIsMobileClient();this.useIframeAPI?(this.pp.getId(),!0!==window.ProjekktorYoutubePlayerAPIReady?(b.getScript("http://www.youtube.com/player_api"), function(){try{!0==window.ProjekktorYoutubePlayerAPIReady?a.ready():setTimeout(arguments.callee,50)}catch(b){setTimeout(arguments.callee,50)}}()):this.ready(),window.onYouTubePlayerAPIReady=function(){window.ProjekktorYoutubePlayerAPIReady=!0}):(this.requiresFlash=8,this.ready())},applyMedia:function(a){this._setBufferState("empty");var c=this,d="YTAUDIO"==this.modelId?1:"100%",e="YTAUDIO"==this.modelId?1:"100%";"YTAUDIO"==this.modelId&&(this.imageElement=this.applyImage(this.pp.getPoster(),a));if(this.useIframeAPI){a.html("").append(b("<div/>").attr("id", this.pp.getId()+"_media_youtube").css({width:"100%",height:"100%",position:"absolute",top:0,left:0}));var f=b("<div/>").attr("id",this.pp.getId()+"_media_youtube_cc").css({width:"100%",height:"100%",backgroundColor:b.browser.msie?"#000":"transparent",filter:"alpha(opacity = 0.1)",position:"absolute",top:0,left:0});a.append(f);this.mediaElement=new YT.Player(this.pp.getId()+"_media_youtube",{width:this.pp.getIsMobileClient()?this.pp.config._width:d,height:this.pp.getIsMobileClient()?this.pp.config._height: e,playerVars:{autoplay:0,disablekb:0,version:3,start:0,controls:this.pp.getIsMobileClient()?1:0,showinfo:0,enablejsapi:1,start:this.media.position||0,origin:window.location.href,wmode:"transparent",modestbranding:1},videoId:this.youtubeGetId(),events:{onReady:function(a){c.onReady(a)},onStateChange:function(a){c.stateChange(a)},onError:function(a){c.errorListener(a)}}})}else d={id:this.pp.getId()+"_media_youtube",name:this.pp.getId()+"_media_youtube",src:"http://www.youtube.com/apiplayer",width:this.pp.getIsMobileClient()? this.pp.config._width:d,height:this.pp.getIsMobileClient()?this.pp.config._height:e,bgcolor:"#000000",allowScriptAccess:"always",wmode:"transparent",FlashVars:{enablejsapi:1,autoplay:0,version:3,modestbranding:1,showinfo:0}},this.createFlash(d,a)},flashReadyListener:function(){this._youtubeResizeFix();this.addListeners();this.mediaElement.cueVideoById(this.youtubeGetId(),this.media.position||0,this._playbackQuality)},_youtubeResizeFix:function(){this.applyCommand("volume",this.pp.getConfig("volume"))}, addListeners:function(){this.mediaElement.addEventListener("onStateChange","projekktor('"+this.pp.getId()+"').playerModel.stateChange");this.mediaElement.addEventListener("onError","projekktor('"+this.pp.getId()+"').playerModel.errorListener");this.mediaElement.addEventListener("onPlaybackQualityChange","projekktor('"+this.pp.getId()+"').playerModel.qualityChangeListener")},setSeek:function(a){try{this.mediaElement.seekTo(a,!0),this.getState("PLAYING")||this.timeListener({position:this.mediaElement.getCurrentTime(), duration:this.mediaElement.getDuration()})}catch(b){}},setVolume:function(a){try{this.mediaElement.setVolume(100*a)}catch(b){}},setPause:function(){try{this.mediaElement.pauseVideo()}catch(a){}},setPlay:function(){try{this.mediaElement.playVideo()}catch(a){}},setQuality:function(a){try{this.mediaElement.setPlaybackQuality(a)}catch(b){}},getVolume:function(){try{return this.mediaElement.getVolume()}catch(a){}return 0},getPoster:function(){return this.media.config.poster||this.pp.config.poster||"http://img.youtube.com/vi/"+ this.youtubeGetId()+"/0.jpg"},getPlaybackQuality:function(){try{return this.mediaElement.getPlaybackQuality()}catch(a){return!1}},getSrc:function(){return this.youtubeGetId()||null},errorListener:function(a){switch(void 0==a.data?a:a.data){case 100:this.setTestcard(500);break;case 101:case 150:this.setTestcard(501);break;case 2:this.setTestcard(502)}},stateChange:function(a){clearTimeout(this._updateTimer);if(!(null===this.mediaElement||this.getState("COMPLETED")))switch(void 0==a.data?a:a.data){case -1:this.setPlay(); this.ffFix=!0;break;case 0:if(this.getState("AWAKENING"))break;this._setBufferState("full");this.endedListener({});break;case 1:this._setBufferState("full");if(0<(this.media.position||0)&&b.browser.mozilla&&this.ffFix)this.ffFix=!1,this.setSeek(this.media.position);this.playingListener({});this.canplayListener({});this.updateInfo();break;case 2:this.pauseListener({});break;case 3:this.waitingListener({});break;case 5:if(!0!==this.useIframeAPI)this.onReady()}},onReady:function(){this.setVolume(this.pp.getVolume()); b("#"+this.pp.getId()+"_media").attr("ALLOWTRANSPARENCY",!0).attr({scrolling:"no",frameborder:0}).css({overflow:"hidden",display:"block",border:"0"});if(this.media.title||this.pp.config.title||this.pp.getIsMobileClient())this.displayReady();else{var a=this;b.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+this.youtubeGetId()+"?v=2&alt=jsonc",async:!1,complete:function(c){try{data=c.responseText,"string"==typeof data&&(data=b.parseJSON(data)),data.data.title&&a.sendUpdate("config",{title:data.data.title+ " ("+data.data.uploader+")"})}catch(d){}a.displayReady()}})}},youtubeGetId:function(){return encodeURIComponent(this.media.file[0].src.replace(/^[^v]+v.(.{11}).*/,"$1"))},updateInfo:function(){var a=this;clearTimeout(this._updateTimer);(function(){if(null==a.mediaElement)clearTimeout(a._updateTimer);else try{a.getState("PLAYING")&&(a.timeListener({position:a.mediaElement.getCurrentTime(),duration:a.mediaElement.getDuration()}),a.progressListener({loaded:a.mediaElement.getVideoBytesLoaded(),total:a.mediaElement.getVideoBytesTotal()}), a._updateTimer=setTimeout(arguments.callee,500))}catch(b){}})()}});$p.newModel({modelId:"YTAUDIO",iLove:[{ext:"youtube.com",type:"audio/youtube",platform:"flash",fixed:"maybe"}]},"YTVIDEO")});var playerModel=function(){}; jQuery(function(b){playerModel.prototype={modelId:"player",iLove:[],_currentState:null,_currentBufferState:null,_ap:!1,_volume:0,_quality:"default",_displayReady:!1,_isPlaying:!1,_id:null,_KbPerSec:0,_bandWidthTimer:null,_isPoster:!1,_isFullscreen:!1,hasGUI:!1,allowRandomSeek:!1,flashVerifyMethod:"api_get",mediaElement:null,pp:{},media:{duration:0,position:0,maxpos:0,offset:0,file:!1,poster:"",ended:!1,loadProgress:0,errorCode:0},_init:function(a){this.pp=a.pp||null;this.media=b.extend(!0,{},this.media, a.media);this._ap=a.autoplay;this._id=$p.utils.randomId(8);this._quality=a.quality||this._quality;this._volume=this.pp.getVolume("volume");this._playbackQuality=this.pp.getPlaybackQuality();this.init()},init:function(){this.ready()},ready:function(){this.sendUpdate("modelReady");this._ap?this._setState("awakening"):this.displayItem(!1)},displayItem:function(a){!0!==a||this.getState("STOPPED")?(this._setState("idle"),this.applyImage(this.getPoster(),this.pp.getMediaContainer().html("")),this._isPoster= !0,this.displayReady()):(b("#"+this.pp.getMediaId()+"_image").remove(),this.hasGUI&&this.pp.env.playerDom.children().not("."+this.pp.getNS()+"display").addClass("inactive").removeClass("active"),this._isPoster=this._displayReady=!1,b("#"+this.pp.getId()+"_testcard_media").remove(),this.applyMedia(this.pp.getMediaContainer()))},applyMedia:function(){},sendUpdate:function(a,b){this.pp._modelUpdateListener(a,b)},displayReady:function(){this._displayReady=!0;this.pp._modelUpdateListener("displayReady")}, start:function(){var a=this;!(null==this.mediaElement&&"PLAYLIST"!=this.modelId)&&!this.getState("STARTING")&&(this._setState("STARTING"),this.getState("STOPPED")||this.addListeners(),this.pp.getIsMobileClient("ANDROID")&&!this.getState("PLAYING")&&setTimeout(function(){a.setPlay()},500),this.setPlay())},addListeners:function(){},removeListeners:function(){try{this.mediaElement.unbind(".projekktor"+this.pp.getId())}catch(a){}},detachMedia:function(){},destroy:function(){this.removeListeners();this._setState("destroying"); this.detachMedia();this.media.loadProgress=0;this.media.playProgress=0;this.media.position=0;this.media.duration=0},reInit:function(){!1!=this.flashVersion||(!b.browser.mozilla||this.getState("ERROR")||!0===this.pp.getConfig("bypassFlashFFFix"))||(this.sendUpdate("FFreinit"),this.removeListeners(),this.displayItem(!this.getState("IDLE")))},applyCommand:function(a,b){switch(a){case "quality":this.setQuality(b);break;case "play":if(this.getState("ERROR"))break;if(this.getState("IDLE")){this._setState("awakening"); break}this.setPlay();break;case "pause":if(this.getState("ERROR"))break;this.setPause();break;case "volume":if(this.getState("ERROR"))break;this.setVolume(b)||(this._volume=b,this.sendUpdate("volume",b));break;case "stop":this.setStop();break;case "seek":if(this.getState("ERROR"))break;if(this.getState("SEEKING"))break;if(this.getState("IDLE"))break;if(-1==this.media.loadProgress)break;this._setState("seeking");this.sendUpdate("seek",b);this.setSeek(b);break;case "fullscreen":if(b==this._isFullscreen)break; this._isFullscreen=b;this.sendUpdate("fullscreen",this._isFullscreen);this.setFullscreen(b);this.reInit();break;case "resize":this.setResize(),this.sendUpdate("resize",b)}},setSeek:function(){},setPlay:function(){},setPause:function(){},setStop:function(){this.detachMedia();this._setState("stopped");this.displayItem(!1)},setVolume:function(){},setFullscreen:function(){this.setResize()},setResize:function(){var a=this.pp.getMediaContainer();this.sendUpdate("scaled",{realWidth:this.videoWidth||null, realHeight:this.videoHeight||null,displayWidth:a.width(),displayHeight:a.height()})},setPosterLive:function(){},setQuality:function(a){this._quality!=a&&(this._quality=a,(this.getState("PLAYING")||this.getState("PAUSED"))&&this.applySrc(),this.qualityChangeListener())},applySrc:function(){},getSource:function(){var a=[],c=this.media.offset||this.pp.getConfig("start")||!1,d=this;b.each(this.media.file||[],function(){if(d._quality!=this.quality&&null!=d._quality)return!0;var e="pseudo"==d.pp.getConfig("streamType")? d.pp.getConfig("startParameter"):!1;if(!e||!c)return a.push(this),!0;var f=$p.utils.parseUri(this.src),g=f.protocol+"://"+f.host+f.path,h=[];b.each(f.queryKey,function(a,b){if(a==e)return!0;h.push(a+"="+b)});this.src=g+=0<h.length?"?"+h.join("&")+"&"+e+"="+c:"?"+e+"="+c;a.push(this);return!0});return 0==a.length?this.media.file:a},getVolume:function(){return null==this.mediaElement?this._volume:!0==this.mediaElement.prop("muted")?0:this.mediaElement.prop("volume")},getLoadProgress:function(){return this.media.loadProgress|| 0},getLoadPlaybackProgress:function(){return this.media.playProgress||0},getPosition:function(){return this.media.position||0},getDuration:function(){return this.media.duration||0},getMaxPosition:function(){return this.media.maxpos||0},getPlaybackQuality:function(){return-1<b.inArray(this._quality,this.media.qualities)?this._quality:"default"},getInFullscreen:function(){return this.pp.getInFullscreen()},getKbPerSec:function(){return this._KbPerSec},getState:function(a){var b=null==this._currentState? "IDLE":this._currentState;return null!=a?b==a.toUpperCase():b},getSrc:function(){try{return this.mediaElement[0].currentSrc}catch(a){}try{return this.media.file[0].src}catch(b){}try{return this.getPoster()}catch(d){}return null},getModelName:function(){return this.modelId||null},getHasGUI:function(){return this.hasGUI&&!this._isPoster},getIsReady:function(){return this._displayReady},getPoster:function(){return this.pp.getConfig("poster")},getMediaElement:function(){return this.mediaElement||b("<video/>")}, timeListener:function(a){if(null!=a){var b=parseFloat(a.position)||parseFloat(a.currentTime)||this.media.position||0,a=parseFloat(a.duration)||null;if(!isNaN(a+b)){if(null!=a&&a!=this.media.duration&&!this.isPseudoStream||this.isPseudoStream&&0==this.media.duration)this.media.duration=a,this.sendUpdate("durationChange",a);this.media.position=this.media.offset+b;this.media.maxpos=Math.max(this.media.maxpos||0,this.media.position||0);this.media.playProgress=parseFloat(0<this.media.position&&0<this.media.duration? 100*this.media.position/this.media.duration:0);this.sendUpdate("time",this.media.position);this.loadProgressUpdate()}}},loadProgressUpdate:function(){try{var a=this.mediaElement.get(0);if("object"===typeof a.buffered&&!(0>=typeof a.buffered.length)){var b=100*(Math.round(100*a.buffered.end(a.buffered.length-1))/100)/this.media.duration;b!=this.media.loadProgress&&(this.media.loadProgress=!0===this.allowRandomSeek?100:-1,this.media.loadProgress=100>this.media.loadProgress||void 0==this.media.loadProgress? b:100,this.sendUpdate("progress",this.media.loadProgress))}}catch(d){}},progressListener:function(a,b){try{if("object"==typeof this.mediaElement[0].buffered&&0<this.mediaElement[0].buffered.length){this.mediaElement.unbind("progress");return}}catch(d){}null==this._bandWidthTimer&&(this._bandWidthTimer=(new Date).getTime());var e=0,f=0;try{isNaN(b.loaded/b.total)?b.originalEvent&&!isNaN(b.originalEvent.loaded/b.originalEvent.total)&&(e=b.originalEvent.loaded,f=b.originalEvent.total):(e=b.loaded,f= b.total)}catch(g){a&&!isNaN(a.loaded/a.total)&&(e=a.loaded,f=a.total)}f=0<e&&0<f?100*e/f:0;Math.round(f)>Math.round(this.media.loadProgress)&&(this._KbPerSec=e/1024/(((new Date).getTime()-this._bandWidthTimer)/1E3));f=100!==this.media.loadProgress?f:100;f=!0===this.allowRandomSeek?100:f;this.media.loadProgress!=f&&(this.media.loadProgress=f,this.sendUpdate("progress",f));100<=this.media.loadProgress&&!1==this.allowRandomSeek&&this._setBufferState("full")},qualityChangeListener:function(){this.sendUpdate("qualityChange", this._quality)},endedListener:function(){null!==this.mediaElement&&(0>=this.media.maxpos||"STARTING"!=this.getState()&&this._setState("completed"))},waitingListener:function(){this._setBufferState("empty")},canplayListener:function(){this._setBufferState("full")},canplaythroughListener:function(){this._setBufferState("full")},suspendListener:function(){this._setBufferState("full")},playingListener:function(){this.getSrc();this._setState("playing")},startListener:function(){this.applyCommand("volume", this.pp.getConfig("volume"));this.isPseudoStream||this.setSeek(this.media.position||0);this._setState("playing")},pauseListener:function(){this._setState("paused")},seekedListener:function(){this._isPlaying?this._setState("PLAYING"):this._setState("PAUSED")},volumeListener:function(){this.sendUpdate("volume",this.getVolume())},flashReadyListener:function(){this._displayReady=!0},errorListener:function(){},metaDataListener:function(a){try{this.videoWidth=a.videoWidth,this.videoHeight=a.videoHeight}catch(b){}this._scaleVideo()}, setTestcard:function(a,c){var d=this.pp.getMediaContainer(),e=this.pp.getConfig("messages"),f=void 0!=e[a]?e[a]:e[0],f=void 0!=c&&""!=c?c:f;1<this.pp.getItemCount()&&(f+=e[99]);3>f.length&&(f="ERROR");100==a&&(f=c);f=$p.utils.parseTemplate(f,b.extend({},this.media,{title:this.pp.getConfig("title")}));d.html("").css({width:"100%",height:"100%"});this.mediaElement=b(document.createElement("div")).addClass(this.pp.getNS()+"testcard").attr("id",this.pp.getId()+"_testcard_media").appendTo(d);0<f.length&& b(document.createElement("p")).appendTo(this.mediaElement).html(f);this._setState("error")},applyImage:function(a,c){var d=b(document.createElement("img")).hide(),e=this;$p.utils.blockSelection(d);if(""==a||void 0==a)return b(document.createElement("span")).attr({id:this.pp.getMediaId()+"_image"}).appendTo(c);d.html("").appendTo(c).attr({id:this.pp.getMediaId()+"_image",src:a,alt:this.pp.getConfig("title")||""}).css({position:"absolute"});d.error(function(){b(this).remove()});var f=function(a){a.realWidth= a.prop("width");a.realHeight=a.prop("height");a.width=function(){return a.realWidth};a.height=function(){return a.realHeight}};b.browser.msie?function(){try{!0==d[0].complete?(d.show(),f(d),$p.utils.stretch(e.pp.getConfig("imageScaling"),d,c.width(),c.height())):setTimeout(arguments.callee,100)}catch(a){setTimeout(arguments.callee,100)}}():d.load(function(){d.show();f(d);$p.utils.stretch(e.pp.getConfig("imageScaling"),d,c.width(),c.height())});this.pp.addListener("fullscreen",function(){});this.pp.addListener("resize", function(){});return d},createFlash:function(a,b,d){this.mediaElement=$p.utils.embeddFlash(b.html(""),a,d);this._waitforPlayer()},_waitforPlayer:function(){if(!0!=this._displayReady){this._setBufferState("empty");var a=this,c=0;(function(){if(6<c&&b.browser.mozilla){c=0;var d=b(a.mediaElement).parent(),e=b(a.mediaElement).clone();d.html("").append(e);a.mediaElement=e.get(0)}d=a.mediaElement;if(!(-1<b(d).attr("id").indexOf("testcard"))){c++;try{void 0==d?setTimeout(arguments.callee,200):void 0==d[a.flashVerifyMethod]? setTimeout(arguments.callee,200):(a._setBufferState("full"),a.flashReadyListener())}catch(f){setTimeout(arguments.callee,200)}}})()}},_setState:function(a){var b=this,a=a.toUpperCase();if(this._currentState!=a){"PAUSED"==this._currentState&&"PLAYING"==a&&(this.sendUpdate("resume",this.media),this._isPlaying=!0);if(("IDLE"==this._currentState||"STARTING"==this._currentState)&&"PLAYING"==a)this.sendUpdate("start",this.media),this._isPlaying=!0;"PAUSED"==a&&(this._isPlaying=!1);"ERROR"==a&&(this.setPlay= function(){b.sendUpdate("start")});this._currentState=a.toUpperCase();this.sendUpdate("state",this._currentState)}},_setBufferState:function(a){this._currentBufferState!=a.toUpperCase()&&(this._currentBufferState=a.toUpperCase(),this.sendUpdate("buffer",this._currentBufferState))},_scaleVideo:function(){var a=this.pp.getMediaContainer();if(!this.pp.getIsMobileClient())try{var b=a.width(),d=a.height(),e=this.videoWidth,f=this.videoHeight;$p.utils.stretch(this.pp.getConfig("videoScaling"),this.mediaElement, b,d,e,f)&&this.sendUpdate("scaled",{realWidth:e,realHeight:f,displayWidth:b,displayHeight:d})}catch(g){}}}}); jQuery(function(){$p.newModel({modelId:"NA",iLove:[{ext:"NaN",type:"none/none",platform:"browser"}],hasGUI:!0,applyMedia:function(b){b.html("");var a=this;this.mouseClick=function(){a.pp.removeListener("leftclick",arguments.callee);a._setState("completed")};this.displayReady();this.pp.getConfig("skipTestcard")&&1<this.pp.getItemCount?a._setState("completed"):this.pp.getConfig("enableTestcard")&&!this.pp.getIsMobileClient()?(this.setTestcard(null!=this.media.file[0].src&&7===this.media.errorCode?5: this.media.errorCode),this.pp.addListener("leftclick",mouseClick)):(this.applyCommand("stop"),window.location.href=this.media.file[0].src)},detachMedia:function(){this.pp.removeListener("leftclick",this.mouseClick)}})}); jQuery(function(){$p.newModel({modelId:"PLAYLIST",iLove:[{ext:"json",type:"text/json",platform:"browser"},{ext:"jsonp",type:"text/jsonp",platform:"browser"},{ext:"xml",type:"text/xml",platform:"browser"},{ext:"json",type:"application/json",platform:"browser"},{ext:"jsonp",type:"application/jsonp",platform:"browser"},{ext:"xml",type:"application/xml",platform:"browser"}],applyMedia:function(){this.displayReady()},setPlay:function(){this.sendUpdate("playlist",this.media)}})}); var projekktorDisplay=function(){}; jQuery(function(b){projekktorDisplay.prototype={logo:null,logoIsFading:!1,display:null,displayClicks:0,buffIcn:null,buffIcnSprite:null,bufferDelayTimer:null,_controlsDims:null,config:{displayClick:{callback:"setPlayPause",value:null},displayPlayingClick:{callback:"setPlayPause",value:null},displayDblClick:{callback:null,value:null},staticControls:!1,bufferIconDelay:1E3,designMode:!1,spriteUrl:"",spriteWidth:50,spriteHeight:50,spriteTiles:25,spriteOffset:1,spriteCountUp:!1,logoImage:"",logoDelay:1, logoPosition:"tl",logoClick:!1},initialize:function(){this.display=this.applyToPlayer(b(document.createElement("div")).addClass("display"));this.buffIcn=this.applyToPlayer(b(document.createElement("div")).addClass("buffering")).addClass("inactive");""!=this.config.spriteUrl&&(this.buffIcnSprite=b(document.createElement("div")).appendTo(this.buffIcn).css({width:this.config.spriteWidth,height:this.config.spriteHeight,marginLeft:(this.buffIcn.width()-this.config.spriteWidth)/2+"px",marginTop:(this.buffIcn.height()- this.config.spriteHeight)/2+"px",backgroundColor:"transparent",backgroundImage:"url("+this.config.spriteUrl+")",backgroundRepeat:"no-repeat",backgroundPosition:"0 0"}).addClass("inactive"));this.startButton=this.applyToPlayer(b(document.createElement("div")).addClass("start")).addClass("inactive");this.pp.getMediaContainer();this.logo=this.applyToPlayer(b("<img/>").addClass("logo").addClass("inactive").attr("src",$p.utils.imageDummy()).css("position","absolute").css(-1<this.getConfig("logoPosition").indexOf("r")? "right":"left","2%").css(-1<this.getConfig("logoPosition").indexOf("t")?"top":"bottom","2%"));this.pluginReady=!0},displayReadyHandler:function(){var a=this;this.startButton.unbind().click(function(){a.pp.setPlay()});this.hideStartButton();this.getConfig("designMode")&&this.shofBufferIcon()},syncingHandler:function(){this.showBufferIcon();this.pp.getState("IDLE")&&this.hideStartButton()},readyHandler:function(){this.hideBufferIcon();this.pp.getState("IDLE")&&this.showStartButton()},bufferHandler:function(a){if(this.pp.getState("PLAYING")|| this.pp.getState("AWAKENING"))"EMPTY"==a?this.showBufferIcon():this.hideBufferIcon()},stateHandler:function(a){switch(a){case "STARTING":this.showBufferIcon();this.hideStartButton();break;case "PLAYING":this.hideBufferIcon();this.hideStartButton();break;case "IDLE":this.showStartButton();break;case "AWAKENING":this.hideStartButton();break;case "ERROR":this.logo.addClass("inactive").removeClass("active");this.hideBufferIcon();this.hideStartButton();break;case "COMPLETED":this.hideBufferIcon();break; default:this.hideStartButton()}},stoppedHandler:function(){this.hideBufferIcon()},scheduleLoadingHandler:function(){this.hideStartButton();this.showBufferIcon()},scheduledHandler:function(){this.getConfig("autoplay")||tthis.showStartButton();this.hideBufferIcon()},itemHandler:function(){this.logoIsFading=!1;this.logoImage=this.getConfig("logoImage");this.logo.stop(!0,!0).addClass("inactive").removeClass("active").attr("src",$p.utils.imageDummy()).unbind()},timeHandler:function(){if(!1!=this.logoImage&& !this.pp.getIsMobileClient("android")){var a=this.pp.getPosition(),c=this.pp.getDuration(),d=this;!this.logoIsFading&&a+this.config.logoDelay+1<c&&(a>this.config.logoDelay&&c>2*this.config.logoDelay)&&(this.logoIsFading=!0,this.logo.css({cursor:null!=this.getConfig("logoClick")?"pointer":"normal"}).unbind().bind("touchstart",function(){d._clickHandler("logo")}).error(function(){d.logoImage=!1;b(this).attr("src",$p.utils.imageDummy()).addClass("inactive").removeClass("active")}).load(function(){d.logo.fadeIn("slow", function(){b(this).addClass("active").removeClass("inactive");d.logoIsFading=!1})}).click(function(){d._clickHandler("logo")}).attr("src",this.logoImage));!this.logoIsFading&&a+this.config.logoDelay+1>c&&(this.logoIsFading=!0,this.logo.fadeOut("slow",function(){b(this).addClass("inactive").removeClass("active");d.logoIsFading=!1}))}},plugineventHandler:function(a){"controlbar"==a.PLUGIN&&("show"==a.EVENT&&this.getConfig("staticControls"))&&(a=100*a.height/this.pp.getDC().height(),this.display.height(100- a+"%").data("sc",!0))},leftclickHandler:function(a){var c=this;if(-1!=b(a.target).attr("id").indexOf("_media")){switch(this.pp.getState()){case "ERROR":this.pp.setActiveItem("next");return;case "IDLE":this.pp.setPlay();return}!0!=this.pp.getHasGUI()&&(this.displayClicks++,0<this.displayClicks&&setTimeout(function(){1==c.displayClicks?"PLAYING"==c.pp.getState()?c._clickHandler("displayPlaying"):c._clickHandler("display"):2==c.displayClicks&&c._clickHandler("displayDbl");c.displayClicks=0},250))}}, showStartButton:function(){this.startButton.addClass("active").removeClass("inactive")},hideStartButton:function(){this.startButton.addClass("inactive").removeClass("active")},hideBufferIcon:function(){this.getConfig("designMode")||(clearTimeout(this.bufferDelayTimer),this.buffIcn.stop(!0,!0),this.buffIcn.fadeOut("fast",function(){b(this).addClass("inactive").removeClass("active").css("display","")}))},showBufferIcon:function(a){var b=this;clearTimeout(this.bufferDelayTimer);if(!this.pp.getHasGUI()){if(("YTAUDIO"=== this.pp.getModel()||"YTVIDEO"===this.pp.getModel())&&!this.pp.getState("IDLE"))a=!0;!0!=a&&0<this.getConfig("bufferIconDelay")?this.bufferDelayTimer=setTimeout(function(){b.showBufferIcon(!0)},this.getConfig("bufferIconDelay")):(this.buffIcn.stop(!0,!0),this.buffIcn.hasClass("active")||this.buffIcn.fadeIn("fast",function(){if(null!=b.buffIcnSprite){var a=!0==b.config.spriteCountUp?0:(b.config.spriteHeight+b.config.spriteOffset)*(b.config.spriteTiles-1),e=a;b.buffIcnSprite.addClass("active").removeClass("inactive").css("display", "");(function(){if(b.buffIcn.is(":visible")){b.buffIcnSprite.css("backgroundPosition","0px -"+e+"px");e=!0==b.config.spriteCountUp?e+(b.config.spriteHeight+b.config.spriteOffset):e-(b.config.spriteHeight+b.config.spriteOffset);if(e>(a+b.config.spriteHeight)*b.config.spriteTiles||e<b.config.spriteOffset)e=a;setTimeout(arguments.callee,60)}})()}}))}},_clickHandler:function(a){try{this.pp[this.getConfig(a+"Click").callback](this.getConfig(a+"Click").value)}catch(b){try{this.getConfig(a+"Click")(this.getConfig(a+ "Click").value)}catch(d){}}return!1}}});var projekktorControlbar=function(){}; jQuery(function(b){projekktorControlbar.prototype={_cTimer:null,_noCHide:!1,_cFading:!1,_vSliderAct:!1,_storeVol:0,_timeTags:{},cb:null,_pos:{left:0,right:0},controlElements:{},controlElementsConfig:{cb:null,playhead:{on:null,call:null},loaded:null,scrubber:null,scrubberdrag:{on:["mousedown"],call:"scrubberdragStartDragListener"},play:{on:["touchstart","click"],call:"playClk"},pause:{on:["touchstart","click"],call:"pauseClk"},stop:{on:["touchstart","click"],call:"stopClk"},prev:{on:["touchstart", "click"],call:"prevClk"},next:{on:["touchstart","click"],call:"nextClk"},rewind:{on:["touchstart","click"],call:"rewindClk"},forward:{on:["touchstart","click"],call:"forwardClk"},fsexit:{on:["touchstart","click"],call:"exitFullscreenClk"},fsenter:{on:["touchstart","click"],call:"enterFullscreenClk"},loquality:{on:["touchstart","click"],call:"setQualityClk"},hiquality:{on:["touchstart","click"],call:"setQualityClk"},vslider:{on:["touchstart","click"],call:"vsliderClk"},vmarker:{on:["touchstart","click"], call:"vsliderClk"},vknob:{on:["mousedown"],call:"vknobStartDragListener"},mute:{on:["touchstart","click"],call:"muteClk"},unmute:{on:["touchstart","click"],call:"unmuteClk"},vmax:{on:["touchstart","click"],call:"vmaxClk"},open:{on:["touchstart","click"],call:"openCloseClk"},close:{on:["touchstart","click"],call:"openCloseClk"},loop:{on:["touchstart","click"],call:"loopClk"},draghandle:{on:["mousedown"],call:"handleStartDragListener"},controls:null,title:null,sec_dur:null,min_dur:null,hr_dur:null, sec_elp:null,min_elp:null,hr_elp:null,sec_rem:null,min_rem:null,hr_rem:null},config:{disableFade:!1,toggleMute:!1,showCuePoints:!1,fadeDelay:2500,showOnStart:!1,showOnIdle:!1,controlsTemplate:'<ul class="left"><li><div %{play}></div><div %{pause}></div></li><li><div %{title}></div></li></ul><ul class="right"><li><div %{fsexit}></div><div %{fsenter}></div></li><li><div %{vmax}></div></li><li><div %{vslider}><div %{vmarker}></div><div %{vknob}></div></div></li><li><div %{mute}></div></li><li><div %{timeleft}>%{hr_elp}:%{min_elp}:%{sec_elp} | %{hr_dur}:%{min_dur}:%{sec_dur}</div></li><li><div %{next}></div></li><li><div %{prev}></div></li></ul><ul class="bottom"><li><div %{scrubber}><div %{loaded}></div><div %{playhead}></div><div %{scrubberdrag}></div></div></li></ul>'}, initialize:function(){var a=this.playerDom.html(),c=!0,d=this.pp.getNS(),e;for(e in this.controlElementsConfig)if(a.match(RegExp(d+e,"gi"))){c=!1;break}c?(this.cb=this.applyToPlayer(b(document.createElement("div")).addClass("controls")),this.applyTemplate(this.cb,this.getConfig("controlsTemplate"))):this.cb=this.playerDom.find("."+d+"controls");for(e in this.controlElementsConfig)this.controlElements[e]=b(this.playerDom).find("."+d+e),$p.utils.blockSelection(this.controlElements[e]);this.addGuiListeners(); this._storeVol=this.getConfig("volume");this.updateDisplay();this.hidecb(!0);this.pluginReady=!0},applyTemplate:function(a,c){var d=this.pp.getNS();if(c){var e=c.match(/\%{[a-zA-Z_]*\}/gi);null!=e&&b.each(e,function(a,b){var e=b.replace(/\%{|}/gi,"");c=b.match(/\_/gi)?c.replace(b,'<span class="'+d+e+'"></span>'):c.replace(b,'class="'+d+e+'"')});a.html(c)}},itemHandler:function(){b(this.cb).find("."+this.pp.getNS()+"cuepoint").remove();this.pluginReady=!0;this.hidecb(!0);this.drawTitle();this.displayQualityToggle()}, startHandler:function(){!0==this.getConfig("showOnStart")?this.showcb(!0):this.hidecb(!0)},readyHandler:function(){clearTimeout(this._cTimer);this.cb.removeClass("fade");this.getConfig("showOnIdle")&&this.showcb(!0);this.getConfig("disableFade")?this.sendEvent("show",{width:this.cb.width(),height:this.cb.height()}):this.cb.addClass("fade");this.pluginReady=!0},durationChangeHandler:function(a){this.sendEvent("show",{width:this.cb.width(),height:this.cb.height()});this.displayCuePoints(a)},updateDisplay:function(){var a= this.pp.getState();if(!this.pp.getHasGUI())if(!1==this.getConfig("controls"))this.hidecb(!0);else{2>this.pp.getItemCount()||this.getConfig("disallowSkip")?(this._active("prev",!1),this._active("next",!1)):(this._active("prev",!0),this._active("next",!0));1>this.pp.getItemIdx()&&this._active("prev",!1);this.pp.getItemIdx()>=this.pp.getItemCount()-1&&this._active("next",!1);this.getConfig("disablePause")?(this._active("play",!1),this._active("pause",!1)):("PLAYING"===a&&this.drawPauseButton(),"PAUSED"=== a&&this.drawPlayButton(),"IDLE"===a&&this.drawPlayButton());this._active("stop","IDLE"!==a);this._active("forward","IDLE"!==a);this._active("rewind","IDLE"!==a);!0===this.pp.getInFullscreen()?this.drawExitFullscreenButton():this.drawEnterFullscreenButton();if(!this.getConfig("enableFullscreen")||this.getConfig("isCrossDomain"))this._active("fsexit",!1),this._active("fsenter",!1);this._active("loop",this.pp.getConfig("loop"));this.displayQualityToggle();this.displayTime();this.displayVolume(this.pp.getVolume()|| this._storeVol)}},stateHandler:function(a){this.updateDisplay();-1<"STOPPED|DONE|IDLE".indexOf(a)?(this._noCHide=!1,this.hidecb(!0)):-1<"STOPPED|AWAKENING|IDLE|DONE".indexOf(a)?(this.displayTime(0,0,0),this.displayProgress(0)):this.displayProgress()},scheduleModifiedHandler:function(){"IDLE"!==this.pp.getState()&&(this.updateDisplay(),this.displayTime(),this.displayProgress())},volumeHandler:function(a){this.displayVolume(a)},progressHandler:function(){this.displayProgress()},timeHandler:function(){this.displayTime(); this.displayProgress()},qualityChangeHandler:function(a){this.displayQualityToggle(a)},fullscreenHandler:function(a){var b=this;this.pp.getNS();clearTimeout(this._cTimer);this._vSliderAct=this._cFading=this._noCHide=!1;this.getConfig("controls")&&(this.getConfig("enableFullscreen")&&!this.getConfig("isCrossDomain"))&&(a?(this.cb.addClass("fullscreen"),this.drawExitFullscreenButton()):(this.cb.removeClass("fullscreen"),this.drawEnterFullscreenButton()),"IDLE"==this.pp.getState()&&!this.getConfig("showOnIdle")? this.hidecb(!0):this._cTimer=setTimeout(function(){b.hidecb()},this.getConfig("fadeDelay")),this.getConfig("disableFade")&&this.sendEvent("show",{width:this.cb.width(),height:this.cb.height()}))},scaledHandler:function(){this.getConfig("disableFade")&&this.sendEvent("show",{width:this.cb.width(),height:this.cb.height()})},addGuiListeners:function(){var a=this;b.each(this.controlElementsConfig,function(c,d){if(!d||null==d.on)return!0;b.each(d.on,function(b,f){var g="on"+f in window.document;g||(g= document.createElement("div"),g.setAttribute("on"+f,"return;"),g="function"==typeof g["on"+f]);if(g)return a.controlElements[c].bind(f,function(b){a.clickCatcher(b,d.call,a.controlElements[c])}),!1})});this.cb.mouseenter(function(b){a.controlsMouseEnterListener(b)});this.cb.mouseleave(function(b){a.controlsMouseLeaveListener(b)})},clickCatcher:function(a,c,d){b.browser.msie?a.cancelBubble=!0:(a.stopPropagation(),a.preventDefault());this[c](a,d);return!1},drawTitle:function(){this.controlElements.title.html(this.getConfig("title", ""))},hidecb:function(a){clearTimeout(this._cTimer);this.pp.getNS();var c=this;null!=this.cb&&(this.cb.stop(!0,!0),!this.getConfig("disableFade")&&(!this._noCHide&&this.cb.is(":visible"))&&(!0===a?(this._cFading=!1,this.cb.removeClass("active").addClass("inactive").css("display","")):!1==this.getConfig("controls")||!this.cb.hasClass("fade")?this.cb.removeClass("active").addClass("inactive"):this.cb.fadeOut("slow",function(){b(this).removeClass("active").addClass("inactive").css("display","");c._cFading= !1})))},showcb:function(a){clearTimeout(this._cTimer);if(this.pp.getHasGUI()||!1==this.getConfig("controls"))this.cb.removeClass("active").addClass("inactive").css("display","");else{var c=this;this.pp.getNS();null!=this.cb&&!(-1<"IDLE|AWAKENING|ERROR".indexOf(this.pp.getState())&&!0!=a)&&(this.cb.stop(!0,!0),!this.cb.hasClass("fade")||!0==a?this.cb.removeClass("inactive").addClass("active").css("display",""):this.cb.is(":visible")||!0==this._cFading?this._cTimer=setTimeout(function(){c.hidecb()}, this.getConfig("fadeDelay")):(this._cFading=!0,this.cb.fadeIn("slow",function(){c._cFading=!1;b(this).removeClass("inactive").addClass("active").css("display","")})))}},displayTime:function(a,c,d){if(!this.pp.getHasGUI()){try{var e=void 0!=a?a:this.pp.getLoadPlaybackProgress(),f=void 0!=c?c:this.pp.getDuration(),g=void 0!=d?d:this.pp.getPosition()}catch(h){e=a||0,f=c||0,g=d||0}this.controlElements.playhead.data("pct",e).css({width:e+"%"});var j=b.extend({},this._clockDigits(f,"dur"),this._clockDigits(g, "elp"),this._clockDigits(f-g,"rem"));b.each(this.controlElements,function(a,c){j[a]&&b.each(c,function(){b(this).html(j[a])})})}},displayProgress:function(){this.controlElements.loaded.css("width",this.pp.getLoadProgress()+"%")},displayVolume:function(a){if(!0!=this._vSliderAct&&null!=a){var b=this.cb.is(":visible"),d=this.getConfig("fixedVolume"),e=this.controlElements.mute.hasClass("toggle")||this.controlElements.unmute.hasClass("toggle")||this.getConfig("toggleMute");this._active("mute",!d);this._active("unmute", !d);this._active("vmax",!d);this._active("vknob",!d);this._active("vmarker",!d);this._active("vslider",!d);this.controlElements.vmarker.css("width",100*a+"%");this.controlElements.vknob.css("left",100*a+"%");if(e)switch(parseFloat(a)){case 0:this._active("mute",!1);this._active("unmute",!0);this._active("vmax",!0);break;default:this._active("mute",!0),this._active("unmute",!1),this._active("vmax",!1)}b&&this.cb.fadeTo(1,0.99).fadeTo(1,1)}},displayCuePoints:function(a){var c=this,d=this.pp.getNS(); this.getConfig("showCuePoints")&&(c.controlElements.scrubber.remove("."+d+"cuepoint"),b.each(this.pp.getCuePoints()||[],function(){var e=Math.max(100/a,Math.round(a/100),1),f=100*this.on/a-100*(e/2)/a,g=b(document.createElement("div")).addClass(d+"cuepoint").addClass("inactive").css("left",f+"%").css("width",e+"%").data("on",this.on);""!=this.title&&g.attr("title",this.title);this.addListener("unlock",function(){b(g).removeClass("inactive").addClass("active");g.click(function(){c.pp.setPlayhead(g.data("on"))})}); c.controlElements.scrubber.append(g)}))},drawPauseButton:function(){this._active("pause",!0);this._active("play",!1)},drawPlayButton:function(){this._active("pause",!1);this._active("play",!0)},drawEnterFullscreenButton:function(){this._active("fsexit",!1);this._active("fsenter",!0)},drawExitFullscreenButton:function(){this._active("fsexit",!0);this._active("fsenter",!1)},displayQualityToggle:function(){var a=this.getConfig("playbackQualities"),c=this.pp.getPlaybackQualities(),d=this.pp.getNS();best= [];if(2>c.length||2>a.length)this._active("loquality",!1).removeClass().addClass(d+"loquality").data("qual",""),this._active("hiquality",!1).removeClass().addClass(d+"hiquality").data("qual","");else{a.sort(function(a,b){return a.minHeight-b.minHeight});for(d=a.length;d--&&!(-1<b.inArray(a[d].key,c)&&best.push(a[d].key),1<best.length);0<d);best[0]==this.pp.getPlaybackQuality()?(this._active("loquality",!0).addClass("qual"+best[1]).data("qual",best[1]),this._active("hiquality",!1).addClass("qual"+ best[0]).data("qual",best[0])):(this._active("loquality",!1).addClass("qual"+best[1]).data("qual",best[1]),this._active("hiquality",!0).addClass("qual"+best[0]).data("qual",best[0]))}},setQualityClk:function(a){this.pp.setPlaybackQuality(b(a.target).data("qual"))},playClk:function(){this.pp.setPlay()},pauseClk:function(){this.pp.setPause()},stopClk:function(){this.pp.setStop()},controlsMouseEnterListener:function(){this._noCHide=!0},controlsMouseLeaveListener:function(){this._noCHide=!1},controlsClk:function(){}, leftclickHandler:function(){this.mouseleaveHandler()},mousemoveHandler:function(){this.pp.getState("STARTING")||(clearTimeout(this._cTimer),this.showcb())},mouseleaveHandler:function(){var a=this;clearTimeout(this._cTimer);this._noCHide=!1;this._cTimer=setTimeout(function(){a.hidecb()},this.getConfig("fadeDelay"))},prevClk:function(){this.pp.setActiveItem("previous")},nextClk:function(){this.pp.setActiveItem("next")},forwardClk:function(){this.pp.setPlayhead("+10")},rewindClk:function(){this.pp.setPlayhead("-10")}, muteClk:function(){this._storeVol=0==this.pp.getVolume()?this.getConfig("volume"):this.pp.getVolume();this.pp.setVolume(0)},unmuteClk:function(){0>=this._storeVol&&(this._storeVol=1);this.pp.setVolume(this._storeVol)},vmaxClk:function(){this.pp.setVolume(1)},enterFullscreenClk:function(){this.pp.setFullscreen(!0)},exitFullscreenClk:function(){this.pp.setFullscreen(!1)},openCloseClk:function(a){var c=this;b(b(a.currentTarget).attr("class").split(/\s+/)).each(function(a,b){-1!=b.indexOf("toggle")&& (c.playerDom.find("."+b.substring(6)).slideToggle("slow",function(){c.pp.setResize()}),c.controlElements.open.toggle(),c.controlElements.close.toggle())})},loopClk:function(a){this.pp.setLoop(b(a.currentTarget).hasClass("inactive")||!1);this.updateDisplay()},startClk:function(){this.pp.setPlay()},vmarkerClk:function(a){vsliderClk(a)},vsliderClk:function(a){if(!0!=this._vSliderAct){var c=!0===this.pp.getInFullscreen()&&1<this.controlElements.vslider.length?1:0,d=b(this.controlElements.vslider[c]), c=d.width(),a=(a.originalEvent.touches?a.originalEvent.touches[0].pageX:a.originalEvent.pageX)-d.offset().left;result=0>a||"NaN"==a||void 0==a?0:a/c;this.pp.setVolume(result);this._storeVol=result}},scrubberdragStartDragListener:function(a){if(!0!=this.getConfig("disallowSkip")){this._sSliderAct=!0;var c=this,d=!0===this.pp.getInFullscreen()&&1<this.controlElements.scrubber.length?1:0,e=b(this.controlElements.scrubberdrag[d]),f=b(this.controlElements.loaded[d]),g=0;Math.abs(parseInt(e.offset().left)- a.clientX);var h=function(a){a=Math.abs(e.offset().left-a.clientX);a=a>e.width()?e.width():a;a=a>f.width()?f.width():a;a=Math.abs((0>a?0:a)/e.width())*c.pp.getDuration();0<a&&a!=g&&(g=a,c.pp.setPlayhead(g))},j=function(a){b.browser.msie?a.cancelBubble=!0:a.stopPropagation();c.playerDom.unbind("mouseup.slider");e.unbind("mousemove",k);e.unbind("mouseup",j);return c._sSliderAct=!1},k=function(a){clearTimeout(c._cTimer);b.browser.msie?a.cancelBubble=!0:a.stopPropagation();h(a);return!1};this.playerDom.bind("mouseup.slider", j);e.mouseup(j);e.mousemove(k);h(a)}},vknobStartDragListener:function(a,c){this._vSliderAct=!0;var d=this,e=!0===this.pp.getInFullscreen()&&1<this.controlElements.vslider.length?1:0,f=b(c[e]),g=b(this.controlElements.vslider[e]),g=b(this.controlElements.vslider[e]),h=Math.abs(parseInt(f.position().left)-a.clientX),j=0,k=function(){d.playerDom.unbind("mouseup",k);g.unbind("mousemove",n);g.unbind("mouseup",k);f.unbind("mousemove",n);f.unbind("mouseup",k);return d._vSliderAct=!1},n=function(a){clearTimeout(d._cTimer); a=a.clientX-h;a=a>g.width()-f.width()/2?g.width()-f.width()/2:a;a=0>a?0:a;f.css("left",a+"px");j=Math.abs(a/(g.width()-f.width()/2));d.pp.setVolume(j);d._storeVol=j;b(d.controlElements.vmarker[e]).css("width",100*j+"%");return!1};this.playerDom.mouseup(k);g.mousemove(n);g.mouseup(k);f.mousemove(n);f.mouseup(k)},handleStartDragListener:function(a){var c=this,d=Math.abs(parseInt(this.cb.position().left)-a.clientX),e=Math.abs(parseInt(this.cb.position().top)-a.clientY),f=function(a){b.browser.msie?a.cancelBubble= !0:a.stopPropagation();c.playerDom.unbind("mouseup",f);c.playerDom.unbind("mouseout",f);c.playerDom.unbind("mousemove",g);return!1},g=function(a){b.browser.msie?a.cancelBubble=!0:a.stopPropagation();clearTimeout(c._cTimer);var f=a.clientX-d,f=f>c.playerDom.width()-c.cb.width()?c.playerDom.width()-c.cb.width():f;c.cb.css("left",(0>f?0:f)+"px");a=a.clientY-e;a=a>c.playerDom.height()-c.cb.height()?c.playerDom.height()-c.cb.height():a;c.cb.css("top",(0>a?0:a)+"px");return!1};this.playerDom.mousemove(g); this.playerDom.mouseup(f)},errorHandler:function(){this.hidecb(!0)},_active:function(a,b){var d=this.controlElements[a];!0==b?d.addClass("active").removeClass("inactive"):d.addClass("inactive").removeClass("active");return d},_clockDigits:function(a,b){if(0>a||isNaN(a)||void 0==a)a=0;var d=Math.floor(a/3600),e=a%3600,f=Math.floor(e/60),e=Math.floor(e%60),g={};g["min_"+b]=10>f?"0"+f:f;g["sec_"+b]=10>e?"0"+e:e;g["hr_"+b]=10>d?"0"+d:d;return g}}}); (function(b){var a=jQuery.browser.msie&&7>parseInt(jQuery.browser.version,10)&&4<parseInt(jQuery.browser.version,10);void 0===b.proxy&&b.extend({proxy:function(a,b){a&&(proxy=function(){return a.apply(b||this,arguments)});return proxy}});b.extend(jQuery.easing,{easeOutBack:function(a,b,e,f,g,h){void 0==h&&(h=1.70158);return f*((b=b/g-1)*b*((h+1)*b+h)+1)+e}});b.extend(b.expr[":"],{value:function(a){return b(a).val()}});b.extend({MsgBoxObject:{defaults:{name:"jquery-msgbox",zIndex:1E4,width:420,height:"auto", background:"#FFFFFF",modal:!0,overlay:{"background-color":"#000000",opacity:0.5},showDuration:200,closeDuration:100,moveDuration:500,shake:{distance:10,duration:100,transition:"easeOutBack",loops:2},form:{active:!1,action:"#",method:"post"},emergefrom:"top"},options:{},esqueleto:{msgbox:[],wrapper:[],form:[],buttons:[],inputs:[]},visible:!1,i:0,animation:!1,config:function(a){this.options=b.extend(!0,this.options,a);this.overlay.element.css(this.options.overlay);this.overlay.options.hideOnClick=!this.options.modal; this.esqueleto.msgbox.css({width:this.options.width,height:this.options.height,"background-color":this.options.background});this.moveBox()},overlay:{create:function(a){this.options=a;this.element=b('<div id="'+(new Date).getTime()+'"></div>');this.element.css(b.extend({},{position:"fixed",top:0,left:0,opacity:0,display:"none","z-index":this.options.zIndex},this.options.style));this.element.click(b.proxy(function(a){this.options.hideOnClick&&(b.isFunction(this.options.callback)?this.options.callback(): this.hide());a.preventDefault()},this));this.hidden=!0;this.inject();return this},inject:function(){this.target=b(document.body);this.target.append(this.element);if(a){this.element.css({position:"absolute"});var c=parseInt(this.element.css("zIndex"));if(!c){var c=1,d=this.element.css("position");("static"==d||!d)&&this.element.css({position:"relative"});this.element.css({zIndex:c})}c=(this.options.zIndex||0===this.options.zIndex)&&c>this.options.zIndex?this.options.zIndex:c-1;0>c&&(c=1);this.shim= b('<iframe id="IF_'+(new Date).getTime()+'" scrolling="no" frameborder=0 src=""></div>');this.shim.css({zIndex:c,position:"absolute",top:0,left:0,border:"none",width:0,height:0,opacity:0});this.shim.insertAfter(this.element);b("html, body").css({height:"100%",width:"100%","margin-left":0,"margin-right":0})}},resize:function(a,d){this.element.css({height:0,width:0});this.shim&&this.shim.css({height:0,width:0});b(document).width();var e=b(document).height();this.element.css({width:"100%",height:d?d: e});this.shim&&(this.shim.css({height:0,width:0}),this.shim.css({position:"absolute",left:0,top:0,width:this.element.width(),height:d?d:e}));return this},show:function(){if(!this.hidden)return this;this.transition&&this.transition.stop();this.target.bind("resize",b.proxy(this.resize,this));this.resize();this.shim&&this.shim.css({display:"block"});this.hidden=!1;this.transition=this.element.fadeIn(this.options.showDuration,b.proxy(function(){this.element.trigger("show")},this));return this},hide:function(){if(this.hidden)return this; this.transition&&this.transition.stop();this.target.unbind("resize");this.shim&&this.shim.css({display:"none"});this.hidden=!0;this.transition=this.element.fadeOut(this.options.closeDuration,b.proxy(function(){this.element.trigger("hide");this.element.css({height:0,width:0})},this));return this}},create:function(){this.options=b.extend(!0,this.defaults,this.options);this.overlay.create({style:this.options.overlay,hideOnClick:!this.options.modal,zIndex:this.options.zIndex-1,showDuration:this.options.showDuration, closeDuration:this.options.closeDuration});this.esqueleto.msgbox=b('<div class="'+this.options.name+'"></div>');this.esqueleto.msgbox.css({display:"none",position:"absolute",top:0,left:0,width:this.options.width,height:this.options.height,"z-index":this.options.zIndex,"word-wrap":"break-word","-moz-box-shadow":"0 0 15px rgba(0, 0, 0, 0.5)","-webkit-box-shadow":"0 0 15px rgba(0, 0, 0, 0.5)","box-shadow":"0 0 15px rgba(0, 0, 0, 0.5)","-moz-border-radius":"6px","-webkit-border-radius":"6px","border-radius":"6px", "background-color":this.options.background});this.esqueleto.wrapper=b('<div class="'+this.options.name+'-wrapper"></div>');this.esqueleto.msgbox.append(this.esqueleto.wrapper);this.esqueleto.form=b('<form action="'+this.options.formaction+'" method="post"></form>');this.esqueleto.wrapper.append(this.esqueleto.form);this.esqueleto.wrapper.css({height:a?80:"auto","min-height":80,zoom:1});b("body").append(this.esqueleto.msgbox);this.addevents();return this.esqueleto.msgbox},addevents:function(){b(window).bind("resize", b.proxy(function(){this.visible&&(this.overlay.resize(),this.moveBox())},this));b(window).bind("scroll",b.proxy(function(){this.visible&&this.moveBox()},this));this.esqueleto.msgbox.bind("keydown",b.proxy(function(a){27==a.keyCode&&this.close(!1)},this));this.esqueleto.form.bind("submit",b.proxy(function(a){b("input[type=submit]:first, button[type=submit]:first, button:first",this.esqueleto.form).trigger("click");options.form.active||a.preventDefault()},this));this.overlay.element.bind("show",b.proxy(function(){b(this).triggerHandler("show")}, this));this.overlay.element.bind("hide",b.proxy(function(){b(this).triggerHandler("close")},this))},show:function(a,d,e){var f=["alert","info","error","prompt","confirm"];this.esqueleto.msgbox.queue(this.options.name,b.proxy(function(){d=b.extend(!0,{type:"alert",form:{active:!1}},d||{});var g="undefined"===typeof d.buttons?"confirm"==d.type||"prompt"==d.type?[{type:"submit",value:"Accept"},{type:"cancel",value:"Cancel"}]:[{type:"submit",value:"Accept"}]:d.buttons,h="undefined"===typeof d.inputs&& "prompt"==d.type?[{type:"text",name:"prompt",value:""}]:d.inputs;this.callback=b.isFunction(e)?e:function(){};"undefined"!==typeof h&&(this.esqueleto.inputs=b('<div class="'+this.options.name+'-inputs"></div>'),this.esqueleto.form.append(this.esqueleto.inputs),b.each(h,b.proxy(function(a,c){"checkbox"==c.type?(iLabel=c.label?'<label class="'+this.options.name+'-label">':"",fLabel=c.label?c.label+"</label>":"",c.value=void 0===c.value?"1":c.value,iName=void 0===c.name?this.options.name+"-label-"+a: c.name,this.esqueleto.inputs.append(b(iLabel+'<input type="'+c.type+'" style="display:inline; width:auto;" name="'+iName+'" value="'+c.value+'" autocomplete="off"/> '+fLabel))):(iLabel=c.label?'<label class="'+this.options.name+'-label">'+c.label:"",fLabel=c.label?"</label>":"",c.value=void 0===c.value?"":c.value,iRequired=void 0===c.required||!1==c.required?"":'required="true"',iName=void 0===c.name?this.options.name+"-label-"+a:c.name,this.esqueleto.inputs.append(b(iLabel+'<input type="'+c.type+ '" name="'+iName+'" value="'+c.value+'" autocomplete="off" '+iRequired+"/>"+fLabel)))},this)));this.esqueleto.buttons=b('<div class="'+this.options.name+'-buttons"></div>');this.esqueleto.form.append(this.esqueleto.buttons);d.form.active?(this.esqueleto.form.attr("action",void 0===d.form.action?"#":d.form.action),this.esqueleto.form.attr("method",void 0===d.form.method?"post":d.form.method),this.options.form.active=!0):(this.esqueleto.form.attr("action","#"),this.esqueleto.form.attr("method","post"), this.options.form.active=!1);"prompt"!=d.type?b.each(g,b.proxy(function(a,c){"submit"==c.type?this.esqueleto.buttons.append(b('<button class="button light classic" type="submit">'+c.value+"</button>").bind("click",b.proxy(function(a){this.close(c.value);a.preventDefault()},this))):"cancel"==c.type&&this.esqueleto.buttons.append(b('<button class="button light classic" type="button">'+c.value+"</button>").bind("click",b.proxy(function(a){this.close(!1);a.preventDefault()},this)))},this)):"prompt"== d.type&&b.each(g,b.proxy(function(a,c){"submit"==c.type?this.esqueleto.buttons.append(b('<button type="submit">'+c.value+"</button>").bind("click",b.proxy(function(a){if(0<b('input[required="true"]:not(:value)').length)b('input[required="true"]:not(:value):first').focus(),this.shake();else{if(this.options.form.active)return!0;this.close(this.toArguments(b("input",this.esqueleto.inputs)))}a.preventDefault()},this))):"cancel"==c.type&&this.esqueleto.buttons.append(b('<button type="button">'+c.value+ "</button>").bind("click",b.proxy(function(a){this.close(!1);a.preventDefault()},this)))},this));this.esqueleto.form.prepend(a);b.each(f,b.proxy(function(a,b){this.esqueleto.wrapper.removeClass(this.options.name+"-"+b)},this));this.esqueleto.wrapper.addClass(this.options.name+"-"+d.type);this.moveBox();this.visible=!0;this.overlay.show();this.esqueleto.msgbox.css({display:"block",left:(b(document).width()-this.options.width)/2});this.moveBox();setTimeout(b.proxy(function(){var a=b("input, button", this.esqueleto.msgbox);a.length&&a.get(0).focus()},this),this.options.moveDuration)},this));this.i++;1==this.i&&this.esqueleto.msgbox.dequeue(this.options.name)},toArguments:function(a){return b.map(a,function(a){return b(a).val()})},moveBox:function(){var a=b(window).width(),d=b(window).height(),e=b(window).scrollLeft(),f=b(window).scrollTop(),g=this.esqueleto.msgbox.outerHeight(),h=0,j=0,h=e+(a-this.options.width)/2,j="bottom"==this.options.emergefrom?f+d+80:f-g-80;this.visible?(this.animation&& this.animation.stop,this.animation=this.esqueleto.msgbox.animate({left:h,top:f+(d-g)/2},{duration:this.options.moveDuration,queue:!1,easing:"easeOutBack"})):this.esqueleto.msgbox.css({top:j,left:h})},close:function(a){this.esqueleto.msgbox.css({display:"none",top:0});this.visible=!1;b.isFunction(this.callback)&&this.callback.apply(this,b.makeArray(a));setTimeout(b.proxy(function(){this.i--;this.esqueleto.msgbox.dequeue(this.options.name)},this),this.options.closeDuration);1==this.i&&this.overlay.hide(); this.moveBox();this.esqueleto.form.empty()},shake:function(){var a=this.options.shake.distance,b=this.options.shake.duration,e=this.options.shake.transition,f=this.options.shake.loops,g=this.esqueleto.msgbox.position().left,h=this.esqueleto.msgbox;for(i=0;i<f;i++)h.animate({left:g+a},b,e),h.animate({left:g-a},b,e);h.animate({left:g+a},b,e);h.animate({left:g},b,e)}},msgbox:function(a,d,e){if("object"==typeof a)b.MsgBoxObject.config(a);else return b.MsgBoxObject.show(a,d,e)}});b(function(){if(1.2<parseFloat(b.fn.jquery))b.MsgBoxObject.create(); else throw"The jQuery version that was loaded is too old. MsgBox requires jQuery 1.3+";})})(jQuery); jQuery.base64=function(){function b(a,b){var f=c.indexOf(a.charAt(b));if(-1===f)throw"Cannot decode base64";return f}function a(a,b){var c=a.charCodeAt(b);if(255<c)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{decode:function(a){var c=0,f,g,h=a.length,j=[],a=String(a);if(0===h)return a;if(0!==h%4)throw"Cannot decode base64";"="===a.charAt(h-1)&&(c=1,"="===a.charAt(h-2)&&(c=2),h-=4);for(f=0;f<h;f+=4)g=b(a,f)<< 18|b(a,f+1)<<12|b(a,f+2)<<6|b(a,f+3),j.push(String.fromCharCode(g>>16,g>>8&255,g&255));switch(c){case 1:g=b(a,f)<<18|b(a,f+1)<<12|b(a,f+2)<<6;j.push(String.fromCharCode(g>>16,g>>8&255));break;case 2:g=b(a,f)<<18|b(a,f+1)<<12,j.push(String.fromCharCode(g>>16))}return j.join("")},encode:function(b){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";var b=String(b),e,f,g=[],h=b.length-b.length%3;if(0===b.length)return b;for(e=0;e<h;e+=3)f=a(b,e)<<16|a(b,e+1)<<8|a(b,e+2),g.push(c.charAt(f>> 18)),g.push(c.charAt(f>>12&63)),g.push(c.charAt(f>>6&63)),g.push(c.charAt(f&63));switch(b.length-h){case 1:f=a(b,e)<<16;g.push(c.charAt(f>>18)+c.charAt(f>>12&63)+"==");break;case 2:f=a(b,e)<<16|a(b,e+1)<<8,g.push(c.charAt(f>>18)+c.charAt(f>>12&63)+c.charAt(f>>6&63)+"=")}return g.join("")},VERSION:"1.0"}}(jQuery); (function(b){function a(a){var c=new Date,d=new Date(a);b.browser.msie&&(d=Date.parse(a.replace(/( \+)/," UTC$1")));a=c-d;return isNaN(a)||0>a?"":2E3>a?"right now":6E4>a?Math.floor(a/1E3)+" seconds ago":12E4>a?"1 minute ago":36E5>a?Math.floor(a/6E4)+" minutes ago":72E5>a?"1 hour ago":864E5>a?Math.floor(a/36E5)+" hours ago":864E5<a&&1728E5>a?"yesterday":31536E6>a?Math.floor(a/864E5)+" days ago":"over a year ago"}function c(a){return a.replace(/\B[@@]([a-zA-Z0-9_]{1,20})/g,function(a,b){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+ b+'">@'+b+"</a>"})}function d(a){return a.replace(/\B[@@]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(a,b){return'<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+b+'">@'+b+"</a>"})}function e(a){return a.replace(/(^|\s+)#(\w+)/gi,function(a,b,c){return b+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+c+'">#'+c+"</a>"})}b.fn.minimize=function(){var a=b(b(this).data("content"));b(this).data("opened","1");b(this).data("minheight",a.find("header").outerHeight()); b(this).click(function(){if("1"==b(this).data("opened"))b(this).data("opened","0"),a.stop().animate({height:b(this).data("minheight")},b(this).data("speed"),"easeOutQuart"),b(this).addClass("minimized");else{b(this).data("opened","1");var c=a.css("height","auto").height();a.css("height",b(this).data("minheight")).stop().animate({height:c},b(this).data("speed"),"easeInQuart",function(){a.height("auto")});b(this).removeClass("minimized")}return!1})};b.fn.toggle=function(){function a(d){c=d;d.hasClass("opened")? d.removeClass("opened").find("div").slideUp(300,function(){b(this).parent().css({height:30})}):d.addClass("opened").css("height","auto").find("div").slideDown(300)}var c=b(this).children("li").eq(0);c.addClass("opened");b(this).find("li").click(function(){b(this).hasClass("opened")||(a(c),a(b(this)));return!1});b(this).find("li").children("a").click(function(){b(this).parent().hasClass("opened")||(a(c),a(b(this).parent()));return!1});b(this).find("div").find("a").click(function(){document.location.href= b(this).attr("href");return!1})};b.fn.tabs=function(a){var c=b(this).find(a),d=b(this).find("ul.filters li:first-child a"),e=b(this).find("div.tabsContent div:first-child, div.postTabs div:first-child");d.addClass("selected");e.addClass("selected");b(this).find("ul.filters").find("a").click(function(){d.removeClass("selected");d=b(this);d.addClass("selected");e.removeClass("selected");e.fadeOut(200);e=c.children("div").eq(d.parent().index());e.addClass("selected");e.delay(200).fadeIn(350);return!1})}; b.fn.testimonials=function(){var a=0,c=b(this).children("ul").children();b(this).find("a.btnNext").click(function(){c.eq(a).fadeOut(200);++a==c.length&&(a=0);c.eq(a).delay(200).fadeIn(200);return!1});b(this).find("a.btnPrev").click(function(){c.eq(a).fadeOut(200);0>--a&&(a=c.length-1);c.eq(a).delay(200).fadeIn(200);return!1})};b.fn.marsPortfolio=function(){function a(c){if("nofilter"!=c.attr("title")){m.addClass("noHover");setTimeout(function(){m.removeClass("noHover")},1E3);b("html,body").animate({scrollTop:0}, 500,"easeInQuad");var f=c.data("filter");document.location.hash="*"!=f?"#/category/"+f:"#";$selectedFilter.removeClass("selected");$selectedFilter=c.parent().parent();$selectedFilter.addClass("selected");m.removeClass("disableResize");q.width(b(document).width()-O);"*"!=f?(q.isotope({sortBy:f,sortAscending:!1}),m.each(function(){b(this).bind("mouseover",e).bind("mouseout",d).bind("click",k);b(this).hasClass(f)?b(this).removeClass("disabled").animate({opacity:1},300):(b(this).addClass("disabled").animate({opacity:0.1}, 300),b(this).unbind("mouseover").unbind("mouseout").unbind("click"),b(this).click(function(){return!1}))})):(q.isotope({sortBy:"original-order",sortAscending:!0}),m.removeClass("disabled").animate({opacity:1},300),m.bind("mouseover",e).bind("mouseout",d).bind("click",k))}}function c(){if(I||B)if(I=!1,""!=document.location.hash&&"#"!=document.location.hash)if(0>document.location.hash.indexOf("category"))S.each(function(){document.location.hash=="#/"+b(this).data("name")&&(t.hasClass("openedP")?l(b(this).attr("href"), b(this).data("name")):x(b(this).attr("href"),b(this).data("name")),B=!0)});else{var a=document.location.hash.slice(document.location.hash.indexOf("category")+9,document.location.hash.length);0<=b.inArray(a,P)&&(n(),b("a[data-filter="+a+"]").trigger("click"))}else{if(("#"==document.location.hash||""==document.location.hash)&&t.hasClass("openedP"))r(),B=!0}else I=!0}function d(){if(!K&&!D&&!b(this).hasClass("noHover")){var a=b(this);b(this).children("img").stop().animate({opacity:0.5,marginTop:0},200, "easeOutQuad");b(this).children("span.folioPlus").stop().animate({opacity:0,bottom:-53},200,"easeOutQuad");b(this).children("div.folioTextHolder").stop().animate({height:0,bottom:0},200,"easeOutQuad");b(this).find("div.folioText").stop().animate({opacity:0,top:-150},200,"easeOutQuad");b(this).children("span.folioShadow").stop().animate({opacity:0,marginTop:0,height:"0"},300,"easeOutQuad",function(){a.css("zIndex",1)})}}function e(){!K&&(!D&&!b(this).hasClass("noHover"))&&(b(this).css("zIndex",++E), b(this).children("img.folioThumb").stop().animate({opacity:1,marginTop:-70},300,"easeOutQuad"),b(this).children("span.folioPlus").stop().animate({opacity:1,bottom:iH/2-30},300,"easeOutQuad"),b(this).children("span.folioShadow").stop().animate({opacity:1,marginTop:-70,height:iH+140},300,"easeOutQuad"),b(this).children("div.folioTextHolder").stop().animate({height:iH/2+J,bottom:-70},300,"easeOutQuad"),b(this).find("div.folioText").stop().animate({opacity:1,top:0},350,"easeOutSine"))}function k(){if(!b(this).hasClass("disabled")){b(this).addClass("disabled"); var a=b(this);setTimeout(function(){a.removeClass("disabled")},500);I=B=!1;x(b(this).attr("href"),b(this).data("name"));b(this).children("img").stop().animate({opacity:0.5,marginTop:0},100,"easeOutQuad");b(this).children("span.folioPlus").stop().animate({opacity:0,bottom:-53},100,"easeOutQuad");b(this).children("div.folioTextHolder").stop().animate({height:0,bottom:0},100,"easeOutQuad");b(this).find("div.folioText").stop().animate({opacity:0,top:-150},100,"easeOutQuad");b(this).children("span.folioShadow").stop().animate({opacity:0, marginTop:0,height:"0"},100,"easeOutQuad");D&&b("html,body").animate({scrollTop:0},500,"easeInQuad")}return!1}function n(){O="closed"==b.topBoss?0:280;(D="block"==b("#mobileCheck").css("display")?!0:!1)&&(O=0);var a=b(document).width()-O,c=b(window).height();G=640>b(document).width()?480:360;iW=Math.floor(a/Math.ceil(a/G));iH=Math.floor(3*(iW/4));m.css({width:iW,height:iH});260>iW?m.find("p").css("height","50"):m.find("p").css("height","auto");q.width(a);q.isotope({itemSelector:".folioItem",getSortData:R, animationEngine:"jquery",resizable:!1});m.addClass("disableResize");D?s.height(b(document).height()):s.height(b(document).height()-140-F);D&&null!=C&&0<C.length?(C.width(b(window).width()),C.height(0.8*b(window).width()),$cr2.width(b(window).width()),$cr2.height(0.8*b(window).width()),$cr3.width(b(window).width()),$cr3.height(0.8*b(window).width()),$cr5.width(b(window).width()),$cr5.height(0.8*b(window).width()),$cr4.css("marginTop",C.height())):!D&&(null!=C&&0<C.length)&&(C.width("600px"),C.height("480px"), $cr2.width("600px"),$cr2.height("480px"),$cr3.width("600px"),$cr3.height("480px"),$cr5.width("600px"),$cr5.height("480px"),$cr4.css("marginTop","auto"));w&&t.hasClass("openedP")&&(c>w.height()+280+F?w.css("marginTop",(c-w.height()-280-F)/2):c<t.outerHeight()+280+F&&0<w.css("marginTop")&&w.css("marginTop",0))}function x(a,c){Q=0==b("html").scrollTop()?b("body").scrollTop():b("html").scrollTop();if(N){N=!1;t.addClass("openedP");v.css("overflowY","scroll");var d=D?b(document).height():b(document).height()- 140-F;s.height(0).fadeIn(0).animate({height:d},200,"easeInQuad",function(){u(a);m.css("zIndex",6)})}else t.addClass("openedP"),u(a);I=!1;document.location.hash="#/"+c}function u(a){b.ajax({url:a,dataType:"html"}).done(function(a){var c=b(a).find("#pwd").text();""==c?(y.css("display",""),z.css("display",""),A.css("display",""),p(a)):(y.css("display","none"),z.css("display","none"),A.css("display","none"),b.msgbox("This is a protected post. In order to view it, please enter a password:",{type:"prompt", buttons:[{type:"submit",value:"Ok"},{type:"cancel",value:"Cancel"}]},function(d){d==b.base64.decode(c)?p(a):r()}))})}function p(a){w=b(a).find(".project");t.prepend(w);document.title=b(a).find("#title").text();0<b("#postSlider").length&&b("#postSlider").slides({effect:"fade",pagination:!1,next:"sliderBtnNext",prev:"sliderBtnPrev",generatePagination:!1,customPagination:"sliderPagination",crossfade:!0});twttr.widgets.load();0<b("#projectVideo").length&&projekktor("#projectVideo");436<b(".nano > .content").css("position", "static").height()&&(b(".nano > .content").css("overflowY","scroll"),b(".nano").nanoScroller());b(".nano > .content").css("position","absolute");K&&b("#postSlider").touchSwipe(function(a){"right"==a?b("#postSlider .sliderBtnPrev").trigger("click"):"left"==a&&b("#postSlider .sliderBtnNext").trigger("click")});C=b("#postSlider");$cr2=b("#postSlider .slides_control");$cr3=b("#postSlider .slides_control > div");$cr4=b("section.projectContent");$cr5=b("#postSlider .slides_container");n();w.find("a").hoverFadeColor(); w.find(".close").bind("click",r);var a=w.find("#nextProject a"),c=w.find("#previousProject a");0<a.length?z.removeClass("disabled").attr("href",a.attr("href")).data("name",a.text()):z.addClass("disabled");0<c.length?y.removeClass("disabled").attr("href",c.attr("href")).data("name",c.text()):y.addClass("disabled");w.css("left","150%").stop().animate({left:"50%"},500,"easeInOutCubic",function(){H=!0})}function l(a,b){w.stop().animate({left:"-50%"},300,"easeOutQuart",function(){w.remove();x(a,b)})}function r(){document.location.hash= "#";document.title=M;b("html,body").animate({scrollTop:Q},500,"easeInQuad");null!=w&&w.stop().animate({left:"-50%"},500,"easeOutQuart",function(){w.remove();n();v.css("overflowY","auto");t.removeClass("openedP");m.css("zIndex",10);q.css("width","auto")});s.delay(200).fadeOut(200);N=!0}var q=b(this),v=b("body"),m=q.children("a.folioItem"),t=b("#content > div"),s=b("#projectHover"),y=s.find(".btnNext"),z=s.find(".btnPrev"),A=s.find(".btnClose"),w=null,C=$cr2=$cr3=$cr4=$cr5=null;m.append('<span class="folioPlus"></span>'); m.append('<span class="folioShadow"></span>');var F=v.hasClass("admin-bar")?28:0,G=iW=360;iH=270;var J=70,E=10;m.size();var N=!0,H=!0,I=!0,B=!1,M=document.title,P=[],Q=0,D="block"==b("#mobileCheck").css("display")?!0:!1,K="ontouchstart"in window,L=1E6,T=0;m.each(function(){var a=b(this);q.find(".folioCategories li").each(function(){a.data("type")==b(this).text()?a.data(b(this).text(),--L):a.data(b(this).text(),--T)})});var R={};q.find(".folioCategories li").each(function(){var a=b(this).text();P.push(a); R[a]=function(b){return parseInt(b.data(a))}});$selectedFilter=b("li.selected a[data-filter]").parent().parent();b("a[data-filter], option[data-filter]").click(function(c){var d=b(this);t.hasClass("openedP")?(r(),setTimeout(function(){a(d)},501)):a(d);c.preventDefault();return!1});var S=b("body").hasClass("template-portfolio-paged")?b("#allItems").children("a"):m;c();window.addEventListener&&window.addEventListener("hashchange",c,!1);m.bind("mouseover",e).bind("mouseout",d).bind("click",k);b("#projectHover").click(function(){r(); return!1});var O=b("body").hasClass("Stick")?280:0;b.topBoss=b("body").hasClass("Stick")?"opened":"closed";n();b(window).resize(function(){n()});b("#sidebar #close").click(function(){n()});y.click(function(){H&&(B=H=!1,l(b(this).attr("href"),b(this).data("name")));return!1});z.click(function(){H&&(B=H=!1,l(b(this).attr("href"),b(this).data("name")));return!1});A.click(function(){B=!1;r();return!1})};b.fn.marsGallery=function(){function a(){if(J||E)if(J=!1,""!=document.location.hash&&"#"!=document.location.hash)if(0> document.location.hash.indexOf("category"))q.each(function(){document.location.hash=="#/"+b(this).data("name")&&(l.hasClass("galleryOpened")?u(b(this).attr("href"),b(this).data("name")):n(b(this).attr("href"),b(this).data("name")),E=!0)});else{var c=document.location.hash.slice(document.location.hash.indexOf("category")+9,document.location.hash.length);0<=b.inArray(c,H)&&(k(),b("a[data-filter="+c+"]").trigger("click"))}else{if(("#"==document.location.hash||""==document.location.hash)&&l.hasClass("galleryOpened"))p(), E=!0}else J=!0}function c(){if(!M&&!B&&!b(this).hasClass("noHover")){var a=iH;b(this).css("zIndex",++C);b(this).children("img.folioThumb").stop().animate({opacity:1},300,"easeOutQuad");b(this).children("span.folioPlus").stop().animate({opacity:1,top:a/2-45},300,"easeOutQuad");b(this).children("span.folioShadow").stop().animate({opacity:1},300,"easeOutQuad");b(this).children("div.folioTextHolder").stop().animate({opacity:1},300,"easeOutQuad");b(this).find("div.folioText").stop().animate({opacity:1, top:a/2},350,"easeOutSine")}}function d(){if(!M&&!B&&!b(this).hasClass("noHover")){var a=b(this);b(this).children("img.folioThumb").stop().animate({opacity:0.5},200,"easeOutQuad");b(this).children("span.folioPlus").stop().animate({opacity:0,top:-23},200,"easeOutQuad");b(this).children("span.folioShadow").stop().animate({opacity:0},200,"easeOutQuad");b(this).children("div.folioTextHolder").stop().animate({opacity:0},200,"easeOutQuad");b(this).find("div.folioText").stop().animate({opacity:0,top:200}, 250,"easeOutSine",function(){a.css("zIndex",1)})}}function e(){K&&(J=E=K=!1,n(b(this).attr("href"),b(this).data("name")),setTimeout(function(){K=!0},1E3),B&&b("html,body").animate({scrollTop:0},500,"easeInQuad"));return!1}function k(){L="closed"==b.topBoss?0:280;(B="block"==b("#mobileCheck").css("display")?!0:!1)&&(L=0);var a=b(window).width()-L;b(window).height();iW=Math.floor(a/Math.ceil(a/w));iH=Math.floor(3*(iW/4));q.css({width:iW,height:iH});l.width(b(document).width()-L);l.isotope({itemSelector:".folioItem", getSortData:D,animationEngine:"jquery",resizable:!1});q.addClass("disableResize");B?v.height(b(window).height()):v.height(b(window).height()-140-A);m.height(b(window).height()-140-A);l.hasClass("galleryOpened")&&l.css("height",b(window).height()-280-2*A)}function n(a,c){I=0==b("html").scrollTop()?b("body").scrollTop():b("html").scrollTop();if(F){F=!1;l.addClass("galleryOpened");r.addClass("galleryOpened");l.animate({height:b(window).height()-280-2*A},200,"easeInQuad");var d=v.height();b("#topFooter").css("zIndex", 99999);b("#bottomFooter").css("zIndex",99999);$supersized.css("zIndex",99998);v.height(0).fadeIn(0).animate({height:d},200,"easeInQuad",function(){x(a);q.css("zIndex",6)})}else x(a);J=!1;document.location.hash="#/"+c}function x(a){b.ajax({url:a,dataType:"html"}).done(function(a){z=b(a).find(".project");document.title=b(a).find("#title").text();m.append(b(a).find(".galleryContent"));twttr.widgets.load();var c=[];z.find("#projectSlides").children("img").each(function(){c.push({image:b(this).attr("src"), title:b(this).attr("title")})});a=b("body").hasClass("Fit")?1:0;b.supersized({slides:c,transition:1,transition_speed:1E3,horizontal_center:12,image_protect:0,fit_portrait:a,fit_landscape:0,fit_always:0});var a=z.find("#nextProject a"),d=z.find("#previousProject a");M&&b("#supersizedControls").touchSwipe(function(a){"right"==a?api.prevSlide():"left"==a&&api.nextSlide()});0<a.length?y.removeClass("disabled").attr("href",a.attr("href")).data("name",a.text()):y.addClass("disabled");0<d.length?s.removeClass("disabled").attr("href", d.attr("href")).data("name",d.text()):s.addClass("disabled");b(".galleryContent").find(".close").click(function(){E=!1;p();return!1});setTimeout(function(){G=!0},500)})}function u(a,c){m.find("#slideList").fadeOut();r.find(".galleryContent").delay(100).fadeOut(200);$supersized.delay(200).fadeOut(400,function(){clearInterval(b.supersized.vars.slideshow_interval);b.supersized.vars.current_slide=0;b.supersized.vars.in_animation=!1;b.supersized.vars.is_paused=!1;b.supersized.vars.slideshow_interval=null; b.supersized.vars.options.slides=null;m.find("li:not(#playPause)").remove();r.find(".galleryContent").remove();$supersized.empty();b("#progressBar").stop().animate({height:0},100,"easeOutQuad");n(a,c)})}function p(){b("html,body").animate({scrollTop:I},500,"easeInQuad");document.location.hash="#";document.title=N;l.removeClass("galleryOpened");r.removeClass("galleryOpened");k();m.find(".slideProjects a").stop().fadeOut(0);m.find("#slideList").stop().fadeOut(200);r.find(".galleryContent").delay(100).fadeOut(200); $supersized.delay(200).fadeOut(400,function(){m.find("li:not(#playPause)").remove();r.find(".galleryContent").remove();$supersized.empty();b.supersized.vars.slideshow_interval&&clearInterval(b.supersized.vars.slideshow_interval);b("#progressBar").stop().animate({height:0},100,"easeOutQuad");b("#topFooter").css("zIndex",7);b("#bottomFooter").css("zIndex",7);$supersized.css("zIndex",-999);m.css("zIndex",-999)});v.fadeOut(100);F=!0;q.css("zIndex",10)}b("body").hasClass("template-gallery")&&b("#content").append('<ul id="supersized"></ul>'); var l=b(this),r=b("body"),q=l.children("a.folioItem");b("#content > div");var v=b("#projectHover"),m=b("#supersizedControls"),$supersized=b("#supersized"),s=b("a.btnNext"),y=b("a.btnPrev"),z=null,A=r.hasClass("admin-bar")?28:0;q.append('<span class="folioPlus"></span>');q.append('<span class="folioShadow"></span>');var w=iW=240;iH=180;var C=10;q.size();var F=!0,G=!0,J=!0,E=!1,N=document.title,H=[],I=0,B="block"==b("#mobileCheck").css("display")?!0:!1,M="ontouchstart"in window,P=0,Q=0;q.each(function(){var a= b(this);l.find(".folioCategories li").each(function(){a.data("type")==b(this).text()?a.data(b(this).text(),++P):a.data(b(this).text(),--Q)})});var D={};l.find(".folioCategories li").each(function(){var a=b(this).text();H.push(a);D[a]=function(b){return parseInt(b.data(a))}});$selectedFilter=b("li.selected a[data-filter]").parent().parent();b("a[data-filter]").click(function(a){b("html,body").animate({scrollTop:0},500,"easeInQuad");l.hasClass("galleryOpened")&&setTimeout(p,1E3);q.addClass("noHover"); setTimeout(function(){q.removeClass("noHover")},1E3);var f=b(this).data("filter");document.location.hash="*"!=f?"#/category/"+f:"#";$selectedFilter.removeClass("selected");$selectedFilter=b(this).parent().parent();$selectedFilter.addClass("selected");q.removeClass("disableResize");"*"!=f?(l.isotope({sortBy:f,sortAscending:!1}),q.each(function(){b(this).hasClass(f)?(b(this).removeClass("disabled").animate({opacity:1},300),b(this).unbind().bind("mouseover",c).bind("mouseout",d).bind("click",e)):(b(this).addClass("disabled").animate({opacity:0.1}, 300),b(this).unbind(),b(this).click(function(){return!1}))})):(l.isotope({sortBy:"original-order",sortAscending:!0}),q.removeClass("disabled").animate({opacity:1},300),q.unbind().bind("mouseover",c).bind("mouseout",d).bind("click",e));a.preventDefault();return!1});a();window.addEventListener&&window.addEventListener("hashchange",a,!1);q.bind("mouseover",c).bind("mouseout",d).bind("click",e);var K=!0,L=b("body").hasClass("Stick")?280:0;b.topBoss=b("body").hasClass("Stick")?"opened":"closed";b("body").addClass("topBoss"); k();b(window).resize(function(){k()});b("#sidebar #close").click(function(){k()});s.click(function(){G&&(E=G=!1,u(b(this).attr("href"),b(this).data("name")));return!1});y.click(function(){G&&(E=G=!1,u(b(this).attr("href"),b(this).data("name")));return!1});b(".btnClose").click(function(){E=!1;p();return!1})};b.fn.twitter=function(f,g){var h=b(this);b.getJSON("https://api.twitter.com/1/statuses/user_timeline.json?screen_name="+f+"&count="+g+"&callback=?",function(f){b.each(f,function(b,f){0==b&&h.empty(); h.append(e(c(d(f.text.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(a,b,c,d,e){return'<a class="twtr-hyperlink" target="_blank" href="'+(c.match(/w/)?"http://":"")+b+'">'+(25<b.length?b.substr(0,24)+"...":b)+"</a>"+e}))))+'<span class="twitFooter">'+a(f.created_at)+"</span>")})})};jQuery.fn.styledSelect=function(a){var b=jQuery.browser.mozilla&&0==jQuery.browser.version.indexOf("1.8."),c={coverClass:"select-replace-cover",innerClass:"select-replace",adjustPosition:{top:0, left:0},selectOpacity:0};a&&jQuery.extend(c,a);return this.each(function(){if(b)return!1;var a=jQuery(this);a.wrap("<span></span>");a.after("<span></span>");var d=a.next(),e=a.parent();a.css({opacity:c.selectOpacity,visibility:"visible",position:"absolute",top:0,left:0,display:"inline","z-index":1});e.addClass(c.coverClass).css({display:"inline-block",position:"relative",top:c.adjustPosition.top,left:c.adjustPosition.left,"z-index":0,"vertical-align":"middle","text-align":"left"});d.addClass(c.innerClass).css({display:"block", "white-space":"nowrap"});a.bind("change",function(){jQuery(this).next().text(this.options[this.selectedIndex].text)}).bind("resize",function(){jQuery(this).parent().width(jQuery(this).width()+"px")});a.trigger("change").trigger("resize")})}})(jQuery); (function(b){b.fn.slides=function(a){a=b.extend({},b.fn.slides.option,a);return this.each(function(){function c(c,e,y){if(!m&&v){m=!0;a.animationStart(q+1);switch(c){case "next":l=q;p=q+1;p=h===p?0:p;s=2*j;c=2*-j;q=p;break;case "prev":l=q;p=q-1;p=-1===p?h-1:p;c=s=0;q=p;break;case "pagination":p=parseInt(y,10),l=b("."+a.paginationClass+" li."+a.currentClass+" a",f).attr("href").match("[^#/]+$"),p>l?(s=2*j,c=2*-j):c=s=0,q=p}d();"fade"===e?a.crossfade?g.children(":eq("+p+")",f).css({zIndex:10}).fadeIn(a.fadeSpeed, a.fadeEasing,function(){a.autoHeight?g.animate({height:g.children(":eq("+p+")",f).outerHeight()},a.autoHeightSpeed,function(){g.children(":eq("+l+")",f).css({display:"none",zIndex:0});g.children(":eq("+p+")",f).css({zIndex:0});a.animationComplete(p+1);m=!1}):(g.children(":eq("+l+")",f).css({display:"none",zIndex:0}),g.children(":eq("+p+")",f).css({zIndex:0}),a.animationComplete(p+1),m=!1)}):g.children(":eq("+l+")",f).fadeOut(a.fadeSpeed,a.fadeEasing,function(){a.autoHeight?g.animate({height:g.children(":eq("+ p+")",f).outerHeight()},a.autoHeightSpeed,function(){g.children(":eq("+p+")",f).fadeIn(a.fadeSpeed,a.fadeEasing)}):g.children(":eq("+p+")",f).fadeIn(a.fadeSpeed,a.fadeEasing,function(){b.browser.msie&&b(this).get(0).style.removeAttribute("filter")});a.animationComplete(p+1);m=!1}):(g.children(":eq("+p+")").css({left:s,display:"block"}),a.autoHeight?g.animate({left:c,height:g.children(":eq("+p+")").outerHeight()},a.slideSpeed,a.slideEasing,function(){g.css({left:-j});g.children(":eq("+p+")").css({left:j, zIndex:5});g.children(":eq("+l+")").css({left:j,display:"none",zIndex:0});a.animationComplete(p+1);m=!1}):g.animate({left:c},a.slideSpeed,a.slideEasing,function(){g.css({left:-j});g.children(":eq("+p+")").css({left:j,zIndex:5});g.children(":eq("+l+")").css({left:j,display:"none",zIndex:0});a.animationComplete(p+1);m=!1}));a.pagination&&(b("."+a.paginationClass+" li."+a.currentClass,f).removeClass(a.currentClass),b("."+a.paginationClass+" li:eq("+p+")",f).addClass(a.currentClass))}}function d(){b("."+ a.customPagination).text(q+1+" of "+h)}function e(){a.pause?(clearTimeout(f.data("pause")),clearInterval(f.data("interval")),z=setTimeout(function(){clearTimeout(f.data("pause"));A=setInterval(function(){c("next",x)},a.play);f.data("interval",A)},a.pause),f.data("pause",z)):clearInterval(f.data("interval"))}b("."+a.container,b(this)).children().wrapAll('<div class="slides_control"/>');var f=b(this),g=b(".slides_control",f),h=g.children().size(),j=g.children().outerWidth(),k=g.children().outerHeight(), n=a.start-1,x=0>a.effect.indexOf(",")?a.effect:a.effect.replace(" ","").split(",")[0],u=0>a.effect.indexOf(",")?x:a.effect.replace(" ","").split(",")[1],p=0,l=0,r=0,q=0,v,m,t,s,y,z,A;if(2>h)return b("."+a.container,b(this)).fadeIn(a.fadeSpeed,a.fadeEasing,function(){v=!0;a.slidesLoaded()}),b("."+a.next+", ."+a.prev).fadeOut(0),!1;d();2>h||(0>n&&(n=0),n>h&&(n=h-1),a.start&&(q=n),a.randomize&&g.randomize(),b("."+a.container,f).css({overflow:"hidden",position:"relative"}),g.children().css({position:"absolute", top:0,left:g.children().outerWidth(),zIndex:0,display:"none"}),g.css({position:"relative",width:3*j,height:k,left:-j}),b("."+a.container,f).css({display:"block"}),a.autoHeight&&(g.children().css({height:"auto"}),g.animate({height:g.children(":eq("+n+")").outerHeight()},a.autoHeightSpeed)),a.preload&&g.find("img:eq("+n+")").length?(b("."+a.container,f).css({background:"url("+a.preloadImage+") no-repeat 50% 50%"}),k=g.find("img:eq("+n+")").attr("src")+"?"+(new Date).getTime(),y="slides_control"!=b("img", f).parent().attr("class")?g.children(":eq(0)")[0].tagName.toLowerCase():g.find("img:eq("+n+")"),g.find("img:eq("+n+")").attr("src",k).load(function(){g.find(y+":eq("+n+")").fadeIn(a.fadeSpeed,a.fadeEasing,function(){b(this).css({zIndex:5});b("."+a.container,f).css({background:""});v=!0;a.slidesLoaded()})})):g.children(":eq("+n+")").fadeIn(a.fadeSpeed,a.fadeEasing,function(){v=!0;a.slidesLoaded()}),a.bigTarget&&(g.children().css({cursor:"pointer"}),g.children().click(function(){c("next",x);return!1})), a.hoverPause&&a.play&&(g.bind("mouseover",function(){clearInterval(f.data("interval"))}),g.bind("mouseleave",function(){e()})),a.generateNextPrev&&(b("."+a.container,f).after('<a href="#" class="'+a.prev+'">Prev</a>'),b("."+a.prev,f).after('<a href="#" class="'+a.next+'">Next</a>')),b("."+a.next,f).click(function(b){b.preventDefault();a.play&&e();c("next",x)}),b("."+a.prev,f).click(function(b){b.preventDefault();a.play&&e();c("prev",x)}),a.generatePagination?(a.prependPagination?f.prepend("<ul class="+ a.paginationClass+"></ul>"):f.append("<ul class="+a.paginationClass+"></ul>"),g.children().each(function(){b("."+a.paginationClass,f).append('<li><a href="#'+r+'">'+(r+1)+"</a></li>");r++})):b("."+a.paginationClass+" li a",f).each(function(){b(this).attr("href","#"+r);r++}),b("."+a.paginationClass+" li:eq("+n+")",f).addClass(a.currentClass),b("."+a.paginationClass+" li a",f).click(function(){a.play&&e();t=b(this).attr("href").match("[^#/]+$");q!=t&&c("pagination",u,t);return!1}),b("a.link",f).click(function(){a.play&& e();t=b(this).attr("href").match("[^#/]+$")-1;q!=t&&c("pagination",u,t);return!1}),a.play&&(A=setInterval(function(){c("next",x)},a.play),f.data("interval",A)))})};b.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1, randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}};b.fn.randomize=function(a){function c(){return Math.round(Math.random())-0.5}return b(this).each(function(){var d=b(this),e=d.children(),f=e.length;if(1<f){e.hide();var g=[];for(i=0;i<f;i++)g[g.length]=i;g=g.sort(c);b.each(g,function(b,c){var f=e.eq(c),g=f.clone(!0);g.show().appendTo(d);void 0!==a&&a(f,g);f.remove()})}})}})(jQuery); (function(b,a){var c=b.document,d=b.Modernizr,e=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},f=["Moz","Webkit","O","Ms"],g=function(a){var b=c.documentElement.style,d;if("string"===typeof b[a])return a;for(var a=e(a),g=0,j=f.length;g<j;g++)if(d=f[g]+a,"string"===typeof b[d])return d},h=g("transform"),j=g("transitionProperty"),k={csstransforms:function(){return!!h},csstransforms3d:function(){var b=!!g("perspective");if(b){var b="@media ("+" -o- -moz- -ms- -webkit- -khtml- ".split(" ").join("transform-3d),(")+ "modernizr)",c=a("<style>"+b+"{#modernizr{height:3px}}</style>").appendTo("head"),d=a('<div id="modernizr" />').appendTo("html"),b=3===d.height();d.remove();c.remove()}return b},csstransitions:function(){return!!j}},n;if(d)for(n in k)d.hasOwnProperty(n)||d.addTest(n,k[n]);else{var d=b.Modernizr={_version:"1.6ish: miniModernizr for Isotope"},x=" ",u;for(n in k)u=k[n](),d[n]=u,x+=" "+(u?"":"no-")+n;a("html").addClass(x)}if(d.csstransforms){var p=d.csstransforms3d?{translate:function(a){return"translate3d("+ a[0]+"px, "+a[1]+"px, 0) "},scale:function(a){return"scale3d("+a+", "+a+", 1) "}}:{translate:function(a){return"translate("+a[0]+"px, "+a[1]+"px) "},scale:function(a){return"scale("+a+") "}},l=function(b,c,d){var e=a.data(b,"isoTransform")||{},f={},g,j={};f[c]=d;a.extend(e,f);for(g in e)c=e[g],j[g]=p[g](c);g=(j.translate||"")+(j.scale||"");a.data(b,"isoTransform",e);b.style[h]=g};a.cssNumber.scale=!0;a.cssHooks.scale={set:function(a,b){l(a,"scale",b)},get:function(b){return(b=a.data(b,"isoTransform"))&& b.scale?b.scale:1}};a.fx.step.scale=function(b){a.cssHooks.scale.set(b.elem,b.now+b.unit)};a.cssNumber.translate=!0;a.cssHooks.translate={set:function(a,b){l(a,"translate",b)},get:function(b){return(b=a.data(b,"isoTransform"))&&b.translate?b.translate:[0,0]}}}var r,q;d.csstransitions&&(r={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd",transitionProperty:"transitionEnd"}[j],q=g("transitionDuration"));var v=a.event,m;v.special.smartresize= {setup:function(){a(this).bind("resize",v.special.smartresize.handler)},teardown:function(){a(this).unbind("resize",v.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize";m&&clearTimeout(m);m=setTimeout(function(){jQuery.event.handle.apply(c,d)},"execAsap"===b?0:100)}};a.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};a.Isotope=function(b,c,d){this.element=a(c);this._create(b);this._init(d)};var t= ["width","height"],s=a(b);a.Isotope.settings={resizable:!1,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:0.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!a.browser.opera,itemPositionDataEnabled:!1};a.Isotope.prototype= {_create:function(b){this.options=a.extend({},a.Isotope.settings,b);this.styleQueue=[];this.elemCount=0;b=this.element[0].style;this.originalStyle={};var c=t.slice(0),d;for(d in this.options.containerStyle)c.push(d);for(var e=0,f=c.length;e<f;e++)d=c[e],this.originalStyle[d]=b[d]||"";this.element.css(this.options.containerStyle);this._updateAnimationEngine();this._updateUsingTransforms();this.options.getSortData=a.extend(this.options.getSortData,{"original-order":function(a,b){b.elemCount++;return b.elemCount}, random:function(){return Math.random()}});this.reloadItems();this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var g=this;setTimeout(function(){g.element.addClass(g.options.containerClass)},0);this.options.resizable&&s.bind("smartresize.isotope",function(){g.resize()});this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(a){var b=this.options.itemSelector,a=b?a.filter(b).add(a.find(b)): a,b={position:"absolute"};this.usingTransforms&&(b.left=0,b.top=0);a.css(b).addClass(this.options.itemClass);this.updateSortData(a,!0);return a},_init:function(a){this.$filteredAtoms=this._filter(this.$allAtoms);this._sort();this.reLayout(a)},option:function(b){if(a.isPlainObject(b)){this.options=a.extend(!0,this.options,b);for(var c in b)if(b="_update"+e(c),this[b])this[b]()}},_updateAnimationEngine:function(){var a;switch(this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"")){case "css":case "none":a= !1;break;case "jquery":a=!0;break;default:a=!d.csstransitions}this.isUsingJQueryAnimation=a;this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var a=this.usingTransforms=this.options.transformsEnabled&&d.csstransforms&&d.csstransitions&&!this.isUsingJQueryAnimation;a||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale);this.getPositionStyles=a?this._translate:this._positionAbs},_filter:function(a){var b= ""===this.options.filter?"*":this.options.filter;if(!b)return a;var c=this.options.hiddenClass,d="."+c,e=a.filter(d),f=e;"*"!==b&&(f=e.filter(b),d=a.not(d).not(b).addClass(c),this.styleQueue.push({$el:d,style:this.options.hiddenStyle}));this.styleQueue.push({$el:f,style:this.options.visibleStyle});f.removeClass(c);return a.filter(b)},updateSortData:function(b,c){var d=this,e=this.options.getSortData,f,g;b.each(function(){f=a(this);g={};for(var b in e)g[b]=!c&&"original-order"===b?a.data(this,"isotope-sort-data")[b]: e[b](f,d);a.data(this,"isotope-sort-data",g)})},_sort:function(){var a=this.options.sortBy,b=this._getSorter,c=this.options.sortAscending?1:-1;this.$filteredAtoms.sort(function(d,e){var f=b(d,a),g=b(e,a);f===g&&"original-order"!==a&&(f=b(d,"original-order"),g=b(e,"original-order"));return(f>g?1:f<g?-1:0)*c})},_getSorter:function(b,c){return a.data(b,"isotope-sort-data")[c]},_translate:function(a,b){return{translate:[a,b]}},_positionAbs:function(a,b){return{left:a,top:b}},_pushPosition:function(a, b,c){var b=Math.round(b+this.offset.left),c=Math.round(c+this.offset.top),d=this.getPositionStyles(b,c);this.styleQueue.push({$el:a,style:d});this.options.itemPositionDataEnabled&&a.data("isotope-item-position",{x:b,y:c})},layout:function(a,b){var c=this.options.layoutMode;this["_"+c+"Layout"](a);this.options.resizesContainer&&(c=this["_"+c+"GetContainerSize"](),this.styleQueue.push({$el:this.element,style:c}));this._processStyleQueue(a,b);this.isLaidOut=!0},_processStyleQueue:function(b,c){var e= !this.isLaidOut?"css":this.isUsingJQueryAnimation?"animate":"css",f=this.options.animationOptions,g=this.options.onLayout,j,h,k,p;b.hasClass("disableResize")&&(e="css");h=function(a,b){b.$el[e](b.style,f)};if(this._isInserting&&this.isUsingJQueryAnimation)h=function(a,b){j=b.$el.hasClass("no-transition")?"css":e;b.$el[j](b.style,f)};else if(c||g||f.complete){var n=!1,u=[c,g,f.complete],l=this;k=!0;p=function(){if(!n){for(var a,c=0,d=u.length;c<d;c++)a=u[c],"function"===typeof a&&a.call(l.element, b,l);n=!0}};if(this.isUsingJQueryAnimation&&"animate"===e)f.complete=p,k=!1;else if(d.csstransitions){for(var g=0,m=this.styleQueue[0],m=m&&m.$el;!m||!m.length;){m=this.styleQueue[g++];if(!m)return;m=m.$el}0<parseFloat(getComputedStyle(m[0])[q])&&(h=function(a,b){b.$el[e](b.style,f).one(r,p)},k=!1)}}a.each(this.styleQueue,h);k&&p();this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()},reLayout:function(a){this["_"+this.options.layoutMode+"Reset"]();this.layout(this.$filteredAtoms, a)},addItems:function(a,b){var c=this._getAtoms(a);this.$allAtoms=this.$allAtoms.add(c);b&&b(c)},insert:function(a,b){this.element.append(a);var c=this;this.addItems(a,function(a){a=c._filter(a);c._addHideAppended(a);c._sort();c.reLayout();c._revealAppended(a,b)})},appended:function(a,b){var c=this;this.addItems(a,function(a){c._addHideAppended(a);c.layout(a);c._revealAppended(a,b)})},_addHideAppended:function(a){this.$filteredAtoms=this.$filteredAtoms.add(a);a.addClass("no-transition");this._isInserting= !0;this.styleQueue.push({$el:a,style:this.options.hiddenStyle})},_revealAppended:function(a,b){var c=this;setTimeout(function(){a.removeClass("no-transition");c.styleQueue.push({$el:a,style:c.options.visibleStyle});c._isInserting=!1;c._processStyleQueue(a,b)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(a,b){var c=this,d=function(){c.$allAtoms=c.$allAtoms.not(a);a.remove();b&&b.call(c.element)};a.filter(":not(."+this.options.hiddenClass+")").length? (this.styleQueue.push({$el:a,style:this.options.hiddenStyle}),this.$filteredAtoms=this.$filteredAtoms.not(a),this._sort(),this.reLayout(d)):d()},shuffle:function(a){this.updateSortData(this.$allAtoms);this.options.sortBy="random";this._sort();this.reLayout(a)},destroy:function(){var a=this.usingTransforms,b=this.options;this.$allAtoms.removeClass(b.hiddenClass+" "+b.itemClass).each(function(){var b=this.style;b.position="";b.top="";b.left="";b.opacity="";a&&(b[h]="")});var c=this.element[0].style, d;for(d in this.originalStyle)c[d]=this.originalStyle[d];this.element.unbind(".isotope").undelegate("."+b.hiddenClass,"click").removeClass(b.containerClass).removeData("isotope");s.unbind(".isotope")},_getSegments:function(a){var b=this.options.layoutMode,c=a?"rowHeight":"columnWidth",d=a?"height":"width",a=a?"rows":"cols",f=this.element[d](),d=this.options[b]&&this.options[b][c]||this.$filteredAtoms["outer"+e(d)](!0)||f,f=Math.floor(f/d),f=Math.max(f,1);this[b][a]=f;this[b][c]=d},_checkIfSegmentsChanged:function(a){var b= this.options.layoutMode,c=a?"rows":"cols",d=this[b][c];this._getSegments(a);return this[b][c]!==d},_masonryReset:function(){this.masonry={};this._getSegments();var a=this.masonry.cols;for(this.masonry.colYs=[];a--;)this.masonry.colYs.push(0)},_masonryLayout:function(b){var c=this,d=c.masonry;b.each(function(){var b=a(this),e=Math.ceil(b.outerWidth(!0)/d.columnWidth),e=Math.min(e,d.cols);if(1===e)c._masonryPlaceBrick(b,d.colYs);else{var f=d.cols+1-e,g=[],j,h;for(h=0;h<f;h++)j=d.colYs.slice(h,h+e), g[h]=Math.max.apply(Math,j);c._masonryPlaceBrick(b,g)}})},_masonryPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}this._pushPosition(a,this.masonry.columnWidth*d,c);c+=a.outerHeight(!0);f=this.masonry.cols+1-f;for(e=0;e<f;e++)this.masonry.colYs[d+e]=c},_masonryGetContainerSize:function(){return{height:Math.max.apply(Math,this.masonry.colYs)}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows= {x:0,y:0,height:0}},_fitRowsLayout:function(b){var c=this,d=this.element.width(),e=this.fitRows;b.each(function(){var b=a(this),f=b.outerWidth(!0),g=b.outerHeight(!0);0!==e.x&&f+e.x>d&&(e.x=0,e.y=e.height);c._pushPosition(b,e.x,e.y);e.height=Math.max(e.y+g,e.height);e.x+=f})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0};this._getSegments();this._getSegments(!0)},_cellsByRowLayout:function(b){var c= this,d=this.cellsByRow;b.each(function(){var b=a(this),e=Math.floor(d.index/d.cols),f=(d.index%d.cols+0.5)*d.columnWidth-b.outerWidth(!0)/2,e=(e+0.5)*d.rowHeight-b.outerHeight(!0)/2;c._pushPosition(b,f,e);d.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}}, _straightDownLayout:function(b){var c=this;b.each(function(){var b=a(this);c._pushPosition(b,0,c.straightDown.y);c.straightDown.y+=b.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={};this._getSegments(!0);var a=this.masonryHorizontal.rows;for(this.masonryHorizontal.rowXs=[];a--;)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(b){var c= this,d=c.masonryHorizontal;b.each(function(){var b=a(this),e=Math.ceil(b.outerHeight(!0)/d.rowHeight),e=Math.min(e,d.rows);if(1===e)c._masonryHorizontalPlaceBrick(b,d.rowXs);else{var f=d.rows+1-e,g=[],j,h;for(h=0;h<f;h++)j=d.rowXs.slice(h,h+e),g[h]=Math.max.apply(Math,j);c._masonryHorizontalPlaceBrick(b,g)}})},_masonryHorizontalPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}this._pushPosition(a,c,this.masonryHorizontal.rowHeight*d);c+=a.outerWidth(!0); f=this.masonryHorizontal.rows+1-f;for(e=0;e<f;e++)this.masonryHorizontal.rowXs[d+e]=c},_masonryHorizontalGetContainerSize:function(){return{width:Math.max.apply(Math,this.masonryHorizontal.rowXs)}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(b){var c=this,d=this.element.height(),e=this.fitColumns;b.each(function(){var b=a(this),f=b.outerWidth(!0),g=b.outerHeight(!0);0!== e.y&&g+e.y>d&&(e.x=e.width,e.y=0);c._pushPosition(b,e.x,e.y);e.width=Math.max(e.x+f,e.width);e.y+=g})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0};this._getSegments();this._getSegments(!0)},_cellsByColumnLayout:function(b){var c=this,d=this.cellsByColumn;b.each(function(){var b=a(this),e=d.index%d.rows,f=(Math.floor(d.index/d.rows)+0.5)*d.columnWidth-b.outerWidth(!0)/ 2,e=(e+0.5)*d.rowHeight-b.outerHeight(!0)/2;c._pushPosition(b,f,e);d.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(b){var c=this;b.each(function(){var b=a(this);c._pushPosition(b,c.straightAcross.x,0);c.straightAcross.x+= b.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}};a.fn.imagesLoaded=function(b){function c(){b.call(e,f)}function d(b){b=b.target;b.src!==j&&-1===a.inArray(b,h)&&(h.push(b),0>=--g&&(setTimeout(c),f.unbind(".imagesLoaded",d)))}var e=this,f=e.find("img").add(e.filter("img")),g=f.length,j="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",h=[];g||c();f.bind("load.imagesLoaded error.imagesLoaded", d).each(function(){var a=this.src;this.src=j;this.src=a});return e};a.fn.isotope=function(c,d){if("string"===typeof c){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var d=a.data(this,"isotope");d?!a.isFunction(d[c])||"_"===c.charAt(0)?b.console&&b.console.error("no such method '"+c+"' for isotope instance"):d[c].apply(d,e):b.console&&b.console.error("cannot call methods on isotope prior to initialization; attempted to call method '"+c+"'")})}else this.each(function(){var b=a.data(this, "isotope");b?(b.option(c),b._init(d)):a.data(this,"isotope",new a.Isotope(c,this,d))});return this}})(window,jQuery); (function(b){b.cookie=function(a,c,d){if(1<arguments.length&&(!/Object/.test(Object.prototype.toString.call(c))||null===c||void 0===c)){d=b.extend({},d);if(null===c||void 0===c)d.expires=-1;if("number"===typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}c=String(c);return document.cookie=[encodeURIComponent(a),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure": ""].join("")}for(var d=c||{},e=d.raw?function(a){return a}:decodeURIComponent,f=document.cookie.split("; "),g=0,h;h=f[g]&&f[g].split("=");g++)if(e(h[0])===a)return e(h[1]||"");return null}})(jQuery); (function(b){b.supersized=function(a){var c=this;c.$el=b("#supersized");c.el="#supersized";vars=b.supersized.vars;c.$el.data("supersized",c);api=c.$el.data("supersized");c.init=function(){b.supersized.vars=b.extend(b.supersized.vars,b.supersized.themeVars);b.supersized.vars.options=b.extend({},b.supersized.defaultOptions,b.supersized.themeOptions,a);c.options=b.supersized.vars.options;c._build()};c._build=function(){for(var a=0,e="",f="",g,h="",j;a<=c.options.slides.length-1;){switch(c.options.slide_links){case "num":g= a+1;break;case "name":g=c.options.slides[a].title;break;case "blank":g=""}e=e+'<li class="slide-'+a+'"></li>';a==c.options.start_slide-1?(c.options.slide_links&&(f=f+'<li class="slide-link-'+a+' current-slide"><a>'+g+"</a></li>"),c.options.thumb_links&&(c.options.slides[a].thumb?j=c.options.slides[a].thumb:j=c.options.slides[a].image,h=h+'<li class="thumb'+a+' current-thumb"><img src="'+j+'"/></li>')):(c.options.slide_links&&(f=f+'<li class="slide-link-'+a+'" ><a>'+g+"</a></li>"),c.options.thumb_links&& (c.options.slides[a].thumb?j=c.options.slides[a].thumb:j=c.options.slides[a].image,h=h+'<li class="thumb'+a+'"><img src="'+j+'"/></li>'));a++}c.options.slide_links&&b(vars.slide_list).append(f);c.options.thumb_links&&vars.thumb_tray.length&&b(vars.thumb_tray).append('<ul id="'+vars.thumb_list.replace("#","")+'">'+h+"</ul>");b(c.el).append(e);c.options.thumbnail_navigation&&(0>vars.current_slide-1?prevThumb=c.options.slides.length-1:prevThumb=vars.current_slide-1,b(vars.prev_thumb).show().html(b("<img/>").attr("src", c.options.slides[prevThumb].image)),vars.current_slide==c.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1,b(vars.next_thumb).show().html(b("<img/>").attr("src",c.options.slides[nextThumb].image)));c._start()};c._start=function(){vars.current_slide=c.options.start_slide?c.options.start_slide-1:Math.floor(Math.random()*c.options.slides.length);var a=c.options.new_window?' target="_blank"':"";3==c.options.performance?c.$el.addClass("speed"):(1==c.options.performance||2==c.options.performance)&& c.$el.addClass("quality");if(c.options.random){arr=c.options.slides;for(var e,f,g=arr.length;g;e=parseInt(Math.random()*g),f=arr[--g],arr[g]=arr[e],arr[e]=f);c.options.slides=arr}1<c.options.slides.length?2<c.options.slides.length&&(0>vars.current_slide-1?loadPrev=c.options.slides.length-1:loadPrev=vars.current_slide-1,e=c.options.slides[loadPrev].url?"href='"+c.options.slides[loadPrev].url+"'":"",f=b('<img src="'+c.options.slides[loadPrev].image+'"/>'),f.appendTo(c.el+" li:eq("+loadPrev+")").wrap("<a "+ e+a+"></a>").parent().parent().addClass("image-loading prevslide"),f.load(function(){var a=b("#supersized").css("display");b("#supersized").css("display","block");b(this).data("origWidth",b(this).width()).data("origHeight",b(this).height());b("#supersized").css("display",a);c.resizeNow()})):c.options.slideshow=0;e=api.getField("url")?"href='"+api.getField("url")+"'":"";f=b('<img src="'+api.getField("image")+'"/>');f.appendTo(c.el+" li:eq("+vars.current_slide+")").wrap("<a "+e+a+"></a>").parent().parent().addClass("image-loading activeslide"); f.load(function(){c._origDim(b(this));c.resizeNow();c.launch();"undefined"!=typeof theme&&"function"==typeof theme._init&&theme._init()});1<c.options.slides.length&&(vars.current_slide==c.options.slides.length-1?loadNext=0:loadNext=vars.current_slide+1,e=c.options.slides[loadNext].url?"href='"+c.options.slides[loadNext].url+"'":"",f=b('<img src="'+c.options.slides[loadNext].image+'"/>'),f.appendTo(c.el+" li:eq("+loadNext+")").wrap("<a "+e+a+"></a>").parent().parent().addClass("image-loading"),f.load(function(){var a= b("#supersized").css("display");b("#supersized").css("display","block");b(this).data("origWidth",b(this).width()).data("origHeight",b(this).height());b("#supersized").css("display",a);c.resizeNow()}));c.$el.css("visibility","hidden");b(".load-item").hide()};c.launch=function(){c.$el.css("visibility","visible").hide().fadeIn(500);b("#supersized-loader").remove();"undefined"!=typeof theme&&"function"==typeof theme.beforeAnimation&&theme.beforeAnimation("next");b(".load-item").show();c.options.keyboard_nav&& b(document.documentElement).keyup(function(a){if(vars.in_animation)return!1;37==a.keyCode||40==a.keyCode?(clearInterval(vars.slideshow_interval),c.prevSlide()):39==a.keyCode||38==a.keyCode?(clearInterval(vars.slideshow_interval),c.nextSlide()):32==a.keyCode&&!vars.hover_pause&&(clearInterval(vars.slideshow_interval),c.playToggle())});c.options.slideshow&&c.options.pause_hover&&b(c.el).hover(function(){if(vars.in_animation)return!1;vars.hover_pause=!0;vars.is_paused||(vars.hover_pause="resume",c.playToggle())}, function(){"resume"==vars.hover_pause&&(c.playToggle(),vars.hover_pause=!1)});c.options.slide_links&&b(vars.slide_list+"> li").click(function(){if("playPause"!=b(this).attr("id"))return targetSlide=index=b(vars.slide_list+"> li").index(this),c.goTo(targetSlide),!1});c.options.thumb_links&&b(vars.thumb_list+"> li").click(function(){index=b(vars.thumb_list+"> li").index(this);targetSlide=index+1;api.goTo(targetSlide);return!1});c.options.slideshow&&1<c.options.slides.length&&(c.options.autoplay&&1< c.options.slides.length?vars.slideshow_interval=setInterval(c.nextSlide,c.options.slide_interval):vars.is_paused=!0,b(".load-item img").bind("contextmenu mousedown",function(){return!1}));b(window).resize(function(){c.resizeNow()})};c.resizeNow=function(){return c.$el.each(function(){b("img",c.el).each(function(){function a(b){if(b){if(thisSlide.width()<g||thisSlide.width()<c.options.min_width)thisSlide.width()*f>=c.options.min_height?(thisSlide.width(c.options.min_width),thisSlide.height(thisSlide.width()* f)):e()}else c.options.min_height>=h&&!c.options.fit_landscape?g*f>=c.options.min_height||g*f>=c.options.min_height&&1>=f?(thisSlide.width(g),thisSlide.height(g*f)):1<f?(thisSlide.height(c.options.min_height),thisSlide.width(thisSlide.height()/f)):thisSlide.width()<g&&(thisSlide.width(g),thisSlide.height(thisSlide.width()*f)):(thisSlide.width(g),thisSlide.height(g*f))}function e(b){b?thisSlide.height()<h&&(thisSlide.height()/f>=c.options.min_width?(thisSlide.height(c.options.min_height),thisSlide.width(thisSlide.height()/ f)):a(!0)):c.options.min_width>=g?h/f>=c.options.min_width||1<f?(thisSlide.height(h),thisSlide.width(h/f)):1>=f&&(thisSlide.width(c.options.min_width),thisSlide.height(thisSlide.width()*f)):(thisSlide.height(h),thisSlide.width(h/f))}thisSlide=b(this);var f=(thisSlide.data("origHeight")/thisSlide.data("origWidth")).toFixed(2),g=c.$el.width(),h=c.$el.height();c.options.fit_always?h/g>f?a():e():h<=c.options.min_height&&g<=c.options.min_width?h/g>f?c.options.fit_landscape&&1>f?a(!0):e(!0):c.options.fit_portrait&& 1<=f?e(!0):a(!0):g<=c.options.min_width?h/g>f?c.options.fit_landscape&&1>f?a(!0):e():c.options.fit_portrait&&1<=f?e():a(!0):h<=c.options.min_height?h/g>f?c.options.fit_landscape&&1>f?a():e(!0):c.options.fit_portrait&&1<=f?e(!0):a():h/g>f?c.options.fit_landscape&&1>f?a():e():c.options.fit_portrait&&1<=f?e():a();thisSlide.parents("li").hasClass("image-loading")&&b(".image-loading").removeClass("image-loading");c.options.horizontal_center&&b(this).css("left",(g-b(this).width())/2);c.options.vertical_center&& b(this).css("top",(h-b(this).height())/2)});c.options.image_protect&&b("img",c.el).bind("contextmenu mousedown",function(){return!1});return!1})};c.nextSlide=function(){if(vars.in_animation||!api.options.slideshow)return!1;vars.in_animation=!0;clearInterval(vars.slideshow_interval);var a=c.$el.find(".activeslide");b(".prevslide").removeClass("prevslide");a.removeClass("activeslide").addClass("prevslide");vars.current_slide+1==c.options.slides.length?vars.current_slide=0:vars.current_slide++;var e= b(c.el+" li:eq("+vars.current_slide+")");c.$el.find(".prevslide");1==c.options.performance&&c.$el.removeClass("quality").addClass("speed");loadSlide=!1;vars.current_slide==c.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;var f=c.el+" li:eq("+loadSlide+")";if(!b(f).html()){var g=c.options.new_window?' target="_blank"':"";imageLink=c.options.slides[loadSlide].url?"href='"+c.options.slides[loadSlide].url+"'":"";var h=b('<img src="'+c.options.slides[loadSlide].image+'"/>');h.appendTo(f).wrap("<a "+ imageLink+g+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");h.load(function(){c._origDim(b(this));c.resizeNow()})}1==c.options.thumbnail_navigation&&(0>vars.current_slide-1?prevThumb=c.options.slides.length-1:prevThumb=vars.current_slide-1,b(vars.prev_thumb).html(b("<img/>").attr("src",c.options.slides[prevThumb].image)),nextThumb=loadSlide,b(vars.next_thumb).html(b("<img/>").attr("src",c.options.slides[nextThumb].image)));"undefined"!=typeof theme&&"function"==typeof theme.beforeAnimation&& theme.beforeAnimation("next");c.options.slide_links&&(b(".current-slide").removeClass("current-slide"),b(vars.slide_list+"> li").eq(vars.current_slide+1).addClass("current-slide"));e.css("visibility","hidden").addClass("activeslide");switch(c.options.transition){case 0:case "none":e.css("visibility","visible");vars.in_animation=!1;c.afterAnimation();break;case 1:case "fade":e.animate({opacity:0},0).css("visibility","visible").animate({opacity:1,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()}); break;case 2:case "slideTop":e.animate({top:-c.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});break;case 3:case "slideRight":e.animate({left:c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});break;case 4:case "slideBottom":e.animate({top:c.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1}, c.options.transition_speed,function(){c.afterAnimation()});break;case 5:case "slideLeft":e.animate({left:-c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});break;case 6:case "carouselRight":e.animate({left:c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});a.animate({left:-c.$el.width(),avoidTransforms:!1},c.options.transition_speed); break;case 7:case "carouselLeft":e.animate({left:-c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()}),a.animate({left:c.$el.width(),avoidTransforms:!1},c.options.transition_speed)}return!1};c.prevSlide=function(){if(vars.in_animation||!api.options.slideshow)return!1;vars.in_animation=!0;clearInterval(vars.slideshow_interval);var a=c.$el.find(".activeslide");b(".prevslide").removeClass("prevslide");a.removeClass("activeslide").addClass("prevslide"); 0==vars.current_slide?vars.current_slide=c.options.slides.length-1:vars.current_slide--;var e=b(c.el+" li:eq("+vars.current_slide+")");c.$el.find(".prevslide");1==c.options.performance&&c.$el.removeClass("quality").addClass("speed");loadSlide=vars.current_slide;var f=c.el+" li:eq("+loadSlide+")";if(!b(f).html()){var g=c.options.new_window?' target="_blank"':"";imageLink=c.options.slides[loadSlide].url?"href='"+c.options.slides[loadSlide].url+"'":"";var h=b('<img src="'+c.options.slides[loadSlide].image+ '"/>');h.appendTo(f).wrap("<a "+imageLink+g+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");h.load(function(){c._origDim(b(this));c.resizeNow()})}1==c.options.thumbnail_navigation&&(0==loadSlide?prevThumb=c.options.slides.length-1:prevThumb=loadSlide-1,b(vars.prev_thumb).html(b("<img/>").attr("src",c.options.slides[prevThumb].image)),vars.current_slide==c.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1,b(vars.next_thumb).html(b("<img/>").attr("src", c.options.slides[nextThumb].image)));"undefined"!=typeof theme&&"function"==typeof theme.beforeAnimation&&theme.beforeAnimation("prev");c.options.slide_links&&(b(".current-slide").removeClass("current-slide"),b(vars.slide_list+"> li").eq(vars.current_slide+1).addClass("current-slide"));e.css("visibility","hidden").addClass("activeslide");switch(c.options.transition){case 0:case "none":e.css("visibility","visible");vars.in_animation=!1;c.afterAnimation();break;case 1:case "fade":e.animate({opacity:0}, 0).css("visibility","visible").animate({opacity:1,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});break;case 2:case "slideTop":e.animate({top:c.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});break;case 3:case "slideRight":e.animate({left:-c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()}); break;case 4:case "slideBottom":e.animate({top:-c.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});break;case 5:case "slideLeft":e.animate({left:c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()});break;case 6:case "carouselRight":e.animate({left:-c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1}, c.options.transition_speed,function(){c.afterAnimation()});a.animate({left:0},0).animate({left:c.$el.width(),avoidTransforms:!1},c.options.transition_speed);break;case 7:case "carouselLeft":e.animate({left:c.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:!1},c.options.transition_speed,function(){c.afterAnimation()}),a.animate({left:0},0).animate({left:-c.$el.width(),avoidTransforms:!1},c.options.transition_speed)}return!1};c.playToggle=function(){if(vars.in_animation|| !api.options.slideshow)return!1;vars.is_paused?(vars.is_paused=!1,"undefined"!=typeof theme&&"function"==typeof theme.playToggle&&theme.playToggle("play"),vars.slideshow_interval=setInterval(c.nextSlide,c.options.slide_interval)):(vars.is_paused=!0,"undefined"!=typeof theme&&"function"==typeof theme.playToggle&&theme.playToggle("pause"),clearInterval(vars.slideshow_interval));return!1};c.goTo=function(a){if(vars.in_animation||!api.options.slideshow)return!1;var e=c.options.slides.length;0>a?a=e:a> e&&(a=1);a=e-a+1;clearInterval(vars.slideshow_interval);"undefined"!=typeof theme&&"function"==typeof theme.goTo&&theme.goTo();if(vars.current_slide==e-a)return vars.is_paused||(vars.slideshow_interval=setInterval(c.nextSlide,c.options.slide_interval)),!1;e-a>vars.current_slide?(vars.current_slide=e-a-1,vars.update_images="next",c._placeSlide(vars.update_images)):e-a<vars.current_slide&&(vars.current_slide=e-a+1,vars.update_images="prev",c._placeSlide(vars.update_images));c.options.slide_links&&(b(vars.slide_list+ "> .current-slide").removeClass("current-slide"),b(vars.slide_list+"> li").eq(e-a+1).addClass("current-slide"));c.options.thumb_links&&(b(vars.thumb_list+"> .current-thumb").removeClass("current-thumb"),b(vars.thumb_list+"> li").eq(e-a).addClass("current-thumb"))};c._placeSlide=function(a){var e=c.options.new_window?' target="_blank"':"";loadSlide=!1;if("next"==a){vars.current_slide==c.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;a=c.el+" li:eq("+loadSlide+")";if(!b(a).html()){e= c.options.new_window?' target="_blank"':"";imageLink=c.options.slides[loadSlide].url?"href='"+c.options.slides[loadSlide].url+"'":"";var f=b('<img src="'+c.options.slides[loadSlide].image+'"/>');f.appendTo(a).wrap("<a "+imageLink+e+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");f.load(function(){c._origDim(b(this));c.resizeNow()})}c.nextSlide()}else"prev"==a&&(0>vars.current_slide-1?loadSlide=c.options.slides.length-1:loadSlide=vars.current_slide-1,a=c.el+" li:eq("+ loadSlide+")",b(a).html()||(e=c.options.new_window?' target="_blank"':"",imageLink=c.options.slides[loadSlide].url?"href='"+c.options.slides[loadSlide].url+"'":"",f=b('<img src="'+c.options.slides[loadSlide].image+'"/>'),f.appendTo(a).wrap("<a "+imageLink+e+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden"),f.load(function(){c._origDim(b(this));c.resizeNow()})),c.prevSlide())};c._origDim=function(a){var c=b("#supersized").css("display");b("#supersized").css("display", "block");a.data("origWidth",a.width()).data("origHeight",a.height());b("#supersized").css("display",c)};c.afterAnimation=function(){1==c.options.performance&&c.$el.removeClass("speed").addClass("quality");vars.update_images&&(0>vars.current_slide-1?setPrev=c.options.slides.length-1:setPrev=vars.current_slide-1,vars.update_images=!1,b(".prevslide").removeClass("prevslide"),b(c.el+" li:eq("+setPrev+")").addClass("prevslide"));vars.in_animation=!1;!vars.is_paused&&c.options.slideshow&&(vars.slideshow_interval= setInterval(c.nextSlide,c.options.slide_interval),c.options.stop_loop&&vars.current_slide==c.options.slides.length-1&&c.playToggle());"undefined"!=typeof theme&&"function"==typeof theme.afterAnimation&&theme.afterAnimation();return!1};c.getField=function(a){return c.options.slides[vars.current_slide][a]};c.init()};b.supersized.vars={thumb_tray:"#thumb-tray",thumb_list:"#thumb-list",slide_list:"#slide-list",current_slide:0,in_animation:!1,is_paused:!1,hover_pause:!1,slideshow_interval:!1,update_images:!1, options:{}};b.supersized.defaultOptions={slideshow:1,autoplay:1,start_slide:1,stop_loop:0,random:0,slide_interval:5E3,transition:1,transition_speed:750,new_window:1,pause_hover:0,keyboard_nav:1,performance:2,image_protect:1,fit_always:0,fit_landscape:0,fit_portrait:0,min_width:0,min_height:0,horizontal_center:1,vertical_center:1,slide_links:"num",thumb_links:0,thumbnail_navigation:0};b.fn.supersized=function(a){return this.each(function(){new b.supersized(a)})}})(jQuery);var firstInit=!0; (function(b){theme={_init:function(){b("#supersizedControls").css("zIndex",99999);b(".slideProjects").children("a").delay(500).fadeTo(300,1);b(".template-gallery .galleryContent").delay(650).fadeTo(300,1,function(){b(".minimize").minimize(b(this))});b(".template-slideshow .galleryContent").delay(0).fadeTo(0,1,function(){b(".minimize").minimize(b(this))});b("#slideList").delay(1E3).fadeTo(300,1);api.options.autoplay&&api.options.progress_bar&&theme.progressBar();firstInit&&(api.options.slide_links&& b(vars.slide_list).css("margin-left",-b(vars.slide_list).width()/2),b(vars.thumb_tray).animate({bottom:-b(vars.thumb_tray).height()},0),b(vars.tray_button).toggle(function(){b(vars.thumb_tray).stop().animate({bottom:0,avoidTransforms:!0},300);b(vars.tray_arrow).attr("src")&&b(vars.tray_arrow).attr("src",vars.image_path+"button-tray-down.png");return!1},function(){b(vars.thumb_tray).stop().animate({bottom:-b(vars.thumb_tray).height(),avoidTransforms:!0},300);b(vars.tray_arrow).attr("src")&&b(vars.tray_arrow).attr("src", vars.image_path+"button-tray-up.png");return!1}),b(vars.thumb_list).width(b("> li",vars.thumb_list).length*b("> li",vars.thumb_list).outerWidth(!0)),b(vars.slide_total).length&&b(vars.slide_total).html(api.options.slides.length),api.options.thumb_links&&(b(vars.thumb_list).width()<=b(vars.thumb_tray).width()&&b(vars.thumb_back+","+vars.thumb_forward).fadeOut(0),vars.thumb_interval=Math.floor(b(vars.thumb_tray).width()/b("> li",vars.thumb_list).outerWidth(!0))*b("> li",vars.thumb_list).outerWidth(!0), vars.thumb_page=0,b(vars.thumb_forward).click(function(){vars.thumb_page=vars.thumb_page-vars.thumb_interval<=-b(vars.thumb_list).width()?0:vars.thumb_page-vars.thumb_interval;b(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}),b(vars.thumb_back).click(function(){0<vars.thumb_page+vars.thumb_interval?(vars.thumb_page=Math.floor(b(vars.thumb_list).width()/vars.thumb_interval)*-vars.thumb_interval,b(vars.thumb_list).width()<=-vars.thumb_page&&(vars.thumb_page+= vars.thumb_interval)):vars.thumb_page+=vars.thumb_interval;b(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})})),b(vars.next_slide).click(function(){api.nextSlide()}),b(vars.prev_slide).click(function(){api.prevSlide()}),jQuery.support.opacity&&b(vars.prev_slide+","+vars.next_slide).mouseover(function(){b(this).stop().animate({opacity:1},100)}).mouseout(function(){b(this).stop().animate({opacity:0.6},100)}),api.options.thumbnail_navigation&&(b(vars.next_thumb).click(function(){api.nextSlide()}), b(vars.prev_thumb).click(function(){api.prevSlide()})),b(vars.play_button).click(function(){api.playToggle();return!1}),api.options.mouse_scrub&&b(vars.thumb_tray).mousemove(function(a){var c=b(vars.thumb_tray).width(),d=b(vars.thumb_list).width();if(d>c){var e=a.pageX-1;if(10<e||-10>e)newX=(c-d)*(a.pageX/c),e=parseInt(Math.abs(parseInt(b(vars.thumb_list).css("left"))-newX)).toFixed(0),b(vars.thumb_list).stop().animate({left:newX},{duration:3*e,easing:"easeOutExpo"})}}),b(window).resize(function(){api.options.progress_bar&& !vars.in_animation&&(vars.slideshow_interval&&clearInterval(vars.slideshow_interval),0<api.options.slides.length-1&&clearInterval(vars.slideshow_interval),b(vars.progress_bar).stop().animate({height:0},100,"easeOutQuad"),!vars.progressDelay&&api.options.slideshow&&(vars.progressDelay=setTimeout(function(){vars.is_paused||(theme.progressBar(),vars.slideshow_interval=setInterval(api.nextSlide,api.options.slide_interval));vars.progressDelay=!1},1E3)));api.options.thumb_links&&vars.thumb_tray.length&& (vars.thumb_page=0,vars.thumb_interval=Math.floor(b(vars.thumb_tray).width()/b("> li",vars.thumb_list).outerWidth(!0))*b("> li",vars.thumb_list).outerWidth(!0),b(vars.thumb_list).width()>b(vars.thumb_tray).width()?(b(vars.thumb_back+","+vars.thumb_forward).fadeIn("fast"),b(vars.thumb_list).stop().animate({left:0},200)):b(vars.thumb_back+","+vars.thumb_forward).fadeOut("fast"))}),firstInit=!1)},goTo:function(){api.options.progress_bar&&!vars.is_paused&&(b(vars.progress_bar).stop().animate({left:-b(window).width()}, 0),theme.progressBar())},playToggle:function(a){"play"==a?(b("#playPause").removeClass("paused"),api.options.progress_bar&&!vars.is_paused&&theme.progressBar()):"pause"==a&&(b("#playPause").addClass("paused"),api.options.progress_bar&&vars.is_paused&&b(vars.progress_bar).stop().animate({height:0},100,"easeOutQuad"))},beforeAnimation:function(a){api.options.progress_bar&&!vars.is_paused&&b(vars.progress_bar).stop().animate({height:0},200,"easeOutQuad");b(vars.slide_caption).length&&(api.getField("title")? b(vars.slide_caption).html(api.getField("title")):b(vars.slide_caption).html(""));vars.slide_current.length&&b(vars.slide_current).html(vars.current_slide+1);if(api.options.thumb_links&&(b(".current-thumb").removeClass("current-thumb"),b("li",vars.thumb_list).eq(vars.current_slide).addClass("current-thumb"),b(vars.thumb_list).width()>b(vars.thumb_tray).width()))if("next"==a)0==vars.current_slide?(vars.thumb_page=0,b(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})): b(".current-thumb").offset().left-b(vars.thumb_tray).offset().left>=vars.thumb_interval&&(vars.thumb_page-=vars.thumb_interval,b(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"}));else if("prev"==a)if(vars.current_slide==api.options.slides.length-1)vars.thumb_page=Math.floor(b(vars.thumb_list).width()/vars.thumb_interval)*-vars.thumb_interval,b(vars.thumb_list).width()<=-vars.thumb_page&&(vars.thumb_page+=vars.thumb_interval),b(vars.thumb_list).stop().animate({left:vars.thumb_page}, {duration:500,easing:"easeOutExpo"});else if(0>b(".current-thumb").offset().left-b(vars.thumb_tray).offset().left){if(0<vars.thumb_page+vars.thumb_interval)return!1;vars.thumb_page+=vars.thumb_interval;b(vars.thumb_list).stop().animate({left:vars.thumb_page},{duration:500,easing:"easeOutExpo"})}},afterAnimation:function(){api.options.progress_bar&&!vars.is_paused&&theme.progressBar()},progressBar:function(){b(vars.progress_bar).stop().animate({height:"100%"},api.options.slide_interval,"linear")}}; b.supersized.themeVars={progress_delay:!1,thumb_page:!1,thumb_interval:!1,image_path:"img/",play_button:"#playPause",next_slide:"#nextslide",prev_slide:"#prevslide",next_thumb:"#nextthumb",prev_thumb:"#prevthumb",slide_caption:"#slidecaption",slide_current:".slidenumber",slide_total:".totalslides",slide_list:"#slideList",thumb_tray:"#thumb-tray",thumb_list:"#thumb-list",thumb_forward:"#thumb-forward",thumb_back:"#thumb-back",tray_arrow:"#tray-arrow",tray_button:"#tray-button",progress_bar:"#progressBar"}; b.supersized.themeOptions={progress_bar:1,mouse_scrub:0}})(jQuery); (function(b){function a(a){b(this).touchSwipeLeft(a).touchSwipeRight(a)}function c(a){var c=b(this);c.data("swipeLeft")||c.data("swipeLeft",a);c.data("swipeRight")||c.unbindSwipe(!0).bind(h,e)}function d(a){var c=b(this);c.data("swipeRight")||c.data("swipeRight",a);c.data("swipeLeft")||c.unbindSwipe(!0).bind(h,e)}function e(a){var c=(new Date).getTime(),d=a.originalEvent.touches?a.originalEvent.touches[0]:a,e=b(this).bind(g,function(a){c&&(d=a.originalEvent.touches?a.originalEvent.touches[0]:a,s= (new Date).getTime(),m=d.pageX,t=d.pageY,Math.abs(h-m)>n&&a.preventDefault())}).one(f,function(){e.unbind(g);c&&s&&s-c<x&&(Math.abs(h-m)>j&&Math.abs(v-t)<k)&&(h>m?e.data("swipeLeft")&&e.data("swipeLeft")("left"):e.data("swipeRight")&&e.data("swipeRight")("right"));c=s=null}),h=d.pageX,v=d.pageY,m,t,s;e.data("stopPropagation")&&a.stopImmediatePropagation()}var f,g,h,j=30,k=75,n=10,x=1E3;"ontouchend"in document?(f="touchend.cj_swp",g="touchmove.cj_swp",h="touchstart.cj_swp"):(f="mouseup.cj_swp",g="mousemove.cj_swp", h="mousedown.cj_swp");b.fn.touchSwipe=function(b,c){c&&this.data("stopPropagation",!0);if(b)return this.each(a,[b])};b.fn.touchSwipeLeft=function(a,b){b&&this.data("stopPropagation",!0);if(a)return this.each(c,[a])};b.fn.touchSwipeRight=function(a,b){b&&this.data("stopPropagation",!0);if(a)return this.each(d,[a])};b.fn.unbindSwipeLeft=function(){this.removeData("swipeLeft");this.data("swipeRight")||this.unbindSwipe(!0)};b.fn.unbindSwipeRight=function(){this.removeData("swipeRight");this.data("swipeLeft")|| this.unbindSwipe(!0)};b.fn.unbindSwipe=function(a){a||this.removeData("swipeLeft swipeRight stopPropagation");return this.unbind(h+" "+g+" "+f)}})(jQuery); (function(b,a,c){var d,e,f,g;f={paneClass:"pane",sliderClass:"slider",sliderMinHeight:20,contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1};d="Microsoft Internet Explorer"===a.navigator.appName&&/msie 7./i.test(a.navigator.appVersion)&&a.ActiveXObject;e=null;g=function(){var a,b;a=c.createElement("div");b=a.style;b.position="absolute";b.width="100px";b.height="100px";b.overflow="scroll";b.top="-9999px";c.body.appendChild(a);b=a.offsetWidth-a.clientWidth;c.body.removeChild(a); return b};var h=function(d,f){this.options=f;e||(e=g());this.el=b(d);this.doc=b(c);this.win=b(a);this.generate();this.createEvents();this.addEvents();this.reset()};h.prototype.preventScrolling=function(a,b){switch(a.type){case "DOMMouseScroll":("down"===b&&0<a.originalEvent.detail||"up"===b&&0>a.originalEvent.detail)&&a.preventDefault();break;case "mousewheel":if(!a.originalEvent)break;if(!a.originalEvent.wheelDelta)break;("down"===b&&0>a.originalEvent.wheelDelta||"up"===b&&0<a.originalEvent.wheelDelta)&& a.preventDefault()}};h.prototype.createEvents=function(){var a=this;this.events={down:function(b){a.isBeingDragged=!0;a.offsetY=b.clientY-a.slider.offset().top;a.pane.addClass("active");a.doc.bind("mousemove",a.events.drag).bind("mouseup",a.events.up);return!1},drag:function(b){a.sliderY=b.clientY-a.el.offset().top-a.offsetY;a.scroll();return!1},up:function(){a.isBeingDragged=!1;a.pane.removeClass("active");a.doc.unbind("mousemove",a.events.drag).unbind("mouseup",a.events.up);return!1},resize:function(){a.reset()}, panedown:function(b){a.sliderY=b.offsetY-0.5*a.sliderHeight;a.scroll();a.events.down(b);return!1},scroll:function(b){var c,d,e;a.isBeingDragged||(c=a.content[0].scrollHeight-a.content[0].clientHeight,e=a.content[0].scrollTop,d=a.paneHeight-a.sliderHeight,a.slider.css({top:e*d/c}),null!=b&&(e>=c?(a.options.preventPageScrolling&&a.preventScrolling(b,"down"),a.el.trigger("scrollend")):0===e&&(a.options.preventPageScrolling&&a.preventScrolling(b,"up"),a.el.trigger("scrolltop"))))},wheel:function(b){if(null!= b)return a.sliderY+=-b.wheelDeltaY||-b.delta,a.scroll(),!1}}};h.prototype.addEvents=function(){var a;a=this.events;this.options.disableResize||this.win.bind("resize",a.resize);this.slider.bind("mousedown",a.down);this.pane.bind("mousedown",a.panedown).bind("mousewheel",a.wheel).bind("DOMMouseScroll",a.wheel);this.content.bind("mousewheel",a.scroll).bind("DOMMouseScroll",a.scroll).bind("touchmove",a.scroll)};h.prototype.removeEvents=function(){var a;a=this.events;this.options.disableResize||this.win.unbind("resize", a.resize);this.slider.unbind("mousedown",a.down);this.pane.unbind("mousedown",a.panedown).unbind("mousewheel",a.wheel).unbind("DOMMouseScroll",a.wheel);this.content.unbind("mousewheel",a.scroll).unbind("DOMMouseScroll",a.scroll).unbind("touchmove",a.scroll)};h.prototype.generate=function(){var a,c,d,f,g;d=this.options;f=d.paneClass;g=d.sliderClass;a=d.contentClass;this.el.append('<div class="'+f+'"><div class="'+g+'" /></div>');this.content=b(this.el.children("."+a)[0]);this.slider=this.el.find("."+ g);this.pane=this.el.find("."+f);e&&(c={right:-e},this.el.addClass("has-scrollbar"));d.iOSNativeScrolling&&(null==c&&(c={}),c.WebkitOverflowScrolling="touch");null!=c&&this.content.css(c);return this};h.prototype.elementsExist=function(){return this.el.find("."+this.options.paneClass).length};h.prototype.restore=function(){this.stopped=!1;this.pane.show();return this.addEvents()};h.prototype.reset=function(){var a,b,c,f,g,h,l;this.elementsExist()||this.generate().stop();this.stopped&&this.restore(); a=this.content[0];c=a.style;f=c.overflowY;d&&this.content.css({height:this.content.height()});b=a.scrollHeight+e;h=this.pane.outerHeight();l=parseInt(this.pane.css("top"),10);g=parseInt(this.pane.css("bottom"),10);g=h+l+g;l=Math.round(g/b*g);l=l>this.options.sliderMinHeight?l:this.options.sliderMinHeight;"scroll"===f&&"scroll"!==c.overflowX&&(l+=e);this.contentHeight=b;this.paneHeight=h;this.paneOuterHeight=g;this.sliderHeight=l;this.maxSliderTop=g-l;this.slider.height(l);this.events.scroll();this.pane.show(); this.paneOuterHeight>=a.scrollHeight&&"scroll"!==f?this.pane.hide():this.el.height()===a.scrollHeight&&"scroll"===f?this.slider.hide():this.slider.show();return this};h.prototype.scroll=function(){this.sliderY=Math.max(0,this.sliderY);this.sliderY=Math.min(this.maxSliderTop,this.sliderY);this.content.scrollTop(-1*((this.paneHeight-this.contentHeight+e)*this.sliderY/this.maxSliderTop));this.slider.css({top:this.sliderY});return this};h.prototype.scrollBottom=function(a){this.reset();this.content.scrollTop(this.contentHeight- this.content.height()-a).trigger("mousewheel");return this};h.prototype.scrollTop=function(a){this.reset();this.content.scrollTop(+a).trigger("mousewheel");return this};h.prototype.scrollTo=function(a){this.reset();a=b(a).offset().top;a>this.maxSliderTop&&(a/=this.contentHeight,this.sliderY=a*=this.maxSliderTop,this.scroll());return this};h.prototype.stop=function(){this.stopped=!0;this.removeEvents();this.pane.hide();return this};b.fn.nanoScroller=function(a){var c,d,e,g,p,l;null!=a&&(e=a.scrollBottom, p=a.scrollTop,g=a.scrollTo,d=a.scroll,l=a.stop);c=b.extend({},f,a);this.each(function(){var f;(f=b.data(this,"scrollbar"))?b.extend(f.options,a):(f=new h(this,c),b.data(this,"scrollbar",f));return e?f.scrollBottom(e):p?f.scrollTop(p):g?f.scrollTo(g):"bottom"===d?f.scrollBottom(0):"top"===d?f.scrollTop(0):d instanceof b?f.scrollTo(d):l?f.stop():f.reset()})}})(jQuery,window,document);jQuery.easing.jswing=jQuery.easing.swing; jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(b,a,c,d,e){return jQuery.easing[jQuery.easing.def](b,a,c,d,e)},easeInQuad:function(b,a,c,d,e){return d*(a/=e)*a+c},easeOutQuad:function(b,a,c,d,e){return-d*(a/=e)*(a-2)+c},easeInOutQuad:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c},easeInCubic:function(b,a,c,d,e){return d*(a/=e)*a*a+c},easeOutCubic:function(b,a,c,d,e){return d*((a=a/e-1)*a*a+1)+c},easeInOutCubic:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a+c: d/2*((a-=2)*a*a+2)+c},easeInQuart:function(b,a,c,d,e){return d*(a/=e)*a*a*a+c},easeOutQuart:function(b,a,c,d,e){return-d*((a=a/e-1)*a*a*a-1)+c},easeInOutQuart:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c},easeInQuint:function(b,a,c,d,e){return d*(a/=e)*a*a*a*a+c},easeOutQuint:function(b,a,c,d,e){return d*((a=a/e-1)*a*a*a*a+1)+c},easeInOutQuint:function(b,a,c,d,e){return 1>(a/=e/2)?d/2*a*a*a*a*a+c:d/2*((a-=2)*a*a*a*a+2)+c},easeInSine:function(b,a,c,d,e){return-d*Math.cos(a/ e*(Math.PI/2))+d+c},easeOutSine:function(b,a,c,d,e){return d*Math.sin(a/e*(Math.PI/2))+c},easeInOutSine:function(b,a,c,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+c},easeInExpo:function(b,a,c,d,e){return 0==a?c:d*Math.pow(2,10*(a/e-1))+c},easeOutExpo:function(b,a,c,d,e){return a==e?c+d:d*(-Math.pow(2,-10*a/e)+1)+c},easeInOutExpo:function(b,a,c,d,e){return 0==a?c:a==e?c+d:1>(a/=e/2)?d/2*Math.pow(2,10*(a-1))+c:d/2*(-Math.pow(2,-10*--a)+2)+c},easeInCirc:function(b,a,c,d,e){return-d*(Math.sqrt(1-(a/=e)* a)-1)+c},easeOutCirc:function(b,a,c,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+c},easeInOutCirc:function(b,a,c,d,e){return 1>(a/=e/2)?-d/2*(Math.sqrt(1-a*a)-1)+c:d/2*(Math.sqrt(1-(a-=2)*a)+1)+c},easeInElastic:function(b,a,c,d,e){var b=1.70158,f=0,g=d;if(0==a)return c;if(1==(a/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f))+c},easeOutElastic:function(b,a,c,d,e){var b=1.70158,f=0,g=d;if(0==a)return c;if(1== (a/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*a)*Math.sin((a*e-b)*2*Math.PI/f)+d+c},easeInOutElastic:function(b,a,c,d,e){var b=1.70158,f=0,g=d;if(0==a)return c;if(2==(a/=e/2))return c+d;f||(f=e*0.3*1.5);g<Math.abs(d)?(g=d,b=f/4):b=f/(2*Math.PI)*Math.asin(d/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f)+c:0.5*g*Math.pow(2,-10*(a-=1))*Math.sin((a*e-b)*2*Math.PI/f)+d+c},easeInBack:function(b,a,c,d,e,f){void 0== f&&(f=1.70158);return d*(a/=e)*a*((f+1)*a-f)+c},easeOutBack:function(b,a,c,d,e,f){void 0==f&&(f=1.70158);return d*((a=a/e-1)*a*((f+1)*a+f)+1)+c},easeInOutBack:function(b,a,c,d,e,f){void 0==f&&(f=1.70158);return 1>(a/=e/2)?d/2*a*a*(((f*=1.525)+1)*a-f)+c:d/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+c},easeInBounce:function(b,a,c,d,e){return d-jQuery.easing.easeOutBounce(b,e-a,0,d,e)+c},easeOutBounce:function(b,a,c,d,e){return(a/=e)<1/2.75?d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75? d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOutBounce:function(b,a,c,d,e){return a<e/2?0.5*jQuery.easing.easeInBounce(b,2*a,0,d,e)+c:0.5*jQuery.easing.easeOutBounce(b,2*a-e,0,d,e)+0.5*d+c}}); (function(b){function a(a){var d;return a&&a.constructor==Array&&3==a.length?a:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3])]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]: (d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:colors[b.trim(a).toLowerCase()]}b.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),function(c,d){b.fx.step[d]=function(c){if(0==c.state){var f;f=c.elem;var g=d,h;do{h=b.curCSS(f,g);if(""!=h&&"transparent"!=h||b.nodeName(f,"body"))break;g="backgroundColor"}while(f=f.parentNode);f=a(h);c.start=f;c.end=a(c.end)}c.elem.style[d]= "rgb("+[Math.max(Math.min(parseInt(c.pos*(c.end[0]-c.start[0])+c.start[0]),255),0),Math.max(Math.min(parseInt(c.pos*(c.end[1]-c.start[1])+c.start[1]),255),0),Math.max(Math.min(parseInt(c.pos*(c.end[2]-c.start[2])+c.start[2]),255),0)].join()+")"}})})(jQuery); (function(b){b.fn.hoverFadeColor=function(a){var c={color:null,fadeToSpeed:300,fadeFromSpeed:300};a&&b.extend(c,a);this.each(function(){var a=b(this).css("color"),e=c.color;b(this).hover(function(){hoverElem=this;null==e&&b.browser.msie&&9>b.browser.version.substr(0,1)?setTimeout(function(){null==e&&(e=b(hoverElem).css("color"));b(hoverElem).css("color",a);b(hoverElem).stop().animate({color:e},c.fadeToSpeed)},0):(null==e&&(e=b(hoverElem).css("color")),b(hoverElem).css("color",a),b(hoverElem).stop().animate({color:e}, c.fadeToSpeed))},function(){b(hoverElem).stop().animate({color:a},c.fadeFromSpeed)})});return this}})(jQuery); (function(b){var a={init:function(a){var e={color:b(this).css("background-color"),reach:20,speed:1E3,pause:0,glow:!0,repeat:!0,onHover:!1};b(this).css({"-moz-outline-radius":b(this).css("border-top-left-radius"),"-webkit-outline-radius":b(this).css("border-top-left-radius"),"outline-radius":b(this).css("border-top-left-radius")});a&&b.extend(e,a);e.color=b("<div style='background:"+e.color+"'></div>").css("background-color");!0!==e.repeat&&(!isNaN(e.repeat)&&0<e.repeat)&&(e.repeat-=1);return this.each(function(){e.onHover? b(this).bind("mouseover",function(){c(e,this,0)}).bind("mouseout",function(){b(this).pulsate("destroy")}):c(e,this,0)})},destroy:function(){return this.each(function(){clearTimeout(this.timer);b(this).css("outline",0)})}},c=function(a,e,f){var g=a.reach,f=f>g?0:f,h=(g-f)/g,j=a.color.split(","),h="rgba("+j[0].split("(")[1]+","+j[1]+","+j[2].split(")")[0]+","+h+")",j={outline:"2px solid "+h};a.glow?(j["box-shadow"]="0px 0px "+parseInt(f/1.5)+"px "+h,b.browser.webkit&&(j["outline-offset"]=f+"px",j["outline-radius"]= "100 px")):j["outline-offset"]=f+"px";b(e).css(j);e.timer=setTimeout(function(){if(f>=g&&!a.repeat)return b(e).pulse("destroy"),!1;if(f>=g&&!0!==a.repeat&&!isNaN(a.repeat)&&0<a.repeat)a.repeat-=1;else if(a.pause&&f>=g){var h=f+1;innerfunc=function(){c(a,e,h)};setTimeout(innerfunc,a.pause);return!1}c(a,e,f+1)},a.speed/g)};b.fn.pulsate=function(c){if(a[c])return a[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof c||!c)return a.init.apply(this,arguments);b.error("Method "+ c+" does not exist on jQuery.pulsate")}})(jQuery);